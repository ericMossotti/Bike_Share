<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eric Mossotti">

<title>Bike_Share - BikeShare</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<link href="site_libs/htmltools-fill-0.5.8/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<link href="site_libs/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="site_libs/HomeButton-0.0.1/home-button.js"></script>
<script src="site_libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="site_libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="site_libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="site_libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<link href="site_libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="site_libs/vis-9.1.0/vis-network.min.js"></script>
<script src="site_libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
<link href="site_libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="ojs-define">
{"contents":[{"name":"js_tsi","value":{"started_at":["2023-01-01","2023-01-01","2023-01-02","2023-01-02","2023-01-03","2023-01-03","2023-01-04","2023-01-04","2023-01-05","2023-01-05","2023-01-06","2023-01-06","2023-01-07","2023-01-07","2023-01-08","2023-01-08","2023-01-09","2023-01-09","2023-01-10","2023-01-10","2023-01-11","2023-01-11","2023-01-12","2023-01-12","2023-01-13","2023-01-13","2023-01-14","2023-01-14","2023-01-15","2023-01-15","2023-01-16","2023-01-16","2023-01-17","2023-01-17","2023-01-18","2023-01-18","2023-01-19","2023-01-19","2023-01-20","2023-01-20","2023-01-21","2023-01-21","2023-01-22","2023-01-22","2023-01-23","2023-01-23","2023-01-24","2023-01-24","2023-01-25","2023-01-25","2023-01-26","2023-01-26","2023-01-27","2023-01-27","2023-01-28","2023-01-28","2023-01-29","2023-01-29","2023-01-30","2023-01-30","2023-01-31","2023-01-31","2023-02-01","2023-02-01","2023-02-02","2023-02-02","2023-02-03","2023-02-03","2023-02-04","2023-02-04","2023-02-05","2023-02-05","2023-02-06","2023-02-06","2023-02-07","2023-02-07","2023-02-08","2023-02-08","2023-02-09","2023-02-09","2023-02-10","2023-02-10","2023-02-11","2023-02-11","2023-02-12","2023-02-12","2023-02-13","2023-02-13","2023-02-14","2023-02-14","2023-02-15","2023-02-15","2023-02-16","2023-02-16","2023-02-17","2023-02-17","2023-02-18","2023-02-18","2023-02-19","2023-02-19","2023-02-20","2023-02-20","2023-02-21","2023-02-21","2023-02-22","2023-02-22","2023-02-23","2023-02-23","2023-02-24","2023-02-24","2023-02-25","2023-02-25","2023-02-26","2023-02-26","2023-02-27","2023-02-27","2023-02-28","2023-02-28","2023-03-01","2023-03-01","2023-03-02","2023-03-02","2023-03-03","2023-03-03","2023-03-04","2023-03-04","2023-03-05","2023-03-05","2023-03-06","2023-03-06","2023-03-07","2023-03-07","2023-03-08","2023-03-08","2023-03-09","2023-03-09","2023-03-10","2023-03-10","2023-03-11","2023-03-11","2023-03-12","2023-03-12","2023-03-13","2023-03-13","2023-03-14","2023-03-14","2023-03-15","2023-03-15","2023-03-16","2023-03-16","2023-03-17","2023-03-17","2023-03-18","2023-03-18","2023-03-19","2023-03-19","2023-03-20","2023-03-20","2023-03-21","2023-03-21","2023-03-22","2023-03-22","2023-03-23","2023-03-23","2023-03-24","2023-03-24","2023-03-25","2023-03-25","2023-03-26","2023-03-26","2023-03-27","2023-03-27","2023-03-28","2023-03-28","2023-03-29","2023-03-29","2023-03-30","2023-03-30","2023-03-31","2023-03-31","2023-04-01","2023-04-01","2023-04-02","2023-04-02","2023-04-03","2023-04-03","2023-04-04","2023-04-04","2023-04-05","2023-04-05","2023-04-06","2023-04-06","2023-04-07","2023-04-07","2023-04-08","2023-04-08","2023-04-09","2023-04-09","2023-04-10","2023-04-10","2023-04-11","2023-04-11","2023-04-12","2023-04-12","2023-04-13","2023-04-13","2023-04-14","2023-04-14","2023-04-15","2023-04-15","2023-04-16","2023-04-16","2023-04-17","2023-04-17","2023-04-18","2023-04-18","2023-04-19","2023-04-19","2023-04-20","2023-04-20","2023-04-21","2023-04-21","2023-04-22","2023-04-22","2023-04-23","2023-04-23","2023-04-24","2023-04-24","2023-04-25","2023-04-25","2023-04-26","2023-04-26","2023-04-27","2023-04-27","2023-04-28","2023-04-28","2023-04-29","2023-04-29","2023-04-30","2023-04-30","2023-05-01","2023-05-01","2023-05-02","2023-05-02","2023-05-03","2023-05-03","2023-05-04","2023-05-04","2023-05-05","2023-05-05","2023-05-06","2023-05-06","2023-05-07","2023-05-07","2023-05-08","2023-05-08","2023-05-09","2023-05-09","2023-05-10","2023-05-10","2023-05-11","2023-05-11","2023-05-12","2023-05-12","2023-05-13","2023-05-13","2023-05-14","2023-05-14","2023-05-15","2023-05-15","2023-05-16","2023-05-16","2023-05-17","2023-05-17","2023-05-18","2023-05-18","2023-05-19","2023-05-19","2023-05-20","2023-05-20","2023-05-21","2023-05-21","2023-05-22","2023-05-22","2023-05-23","2023-05-23","2023-05-24","2023-05-24","2023-05-25","2023-05-25","2023-05-26","2023-05-26","2023-05-27","2023-05-27","2023-05-28","2023-05-28","2023-05-29","2023-05-29","2023-05-30","2023-05-30","2023-05-31","2023-05-31","2023-06-01","2023-06-01","2023-06-02","2023-06-02","2023-06-03","2023-06-03","2023-06-04","2023-06-04","2023-06-05","2023-06-05","2023-06-06","2023-06-06","2023-06-07","2023-06-07","2023-06-08","2023-06-08","2023-06-09","2023-06-09","2023-06-10","2023-06-10","2023-06-11","2023-06-11","2023-06-12","2023-06-12","2023-06-13","2023-06-13","2023-06-14","2023-06-14","2023-06-15","2023-06-15","2023-06-16","2023-06-16","2023-06-17","2023-06-17","2023-06-18","2023-06-18","2023-06-19","2023-06-19","2023-06-20","2023-06-20","2023-06-21","2023-06-21","2023-06-22","2023-06-22","2023-06-23","2023-06-23","2023-06-24","2023-06-24","2023-06-25","2023-06-25","2023-06-26","2023-06-26","2023-06-27","2023-06-27","2023-06-28","2023-06-28","2023-06-29","2023-06-29","2023-06-30","2023-06-30","2023-07-01","2023-07-01","2023-07-02","2023-07-02","2023-07-03","2023-07-03","2023-07-04","2023-07-04","2023-07-05","2023-07-05","2023-07-06","2023-07-06","2023-07-07","2023-07-07","2023-07-08","2023-07-08","2023-07-09","2023-07-09","2023-07-10","2023-07-10","2023-07-11","2023-07-11","2023-07-12","2023-07-12","2023-07-13","2023-07-13","2023-07-14","2023-07-14","2023-07-15","2023-07-15","2023-07-16","2023-07-16","2023-07-17","2023-07-17","2023-07-18","2023-07-18","2023-07-19","2023-07-19","2023-07-20","2023-07-20","2023-07-21","2023-07-21","2023-07-22","2023-07-22","2023-07-23","2023-07-23","2023-07-24","2023-07-24","2023-07-25","2023-07-25","2023-07-26","2023-07-26","2023-07-27","2023-07-27","2023-07-28","2023-07-28","2023-07-29","2023-07-29","2023-07-30","2023-07-30","2023-07-31","2023-07-31","2023-08-01","2023-08-01","2023-08-02","2023-08-02","2023-08-03","2023-08-03","2023-08-04","2023-08-04","2023-08-05","2023-08-05","2023-08-06","2023-08-06","2023-08-07","2023-08-07","2023-08-08","2023-08-08","2023-08-09","2023-08-09","2023-08-10","2023-08-10","2023-08-11","2023-08-11","2023-08-12","2023-08-12","2023-08-13","2023-08-13","2023-08-14","2023-08-14","2023-08-15","2023-08-15","2023-08-16","2023-08-16","2023-08-17","2023-08-17","2023-08-18","2023-08-18","2023-08-19","2023-08-19","2023-08-20","2023-08-20","2023-08-21","2023-08-21","2023-08-22","2023-08-22","2023-08-23","2023-08-23","2023-08-24","2023-08-24","2023-08-25","2023-08-25","2023-08-26","2023-08-26","2023-08-27","2023-08-27","2023-08-28","2023-08-28","2023-08-29","2023-08-29","2023-08-30","2023-08-30","2023-08-31","2023-08-31","2023-09-01","2023-09-01","2023-09-02","2023-09-02","2023-09-03","2023-09-03","2023-09-04","2023-09-04","2023-09-05","2023-09-05","2023-09-06","2023-09-06","2023-09-07","2023-09-07","2023-09-08","2023-09-08","2023-09-09","2023-09-09","2023-09-10","2023-09-10","2023-09-11","2023-09-11","2023-09-12","2023-09-12","2023-09-13","2023-09-13","2023-09-14","2023-09-14","2023-09-15","2023-09-15","2023-09-16","2023-09-16","2023-09-17","2023-09-17","2023-09-18","2023-09-18","2023-09-19","2023-09-19","2023-09-20","2023-09-20","2023-09-21","2023-09-21","2023-09-22","2023-09-22","2023-09-23","2023-09-23","2023-09-24","2023-09-24","2023-09-25","2023-09-25","2023-09-26","2023-09-26","2023-09-27","2023-09-27","2023-09-28","2023-09-28","2023-09-29","2023-09-29","2023-09-30","2023-09-30","2023-10-01","2023-10-01","2023-10-02","2023-10-02","2023-10-03","2023-10-03","2023-10-04","2023-10-04","2023-10-05","2023-10-05","2023-10-06","2023-10-06","2023-10-07","2023-10-07","2023-10-08","2023-10-08","2023-10-09","2023-10-09","2023-10-10","2023-10-10","2023-10-11","2023-10-11","2023-10-12","2023-10-12","2023-10-13","2023-10-13","2023-10-14","2023-10-14","2023-10-15","2023-10-15","2023-10-16","2023-10-16","2023-10-17","2023-10-17","2023-10-18","2023-10-18","2023-10-19","2023-10-19","2023-10-20","2023-10-20","2023-10-21","2023-10-21","2023-10-22","2023-10-22","2023-10-23","2023-10-23","2023-10-24","2023-10-24","2023-10-25","2023-10-25","2023-10-26","2023-10-26","2023-10-27","2023-10-27","2023-10-28","2023-10-28","2023-10-29","2023-10-29","2023-10-30","2023-10-30","2023-10-31","2023-10-31","2023-11-01","2023-11-01","2023-11-02","2023-11-02","2023-11-03","2023-11-03","2023-11-04","2023-11-04","2023-11-05","2023-11-05","2023-11-06","2023-11-06","2023-11-07","2023-11-07","2023-11-08","2023-11-08","2023-11-09","2023-11-09","2023-11-10","2023-11-10","2023-11-11","2023-11-11","2023-11-12","2023-11-12","2023-11-13","2023-11-13","2023-11-14","2023-11-14","2023-11-15","2023-11-15","2023-11-16","2023-11-16","2023-11-17","2023-11-17","2023-11-18","2023-11-18","2023-11-19","2023-11-19","2023-11-20","2023-11-20","2023-11-21","2023-11-21","2023-11-22","2023-11-22","2023-11-23","2023-11-23","2023-11-24","2023-11-24","2023-11-25","2023-11-25","2023-11-26","2023-11-26","2023-11-27","2023-11-27","2023-11-28","2023-11-28","2023-11-29","2023-11-29","2023-11-30","2023-11-30","2023-12-01","2023-12-01","2023-12-02","2023-12-02","2023-12-03","2023-12-03","2023-12-04","2023-12-04","2023-12-05","2023-12-05","2023-12-06","2023-12-06","2023-12-07","2023-12-07","2023-12-08","2023-12-08","2023-12-09","2023-12-09","2023-12-10","2023-12-10","2023-12-11","2023-12-11","2023-12-12","2023-12-12","2023-12-13","2023-12-13","2023-12-14","2023-12-14","2023-12-15","2023-12-15","2023-12-16","2023-12-16","2023-12-17","2023-12-17","2023-12-18","2023-12-18","2023-12-19","2023-12-19","2023-12-20","2023-12-20","2023-12-21","2023-12-21","2023-12-22","2023-12-22","2023-12-23","2023-12-23","2023-12-24","2023-12-24","2023-12-25","2023-12-25","2023-12-26","2023-12-26","2023-12-27","2023-12-27","2023-12-28","2023-12-28","2023-12-29","2023-12-29","2023-12-30","2023-12-30","2023-12-31","2023-12-31"],"member_casual":["casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member","casual","member"],"n":[1181,2131,934,2850,677,3038,896,4497,792,3932,852,3716,887,2874,969,2768,1050,4853,1300,6004,1444,6344,1125,5183,920,4084,987,3050,1070,3096,638,2592,1123,5626,1109,5328,805,4416,933,4487,998,3302,426,1820,627,4134,958,5239,420,2771,499,3182,410,2515,275,1450,266,1382,289,2384,402,2576,522,3406,617,3857,353,2110,663,2684,841,2872,824,4542,982,5255,1013,5340,506,2784,930,4256,1517,3852,1900,4263,1314,5581,1152,5652,1099,5207,344,2229,526,2625,1188,3053,2023,4088,1240,4514,992,4839,390,2125,943,4669,787,3654,940,2821,1343,3591,915,3676,1247,6162,1817,6821,1223,5425,865,3802,1507,3779,1687,4064,994,4930,1346,5923,1336,5890,1034,4680,794,3428,1762,3498,581,2123,707,3571,1309,5019,1526,5809,1264,4998,1191,4129,587,1895,1027,2772,1260,5144,1678,6548,1252,5366,1245,5060,1367,4883,927,2637,1234,3254,1277,5291,1636,6594,1353,5802,1858,6369,1493,4488,1360,3413,2511,4901,1402,5659,1186,5210,1647,5423,2137,6695,2293,5568,3942,5806,3610,5234,3065,8224,4207,10043,4750,10499,5294,10707,6026,9893,8749,9295,1394,3109,938,4218,2445,8159,2434,7575,3210,8296,3942,7946,2302,4411,1741,3975,1907,6657,1611,6017,2255,7715,3519,9106,3021,7322,2857,4774,1456,3282,795,3861,1905,7259,2424,8219,3965,9788,5479,9823,6146,7354,6778,8064,1594,5750,3625,9626,4609,10855,4975,11072,2560,6126,4066,6447,2431,4452,2988,8526,4208,10575,3443,9332,4574,10518,3963,7975,7024,8597,7740,9035,4601,10068,5686,11644,4124,10134,3927,9445,5331,8993,6907,7762,7383,7531,7106,7549,4920,11006,4721,10989,5769,11371,7337,11231,9941,10500,7669,9132,5120,10497,4530,10842,5163,11365,5420,11081,6916,11137,10588,10916,2537,4207,3982,9449,1655,5664,4997,11052,4628,10259,5331,9370,9156,9621,7041,8428,6178,9937,5145,11507,5764,11863,6019,11651,7359,11016,10432,10397,6726,7483,3768,8980,3922,9750,4595,9834,4095,8920,5962,9551,6893,7311,1601,2083,7535,9505,8519,7909,3470,7926,5550,11184,6604,10735,7691,8889,8098,9792,5138,10934,4087,10809,2599,7441,5574,11923,6396,10263,9163,9722,7700,8765,5180,10901,5492,12454,6012,12626,6344,12113,7437,11325,7783,8702,8454,9395,5321,11023,5389,11992,4918,10887,5806,11715,5359,9033,10273,10293,8402,9645,5242,11194,5844,12660,7173,12624,7258,12305,8977,11606,5028,6113,5577,6952,5336,10542,5279,12154,5496,12174,5776,11684,6860,10701,10846,10824,6958,8430,1699,5231,4703,11052,5878,12417,4740,9957,7277,11286,10154,10619,8431,9162,4750,11048,5258,12575,4568,10279,4595,9574,6279,11069,7761,9572,6899,9215,4625,11229,4991,12515,5019,12303,5528,11988,6493,10089,8839,8827,8814,7955,7408,7701,4635,11224,4187,10290,4781,11468,3909,8059,8766,10270,7714,9266,1236,4133,4720,11721,4518,11753,5038,11719,7147,10959,8819,9015,4416,5901,4067,10371,2286,7345,4978,11923,4464,10939,6046,10734,9079,10323,6674,8665,3853,9637,3497,9385,3617,10699,4492,11427,5771,10560,8617,9925,7194,9003,4633,10774,5171,12323,5656,12379,4367,10664,4172,8226,6370,7928,6690,7064,3855,8677,3666,10262,3404,9721,2834,8244,1946,5432,1925,3958,3890,6234,2446,8406,3475,10572,3374,10516,2661,8522,3891,8826,4919,7053,4336,6532,2965,9054,4277,11734,2454,7993,2840,9117,3350,8264,3256,6105,1630,3668,1776,7206,1052,5336,1556,6680,2348,8489,2873,7893,4342,6967,3421,6236,2798,9282,2356,9167,2030,7961,3519,9376,2461,7072,3480,6000,2870,5703,2428,8605,2678,9605,2790,9675,3093,9818,2462,7282,3147,5739,2255,4660,1221,5342,1163,5116,1423,4811,880,1995,768,2235,1079,2722,392,1656,698,4311,801,4720,1236,6248,1940,7639,749,2898,1702,4647,930,3166,1137,5996,875,4723,1297,6234,1718,7341,2132,6965,2013,4617,1182,3091,952,5116,1020,5711,1075,5865,1498,6313,1792,5940,618,1911,1123,3119,690,4059,788,4285,1130,5072,1203,4830,600,2354,874,2265,844,1902,358,781,735,2365,1017,3230,483,2209,737,2645,900,2486,528,1370],"sdev":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}}]}
</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Bike_Share</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./bikeShare.html" aria-current="page"> 
<span class="menu-text">Bike Share</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-layout-custom page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
<!-- main -->

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">BikeShare</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Eric Mossotti </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#filtering-data-smartly" id="toc-filtering-data-smartly">Filtering Data, Smartly</a></li>
  <li><a href="#frequency-tables-and-what-they-tell-us" id="toc-frequency-tables-and-what-they-tell-us">Frequency Tables and What They Tell Us</a></li>
  <li><a href="#data-modeling" id="toc-data-modeling">Data Modeling</a>
  <ul>
  <li><a href="#semi-parametric-and-non-parametric-methods" id="toc-semi-parametric-and-non-parametric-methods"><strong>Semi-parametric and non-parametric</strong> methods</a></li>
  </ul></li>
  </ul>
<div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="repo"><i class="bi bi-link-45deg"></i>Project Repo</a></li></ul></div></nav>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-5">
<section id="case-study-bike-sharing-in-chicago" class="level1">
<h1>Case Study: Bike-Sharing in Chicago</h1>
<section id="objective" class="level2">
<h2 data-anchor-id="objective">Objective:</h2>
<p>Communicate to shareholders data based insights regarding to better inform their desire to enlist more annual subscribers.</p>
</section>
</section>
<section id="first-off-import-and-clean" class="level1">
<h1>First Off, Import and Clean</h1>
<p>I’ve condensed the initial download, import and cleaning steps to reduce the complexity of this Quarto document. Thinking ahead, with reproducibility in mind, this code chunk should cover most use cases for tinkering and testing. I’ve personally found it helpful to reduce the need to re-download files and re-process all over again if all one needs to do is reconnect to the database that has already been written. Choosing a persistent DuckDB database filesystem (as opposed to in-memory) was intentional as I wouldn’t lose the progress I’ve made when tinkering over multiple days. It seems just as fast as the in-memory database but also seems to reduce RAM needed in tinkering.</p>
<p>Overall, I think a locally persistent DuckDB solution was an ideal decision on most levels. Desktops and laptop systems tend to have more long term, non-volatile memory, such as drives available than short-term, volatile memory, such as RAM. It was interesting that the db file is only one file despite how many paths are written using the initial connection. The zero-copy feature, I believe, is why it doesn’t really increase much in size despite writing multiple processed tables, even if they are of similar length to the original. I think that’s because the longer ones contain much of the same data. I’ll have to look more into that later in project updates.</p>
<p>All data was downloaded from <span class="citation" data-cites="divvydab"><span>“Divvy Data”</span> (<a href="#ref-divvydab" role="doc-biblioref">n.d.</a>)</span>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">exists</span>(<span class="st">"dbconn"</span>) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Script to keep this document less cluttered. </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">"import_clean_initial.R"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># you will have to change original_nobs if you use different data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># helps with tinkering when you want to skip the import part</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        original_nobs <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="dv">5719877</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        tblPath <span class="ot">&lt;-</span> <span class="st">"db/data.db"</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        dbconn <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        duckdb<span class="sc">::</span><span class="fu">duckdb</span>(),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">dbdir =</span> tblPath,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">read_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Data import and initial processing script.</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To help organize the quarto project.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This part is messy. </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load external libraries</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"unz_relocate.R"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>durls <span class="ot">&lt;-</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sprintf</span>(<span class="st">"https://divvy-tripdata.s3.amazonaws.com/%d-divvy-tripdata.zip"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="dv">202301</span><span class="sc">:</span><span class="dv">202312</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Need some directories to store the files. </span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">"tempZips"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>tempZipPaths <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"tempZips/%d-divvy-tripdata.zip"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                        <span class="dv">202301</span><span class="sc">:</span><span class="dv">202312</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># A simple way to download and relocate several files. </span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>curl<span class="sc">::</span><span class="fu">multi_download</span>(durls,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>                     <span class="at">destfiles =</span> tempZipPaths)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># create tempFile directory</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">"tempFiles"</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># create list of tempFile directory paths</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>tempfile_paths <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"tempFiles/%d-divvy-tripdata.csv"</span>,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>                          <span class="dv">202301</span><span class="sc">:</span><span class="dv">202312</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># create CSV list to specify for unzipping</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>fileNames <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%d-divvy-tripdata.csv"</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">202301</span><span class="sc">:</span><span class="dv">202312</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co"># review address info that was just created</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co">#tibble::tibble("URLs" = durls,</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co">#               "Zip File Paths" = tempZipPaths,</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co">#               "File Names" = fileNames,</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co">#               "Parquet File Paths" = tempfile_paths)</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="fu">unz_relocate</span>()</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="co"># To remove stored files</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"tempZips"</span>,</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>       <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>tripTibble <span class="ot">&lt;-</span> </span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(tempfile_paths[<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>],</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>               arrow<span class="sc">::</span>read_csv_arrow) <span class="sc">|&gt;</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">list_rbind</span>()</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to save this count for later before I drop the incomplete obs</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>original_nobs <span class="ot">&lt;-</span> <span class="fu">nrow</span>(tripTibble)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>tripTibble <span class="ot">&lt;-</span> tripTibble <span class="sc">|&gt;</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">drop_na</span>()</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="co"># duckDB instead ----</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">"db"</span>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>tblPath <span class="ot">&lt;-</span> <span class="st">"db/data.db"</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Helpful persistent db</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>dbconn <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(),</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>                         <span class="at">dbdir =</span> tblPath,</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>                         <span class="at">read_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>tripTibble <span class="sc">|&gt;</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> tblPath,</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(tripTibble)</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="co"># To make use of supplied trip interval data</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>           tblPath,</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"trip_time"</span> <span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">time_length</span>(</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        lubridate<span class="sc">::</span><span class="fu">interval</span>(started_at,</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>                            ended_at),</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">unit =</span> <span class="st">"minute"</span>), </span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">.keep =</span> <span class="st">"all"</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> tblPath,</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a><span class="co"># all files and folders</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"tempFiles"</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Verifying DuckDB tables:</p>
<div class="cell">
<details class="code-fold">
<summary>Verifying DuckDB tables</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn) <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="hidden-duplicate-observations" class="level2">
<h2 data-anchor-id="hidden-duplicate-observations">Hidden Duplicate Observations?</h2>
<p>Now to go a little deeper, we can check for duplicates. It might not necessarily be the case that each observation (obs) is unique even if all the Rider IDs are, technically, unique.</p>
</section>
</section>
</div>
<div class="g-col-5">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a separate table used to analyze the observations returned as not distinct (n &gt; 1). This adds an extra column labeled "n".</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>dupeTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                        tblPath,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at<span class="sc">:</span>end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Counts of unique rows added for column 'n'</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(started_at,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                     ended_at,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                     start_station_name,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                     end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Only observations that have been duplicated 1 or more</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># times are shown</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We want to see all rows, not just one row for each obs</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>gtDupes <span class="ot">&lt;-</span> dupeTable <span class="sc">|&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">gt</span>(<span class="at">rowname_col =</span> <span class="st">"row"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>           <span class="at">groupname_col =</span> <span class="st">"started_at"</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">row_group_as_column =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">caption =</span> <span class="st">"Duplicates_Table1"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_style</span>(</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>                      <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_borders</span>(<span class="at">sides =</span> <span class="fu">c</span>(<span class="st">"bottom"</span>))</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> gt<span class="sc">::</span><span class="fu">cells_column_labels</span>(gt<span class="sc">::</span><span class="fu">everything</span>())</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_style</span>(</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_borders</span>(<span class="at">sides =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"right"</span>)),</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">"center"</span>,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>                      <span class="at">v_align =</span> <span class="st">"middle"</span>)</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> gt<span class="sc">::</span><span class="fu">cells_body</span>(gt<span class="sc">::</span><span class="fu">everything</span>())</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">data_color</span>(<span class="at">columns =</span> start_station_name,</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>                   <span class="at">target_columns =</span> gt<span class="sc">::</span><span class="fu">everything</span>(),</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>                   <span class="at">method =</span> <span class="st">"auto"</span>,</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>                   <span class="at">palette =</span> <span class="st">"basetheme::brutal"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_source_note</span>(gt<span class="sc">::</span><span class="fu">md</span>(<span class="st">"**Source**: Divvy Data"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Duplicate Observations"</span>,</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>                   <span class="at">subtitle =</span> <span class="st">"(by start date)"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_options</span>(</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">heading.title.font.weight =</span> <span class="st">"bolder"</span>,</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">heading.subtitle.font.weight =</span> <span class="st">"lighter"</span>,</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">table.layout =</span> <span class="st">"auto"</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>gtDupes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="kwgmcnzrgq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kwgmcnzrgq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kwgmcnzrgq thead, #kwgmcnzrgq tbody, #kwgmcnzrgq tfoot, #kwgmcnzrgq tr, #kwgmcnzrgq td, #kwgmcnzrgq th {
  border-style: none;
}

#kwgmcnzrgq p {
  margin: 0;
  padding: 0;
}

#kwgmcnzrgq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kwgmcnzrgq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kwgmcnzrgq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: bolder;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kwgmcnzrgq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: lighter;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kwgmcnzrgq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kwgmcnzrgq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kwgmcnzrgq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kwgmcnzrgq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kwgmcnzrgq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kwgmcnzrgq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kwgmcnzrgq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kwgmcnzrgq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kwgmcnzrgq .gt_spanner_row {
  border-bottom-style: hidden;
}

#kwgmcnzrgq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kwgmcnzrgq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kwgmcnzrgq .gt_from_md > :first-child {
  margin-top: 0;
}

#kwgmcnzrgq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kwgmcnzrgq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kwgmcnzrgq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kwgmcnzrgq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kwgmcnzrgq .gt_row_group_first td {
  border-top-width: 2px;
}

#kwgmcnzrgq .gt_row_group_first th {
  border-top-width: 2px;
}

#kwgmcnzrgq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwgmcnzrgq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kwgmcnzrgq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kwgmcnzrgq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kwgmcnzrgq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwgmcnzrgq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kwgmcnzrgq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kwgmcnzrgq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kwgmcnzrgq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kwgmcnzrgq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kwgmcnzrgq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwgmcnzrgq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kwgmcnzrgq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kwgmcnzrgq .gt_left {
  text-align: left;
}

#kwgmcnzrgq .gt_center {
  text-align: center;
}

#kwgmcnzrgq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kwgmcnzrgq .gt_font_normal {
  font-weight: normal;
}

#kwgmcnzrgq .gt_font_bold {
  font-weight: bold;
}

#kwgmcnzrgq .gt_font_italic {
  font-style: italic;
}

#kwgmcnzrgq .gt_super {
  font-size: 65%;
}

#kwgmcnzrgq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kwgmcnzrgq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kwgmcnzrgq .gt_indent_1 {
  text-indent: 5px;
}

#kwgmcnzrgq .gt_indent_2 {
  text-indent: 10px;
}

#kwgmcnzrgq .gt_indent_3 {
  text-indent: 15px;
}

#kwgmcnzrgq .gt_indent_4 {
  text-indent: 20px;
}

#kwgmcnzrgq .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Duplicates_Table1</caption>
<thead>
<tr class="header gt_heading">
<th colspan="6" class="gt_heading gt_title gt_font_normal">Duplicate Observations</th>
</tr>
<tr class="odd gt_heading">
<th colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">(by start date)</th>
</tr>
<tr class="header gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="ended_at" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;" scope="col">ended_at</th>
<th id="start_station_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;" scope="col">start_station_name</th>
<th id="start_station_id" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;" scope="col">start_station_id</th>
<th id="end_station_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;" scope="col">end_station_name</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;" scope="col">n</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-02-19 12:10:52 stub_1_1 stub_1">2023-02-19 12:10:52</td>
<td class="gt_row gt_right" headers="2023-02-19 12:10:52 stub_1_1 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">2023-02-19 12:24:04</td>
<td class="gt_row gt_left" headers="2023-02-19 12:10:52 stub_1_1 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">Orleans St &amp; Merchandise Mart Plaza</td>
<td class="gt_row gt_left" headers="2023-02-19 12:10:52 stub_1_1 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">TA1305000022</td>
<td class="gt_row gt_left" headers="2023-02-19 12:10:52 stub_1_1 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">Green St &amp; Randolph St*</td>
<td class="gt_row gt_right" headers="2023-02-19 12:10:52 stub_1_1 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-02-19 12:10:52 ended_at_2 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">2023-02-19 12:24:04</td>
<td class="gt_row gt_left" headers="2023-02-19 12:10:52 ended_at_2 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">Orleans St &amp; Merchandise Mart Plaza</td>
<td class="gt_row gt_left" headers="2023-02-19 12:10:52 ended_at_2 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">TA1305000022</td>
<td class="gt_row gt_left" headers="2023-02-19 12:10:52 ended_at_2 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">Green St &amp; Randolph St*</td>
<td class="gt_row gt_right" headers="2023-02-19 12:10:52 ended_at_2 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #C8A0B1;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-04-15 15:56:18 stub_1_3 stub_1">2023-04-15 15:56:18</td>
<td class="gt_row gt_right" headers="2023-04-15 15:56:18 stub_1_3 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">2023-04-15 16:01:54</td>
<td class="gt_row gt_left" headers="2023-04-15 15:56:18 stub_1_3 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">Kedzie Ave &amp; 45th St</td>
<td class="gt_row gt_left" headers="2023-04-15 15:56:18 stub_1_3 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">342</td>
<td class="gt_row gt_left" headers="2023-04-15 15:56:18 stub_1_3 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">Fairfield Ave &amp; 44th St</td>
<td class="gt_row gt_right" headers="2023-04-15 15:56:18 stub_1_3 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-04-15 15:56:18 ended_at_4 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">2023-04-15 16:01:54</td>
<td class="gt_row gt_left" headers="2023-04-15 15:56:18 ended_at_4 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">Kedzie Ave &amp; 45th St</td>
<td class="gt_row gt_left" headers="2023-04-15 15:56:18 ended_at_4 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">342</td>
<td class="gt_row gt_left" headers="2023-04-15 15:56:18 ended_at_4 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">Fairfield Ave &amp; 44th St</td>
<td class="gt_row gt_right" headers="2023-04-15 15:56:18 ended_at_4 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B77331;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-04-21 09:45:26 stub_1_5 stub_1">2023-04-21 09:45:26</td>
<td class="gt_row gt_right" headers="2023-04-21 09:45:26 stub_1_5 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">2023-04-21 10:01:23</td>
<td class="gt_row gt_left" headers="2023-04-21 09:45:26 stub_1_5 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">Michigan Ave &amp; 8th St</td>
<td class="gt_row gt_left" headers="2023-04-21 09:45:26 stub_1_5 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">623</td>
<td class="gt_row gt_left" headers="2023-04-21 09:45:26 stub_1_5 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">Wentworth Ave &amp; Cermak Rd*</td>
<td class="gt_row gt_right" headers="2023-04-21 09:45:26 stub_1_5 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-04-21 09:45:26 ended_at_6 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">2023-04-21 10:01:23</td>
<td class="gt_row gt_left" headers="2023-04-21 09:45:26 ended_at_6 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">Michigan Ave &amp; 8th St</td>
<td class="gt_row gt_left" headers="2023-04-21 09:45:26 ended_at_6 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">623</td>
<td class="gt_row gt_left" headers="2023-04-21 09:45:26 ended_at_6 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">Wentworth Ave &amp; Cermak Rd*</td>
<td class="gt_row gt_right" headers="2023-04-21 09:45:26 ended_at_6 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #B0BA81;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-08 18:22:07 stub_1_7 stub_1">2023-07-08 18:22:07</td>
<td class="gt_row gt_right" headers="2023-07-08 18:22:07 stub_1_7 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">2023-07-08 18:37:31</td>
<td class="gt_row gt_left" headers="2023-07-08 18:22:07 stub_1_7 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">Milwaukee Ave &amp; Grand Ave</td>
<td class="gt_row gt_left" headers="2023-07-08 18:22:07 stub_1_7 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">13033</td>
<td class="gt_row gt_left" headers="2023-07-08 18:22:07 stub_1_7 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-07-08 18:22:07 stub_1_7 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-08 18:22:07 ended_at_8 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">2023-07-08 18:37:31</td>
<td class="gt_row gt_left" headers="2023-07-08 18:22:07 ended_at_8 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">Milwaukee Ave &amp; Grand Ave</td>
<td class="gt_row gt_left" headers="2023-07-08 18:22:07 ended_at_8 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">13033</td>
<td class="gt_row gt_left" headers="2023-07-08 18:22:07 ended_at_8 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-07-08 18:22:07 ended_at_8 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #85BEAD;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-08 18:58:14 stub_1_9 stub_1">2023-07-08 18:58:14</td>
<td class="gt_row gt_right" headers="2023-07-08 18:58:14 stub_1_9 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">2023-07-08 19:08:47</td>
<td class="gt_row gt_left" headers="2023-07-08 18:58:14 stub_1_9 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">Clark St &amp; Schiller St</td>
<td class="gt_row gt_left" headers="2023-07-08 18:58:14 stub_1_9 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">TA1309000024</td>
<td class="gt_row gt_left" headers="2023-07-08 18:58:14 stub_1_9 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-07-08 18:58:14 stub_1_9 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-08 18:58:14 ended_at_10 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">2023-07-08 19:08:47</td>
<td class="gt_row gt_left" headers="2023-07-08 18:58:14 ended_at_10 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">Clark St &amp; Schiller St</td>
<td class="gt_row gt_left" headers="2023-07-08 18:58:14 ended_at_10 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">TA1309000024</td>
<td class="gt_row gt_left" headers="2023-07-08 18:58:14 ended_at_10 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-07-08 18:58:14 ended_at_10 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #E1BD30;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-09 18:00:17 stub_1_11 stub_1">2023-07-09 18:00:17</td>
<td class="gt_row gt_right" headers="2023-07-09 18:00:17 stub_1_11 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">2023-07-09 18:40:49</td>
<td class="gt_row gt_left" headers="2023-07-09 18:00:17 stub_1_11 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">Wells St &amp; Hubbard St</td>
<td class="gt_row gt_left" headers="2023-07-09 18:00:17 stub_1_11 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">TA1307000151</td>
<td class="gt_row gt_left" headers="2023-07-09 18:00:17 stub_1_11 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">Fort Dearborn Dr &amp; 31st St*</td>
<td class="gt_row gt_right" headers="2023-07-09 18:00:17 stub_1_11 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-09 18:00:17 ended_at_12 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">2023-07-09 18:40:49</td>
<td class="gt_row gt_left" headers="2023-07-09 18:00:17 ended_at_12 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">Wells St &amp; Hubbard St</td>
<td class="gt_row gt_left" headers="2023-07-09 18:00:17 ended_at_12 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">TA1307000151</td>
<td class="gt_row gt_left" headers="2023-07-09 18:00:17 ended_at_12 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">Fort Dearborn Dr &amp; 31st St*</td>
<td class="gt_row gt_right" headers="2023-07-09 18:00:17 ended_at_12 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #FCA3B7;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-10 20:10:41 stub_1_13 stub_1">2023-07-10 20:10:41</td>
<td class="gt_row gt_right" headers="2023-07-10 20:10:41 stub_1_13 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">2023-07-10 20:19:59</td>
<td class="gt_row gt_left" headers="2023-07-10 20:10:41 stub_1_13 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">Clark St &amp; Newport St</td>
<td class="gt_row gt_left" headers="2023-07-10 20:10:41 stub_1_13 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">632</td>
<td class="gt_row gt_left" headers="2023-07-10 20:10:41 stub_1_13 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">Lincoln Ave &amp; Roscoe St*</td>
<td class="gt_row gt_right" headers="2023-07-10 20:10:41 stub_1_13 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-10 20:10:41 ended_at_14 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">2023-07-10 20:19:59</td>
<td class="gt_row gt_left" headers="2023-07-10 20:10:41 ended_at_14 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">Clark St &amp; Newport St</td>
<td class="gt_row gt_left" headers="2023-07-10 20:10:41 ended_at_14 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">632</td>
<td class="gt_row gt_left" headers="2023-07-10 20:10:41 ended_at_14 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">Lincoln Ave &amp; Roscoe St*</td>
<td class="gt_row gt_right" headers="2023-07-10 20:10:41 ended_at_14 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #CB7E5E;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-15 10:48:09 stub_1_15 stub_1">2023-07-15 10:48:09</td>
<td class="gt_row gt_right" headers="2023-07-15 10:48:09 stub_1_15 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">2023-07-15 10:58:22</td>
<td class="gt_row gt_left" headers="2023-07-15 10:48:09 stub_1_15 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">Racine Ave &amp; Wrightwood Ave</td>
<td class="gt_row gt_left" headers="2023-07-15 10:48:09 stub_1_15 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">TA1309000059</td>
<td class="gt_row gt_left" headers="2023-07-15 10:48:09 stub_1_15 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-07-15 10:48:09 stub_1_15 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-15 10:48:09 ended_at_16 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">2023-07-15 10:58:22</td>
<td class="gt_row gt_left" headers="2023-07-15 10:48:09 ended_at_16 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">Racine Ave &amp; Wrightwood Ave</td>
<td class="gt_row gt_left" headers="2023-07-15 10:48:09 ended_at_16 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">TA1309000059</td>
<td class="gt_row gt_left" headers="2023-07-15 10:48:09 ended_at_16 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-07-15 10:48:09 ended_at_16 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #A5EB9D;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-15 19:38:51 stub_1_17 stub_1">2023-07-15 19:38:51</td>
<td class="gt_row gt_right" headers="2023-07-15 19:38:51 stub_1_17 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">2023-07-15 19:55:04</td>
<td class="gt_row gt_left" headers="2023-07-15 19:38:51 stub_1_17 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">Avondale Ave &amp; Irving Park Rd</td>
<td class="gt_row gt_left" headers="2023-07-15 19:38:51 stub_1_17 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">15624</td>
<td class="gt_row gt_left" headers="2023-07-15 19:38:51 stub_1_17 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">Public Rack - Hamlin Ave &amp; Fullerton Ave</td>
<td class="gt_row gt_right" headers="2023-07-15 19:38:51 stub_1_17 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-15 19:38:51 ended_at_18 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">2023-07-15 19:55:04</td>
<td class="gt_row gt_left" headers="2023-07-15 19:38:51 ended_at_18 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">Avondale Ave &amp; Irving Park Rd</td>
<td class="gt_row gt_left" headers="2023-07-15 19:38:51 ended_at_18 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">15624</td>
<td class="gt_row gt_left" headers="2023-07-15 19:38:51 ended_at_18 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">Public Rack - Hamlin Ave &amp; Fullerton Ave</td>
<td class="gt_row gt_right" headers="2023-07-15 19:38:51 ended_at_18 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #5E81AC;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-23 11:41:36 stub_1_19 stub_1">2023-07-23 11:41:36</td>
<td class="gt_row gt_right" headers="2023-07-23 11:41:36 stub_1_19 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2023-07-23 12:07:13</td>
<td class="gt_row gt_left" headers="2023-07-23 11:41:36 stub_1_19 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Burnham Harbor</td>
<td class="gt_row gt_left" headers="2023-07-23 11:41:36 stub_1_19 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">15545</td>
<td class="gt_row gt_left" headers="2023-07-23 11:41:36 stub_1_19 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Fort Dearborn Dr &amp; 31st St*</td>
<td class="gt_row gt_right" headers="2023-07-23 11:41:36 stub_1_19 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-23 11:41:36 ended_at_20 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2023-07-23 12:07:13</td>
<td class="gt_row gt_left" headers="2023-07-23 11:41:36 ended_at_20 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Burnham Harbor</td>
<td class="gt_row gt_left" headers="2023-07-23 11:41:36 ended_at_20 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">15545</td>
<td class="gt_row gt_left" headers="2023-07-23 11:41:36 ended_at_20 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Fort Dearborn Dr &amp; 31st St*</td>
<td class="gt_row gt_right" headers="2023-07-23 11:41:36 ended_at_20 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-25 18:08:47 stub_1_21 stub_1">2023-07-25 18:08:47</td>
<td class="gt_row gt_right" headers="2023-07-25 18:08:47 stub_1_21 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">2023-07-25 18:21:45</td>
<td class="gt_row gt_left" headers="2023-07-25 18:08:47 stub_1_21 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">Wabash Ave &amp; Roosevelt Rd</td>
<td class="gt_row gt_left" headers="2023-07-25 18:08:47 stub_1_21 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">TA1305000002</td>
<td class="gt_row gt_left" headers="2023-07-25 18:08:47 stub_1_21 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">Wentworth Ave &amp; Cermak Rd*</td>
<td class="gt_row gt_right" headers="2023-07-25 18:08:47 stub_1_21 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-25 18:08:47 ended_at_22 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">2023-07-25 18:21:45</td>
<td class="gt_row gt_left" headers="2023-07-25 18:08:47 ended_at_22 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">Wabash Ave &amp; Roosevelt Rd</td>
<td class="gt_row gt_left" headers="2023-07-25 18:08:47 ended_at_22 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">TA1305000002</td>
<td class="gt_row gt_left" headers="2023-07-25 18:08:47 ended_at_22 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">Wentworth Ave &amp; Cermak Rd*</td>
<td class="gt_row gt_right" headers="2023-07-25 18:08:47 ended_at_22 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #CED8A7;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-07-26 21:10:55 stub_1_23 stub_1">2023-07-26 21:10:55</td>
<td class="gt_row gt_right" headers="2023-07-26 21:10:55 stub_1_23 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2023-07-26 21:28:44</td>
<td class="gt_row gt_left" headers="2023-07-26 21:10:55 stub_1_23 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Burnham Harbor</td>
<td class="gt_row gt_left" headers="2023-07-26 21:10:55 stub_1_23 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">15545</td>
<td class="gt_row gt_left" headers="2023-07-26 21:10:55 stub_1_23 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Fort Dearborn Dr &amp; 31st St*</td>
<td class="gt_row gt_right" headers="2023-07-26 21:10:55 stub_1_23 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-07-26 21:10:55 ended_at_24 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2023-07-26 21:28:44</td>
<td class="gt_row gt_left" headers="2023-07-26 21:10:55 ended_at_24 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Burnham Harbor</td>
<td class="gt_row gt_left" headers="2023-07-26 21:10:55 ended_at_24 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">15545</td>
<td class="gt_row gt_left" headers="2023-07-26 21:10:55 ended_at_24 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">Fort Dearborn Dr &amp; 31st St*</td>
<td class="gt_row gt_right" headers="2023-07-26 21:10:55 ended_at_24 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #97A078;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-08-05 19:40:37 stub_1_25 stub_1">2023-08-05 19:40:37</td>
<td class="gt_row gt_right" headers="2023-08-05 19:40:37 stub_1_25 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">2023-08-05 20:08:35</td>
<td class="gt_row gt_left" headers="2023-08-05 19:40:37 stub_1_25 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">Morgan St &amp; Lake St*</td>
<td class="gt_row gt_left" headers="2023-08-05 19:40:37 stub_1_25 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">chargingstx4</td>
<td class="gt_row gt_left" headers="2023-08-05 19:40:37 stub_1_25 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">Morgan St &amp; Lake St*</td>
<td class="gt_row gt_right" headers="2023-08-05 19:40:37 stub_1_25 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-08-05 19:40:37 ended_at_26 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">2023-08-05 20:08:35</td>
<td class="gt_row gt_left" headers="2023-08-05 19:40:37 ended_at_26 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">Morgan St &amp; Lake St*</td>
<td class="gt_row gt_left" headers="2023-08-05 19:40:37 ended_at_26 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">chargingstx4</td>
<td class="gt_row gt_left" headers="2023-08-05 19:40:37 ended_at_26 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">Morgan St &amp; Lake St*</td>
<td class="gt_row gt_right" headers="2023-08-05 19:40:37 ended_at_26 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BE8CB6;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-08-12 17:46:53 stub_1_27 stub_1">2023-08-12 17:46:53</td>
<td class="gt_row gt_right" headers="2023-08-12 17:46:53 stub_1_27 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">2023-08-12 17:57:40</td>
<td class="gt_row gt_left" headers="2023-08-12 17:46:53 stub_1_27 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">Calumet Ave &amp; 18th St</td>
<td class="gt_row gt_left" headers="2023-08-12 17:46:53 stub_1_27 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">13102</td>
<td class="gt_row gt_left" headers="2023-08-12 17:46:53 stub_1_27 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">Wentworth Ave &amp; Cermak Rd*</td>
<td class="gt_row gt_right" headers="2023-08-12 17:46:53 stub_1_27 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-08-12 17:46:53 ended_at_28 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">2023-08-12 17:57:40</td>
<td class="gt_row gt_left" headers="2023-08-12 17:46:53 ended_at_28 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">Calumet Ave &amp; 18th St</td>
<td class="gt_row gt_left" headers="2023-08-12 17:46:53 ended_at_28 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">13102</td>
<td class="gt_row gt_left" headers="2023-08-12 17:46:53 ended_at_28 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">Wentworth Ave &amp; Cermak Rd*</td>
<td class="gt_row gt_right" headers="2023-08-12 17:46:53 ended_at_28 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #B37A6F;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-08-17 12:23:50 stub_1_29 stub_1">2023-08-17 12:23:50</td>
<td class="gt_row gt_right" headers="2023-08-17 12:23:50 stub_1_29 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">2023-08-17 12:37:45</td>
<td class="gt_row gt_left" headers="2023-08-17 12:23:50 stub_1_29 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">DuSable Lake Shore Dr &amp; Monroe St</td>
<td class="gt_row gt_left" headers="2023-08-17 12:23:50 stub_1_29 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">13300</td>
<td class="gt_row gt_left" headers="2023-08-17 12:23:50 stub_1_29 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">Streeter Dr &amp; Grand Ave</td>
<td class="gt_row gt_right" headers="2023-08-17 12:23:50 stub_1_29 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-08-17 12:23:50 ended_at_30 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">2023-08-17 12:37:45</td>
<td class="gt_row gt_left" headers="2023-08-17 12:23:50 ended_at_30 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">DuSable Lake Shore Dr &amp; Monroe St</td>
<td class="gt_row gt_left" headers="2023-08-17 12:23:50 ended_at_30 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">13300</td>
<td class="gt_row gt_left" headers="2023-08-17 12:23:50 ended_at_30 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">Streeter Dr &amp; Grand Ave</td>
<td class="gt_row gt_right" headers="2023-08-17 12:23:50 ended_at_30 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #BFA021;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-09-03 14:55:59 stub_1_31 stub_1">2023-09-03 14:55:59</td>
<td class="gt_row gt_right" headers="2023-09-03 14:55:59 stub_1_31 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">2023-09-03 15:58:21</td>
<td class="gt_row gt_left" headers="2023-09-03 14:55:59 stub_1_31 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_left" headers="2023-09-03 14:55:59 stub_1_31 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">chargingstx1</td>
<td class="gt_row gt_left" headers="2023-09-03 14:55:59 stub_1_31 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-09-03 14:55:59 stub_1_31 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-09-03 14:55:59 ended_at_32 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">2023-09-03 15:58:21</td>
<td class="gt_row gt_left" headers="2023-09-03 14:55:59 ended_at_32 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_left" headers="2023-09-03 14:55:59 ended_at_32 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">chargingstx1</td>
<td class="gt_row gt_left" headers="2023-09-03 14:55:59 ended_at_32 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">Bissell St &amp; Armitage Ave*</td>
<td class="gt_row gt_right" headers="2023-09-03 14:55:59 ended_at_32 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #7E9791;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-09-25 17:38:05 stub_1_33 stub_1">2023-09-25 17:38:05</td>
<td class="gt_row gt_right" headers="2023-09-25 17:38:05 stub_1_33 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">2023-09-25 17:52:29</td>
<td class="gt_row gt_left" headers="2023-09-25 17:38:05 stub_1_33 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">Fairbanks Ct &amp; Grand Ave</td>
<td class="gt_row gt_left" headers="2023-09-25 17:38:05 stub_1_33 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">TA1305000003</td>
<td class="gt_row gt_left" headers="2023-09-25 17:38:05 stub_1_33 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">DuSable Lake Shore Dr &amp; North Blvd</td>
<td class="gt_row gt_right" headers="2023-09-25 17:38:05 stub_1_33 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-09-25 17:38:05 ended_at_34 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">2023-09-25 17:52:29</td>
<td class="gt_row gt_left" headers="2023-09-25 17:38:05 ended_at_34 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">Fairbanks Ct &amp; Grand Ave</td>
<td class="gt_row gt_left" headers="2023-09-25 17:38:05 ended_at_34 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">TA1305000003</td>
<td class="gt_row gt_left" headers="2023-09-25 17:38:05 ended_at_34 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">DuSable Lake Shore Dr &amp; North Blvd</td>
<td class="gt_row gt_right" headers="2023-09-25 17:38:05 ended_at_34 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #FFFFFF; background-color: #835A29;">2</td>
</tr>
<tr class="odd gt_row_group_first">
<td rowspan="2" class="gt_row gt_left gt_stub_row_group" headers="2023-10-10 13:22:51 stub_1_35 stub_1">2023-10-10 13:22:51</td>
<td class="gt_row gt_right" headers="2023-10-10 13:22:51 stub_1_35 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">2023-10-10 13:29:37</td>
<td class="gt_row gt_left" headers="2023-10-10 13:22:51 stub_1_35 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">Loomis St &amp; Lexington St</td>
<td class="gt_row gt_left" headers="2023-10-10 13:22:51 stub_1_35 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">13332</td>
<td class="gt_row gt_left" headers="2023-10-10 13:22:51 stub_1_35 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">Morgan St &amp; Polk St</td>
<td class="gt_row gt_right" headers="2023-10-10 13:22:51 stub_1_35 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="2023-10-10 13:22:51 ended_at_36 ended_at" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">2023-10-10 13:29:37</td>
<td class="gt_row gt_left" headers="2023-10-10 13:22:51 ended_at_36 start_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">Loomis St &amp; Lexington St</td>
<td class="gt_row gt_left" headers="2023-10-10 13:22:51 ended_at_36 start_station_id" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">13332</td>
<td class="gt_row gt_left" headers="2023-10-10 13:22:51 ended_at_36 end_station_name" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">Morgan St &amp; Polk St</td>
<td class="gt_row gt_right" headers="2023-10-10 13:22:51 ended_at_36 n" style="text-align: center; border-left-width: 1px; border-left-style: solid; border-left-color: #000000; border-right-width: 1px; border-right-style: solid; border-right-color: #000000; vertical-align: middle; color: #000000; background-color: #EE9940;">2</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="odd">
<td colspan="6" class="gt_sourcenote"><strong>Source</strong>: Divvy Data</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
<div class="g-col-1">

</div>
</div>
<p>Of the other columns, it seems that the start_time, end_time, start_station, and end_station could show if there are possibly hidden duplicated observations.</p>
<p>We started with 5,719,877 observations (obs) for dates spanning January to December, 2023, then removed 1,388,170 incomplete obs.</p>
<p>I assumed that having the same times/dates and stations for two different ride IDs was a mistake. Although, I do not know how that error would happen. I could have assumed one person could check out multiple bikes at once. In that instance, each bike could be assigned a unique ride_id. That, however, has only happened 18 times over a year. Since it’s only one copy every time, that also raises a red flag. I did not notice any other correlations with station_id/name, member_casual, or ride_type for those particular duplicated data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>distinctCopiesCount <span class="ot">&lt;-</span> dupeTable <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>() </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>duplicateObs <span class="ot">&lt;-</span> <span class="fu">length</span>(dupeTable[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>By applying distinct() on dupeTable, we see the only distinct value is 2. We can safely conclude that, of the duplicates, each has a minimum and maximum of 1 extra copy.</p>
<p>Number of rows in the dupeTable is 36. Because each duplicated observation has one duplicate (n = 2), expected removed nobs is 18. The issue is that we need to get rid of not all 36 rows, but just the 1 extra duplicate observation from each, resulting in the expected 18.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'create un-duped table, count rows'</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The issue is, we need to get rid of not all of these rows, but just the extra duplicate observations. </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># If there were 2 rows of duplicates, we would want to end up with 1 row after removing the extras.</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>undupedTable <span class="ot">&lt;-</span> dupeTable <span class="sc">|&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(started_at,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                     start_station_name,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>                     ended_at,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                     end_station_name,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>distinctUndupedCounts <span class="ot">&lt;-</span> undupedTable <span class="sc">|&gt;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>()</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>undupedTable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 6
   started_at          ended_at            start_station_name   start_station_id
   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;                &lt;chr&gt;           
 1 2023-02-19 12:10:52 2023-02-19 12:24:04 Orleans St &amp; Mercha… TA1305000022    
 2 2023-04-15 15:56:18 2023-04-15 16:01:54 Kedzie Ave &amp; 45th St 342             
 3 2023-04-21 09:45:26 2023-04-21 10:01:23 Michigan Ave &amp; 8th … 623             
 4 2023-07-08 18:22:07 2023-07-08 18:37:31 Milwaukee Ave &amp; Gra… 13033           
 5 2023-07-08 18:58:14 2023-07-08 19:08:47 Clark St &amp; Schiller… TA1309000024    
 6 2023-07-09 18:00:17 2023-07-09 18:40:49 Wells St &amp; Hubbard … TA1307000151    
 7 2023-07-10 20:10:41 2023-07-10 20:19:59 Clark St &amp; Newport … 632             
 8 2023-07-15 10:48:09 2023-07-15 10:58:22 Racine Ave &amp; Wright… TA1309000059    
 9 2023-07-15 19:38:51 2023-07-15 19:55:04 Avondale Ave &amp; Irvi… 15624           
10 2023-07-23 11:41:36 2023-07-23 12:07:13 Burnham Harbor       15545           
11 2023-07-25 18:08:47 2023-07-25 18:21:45 Wabash Ave &amp; Roosev… TA1305000002    
12 2023-07-26 21:10:55 2023-07-26 21:28:44 Burnham Harbor       15545           
13 2023-08-05 19:40:37 2023-08-05 20:08:35 Morgan St &amp; Lake St* chargingstx4    
14 2023-08-12 17:46:53 2023-08-12 17:57:40 Calumet Ave &amp; 18th … 13102           
15 2023-08-17 12:23:50 2023-08-17 12:37:45 DuSable Lake Shore … 13300           
16 2023-09-03 14:55:59 2023-09-03 15:58:21 Bissell St &amp; Armita… chargingstx1    
17 2023-09-25 17:38:05 2023-09-25 17:52:29 Fairbanks Ct &amp; Gran… TA1305000003    
18 2023-10-10 13:22:51 2023-10-10 13:29:37 Loomis St &amp; Lexingt… 13332           
# ℹ 2 more variables: end_station_name &lt;chr&gt;, n &lt;dbl&gt;</code></pre>
</div>
</div>
<p>The count of observed distinct values for the un-duplicated table was indeed 18. So now, it is time to run a count of how rows/observations are in the dataset. There is a difference, though, concerning the correct amount:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'incorrect/correct distinct observations'</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Run an incorrect count on how many rows or observations there are in the dataset.</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>count_incorrectDists <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                                tblPath,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(dplyr<span class="sc">::</span><span class="fu">pick</span>(<span class="st">"ride_id"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>(<span class="at">name =</span> <span class="st">"Incorrect Distinct Observations"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>()</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># For the correct count of obs</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>count_correctDists <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                              tblPath,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                              <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">pick</span>(</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"started_at"</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"start_station_name"</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"ended_at"</span>,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"end_station_name"</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell column-body-outset fig-cap-location-margin">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" data-cap-location="margin"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To visualize a summary of what we just determined regarding obs</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span><span class="st">""</span>,<span class="sc">~</span><span class="st">"Counts"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Original observations"</span>, original_nobs,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Observations with duplicates"</span>, count_incorrectDists,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Duplicate observations removed"</span>, </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    (count_incorrectDists <span class="sc">-</span> count_correctDists),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Corrected observations"</span>, count_correctDists</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre data-cap-location="margin"><code># A tibble: 4 × 2
  ``                              Counts
  &lt;chr&gt;                            &lt;int&gt;
1 Original observations          5719877
2 Observations with duplicates   4331707
3 Duplicate observations removed      18
4 Corrected observations         4331689</code></pre>
</div>
</div>
<p>The incorrect number of observations (nobs) was 4,331,707. The correct nobs after removing duplicated obs was 4,331,689. In short, 18 additional obs were removed.</p>
<div class="cell column-body-outset">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>           tblPath,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(ride_id<span class="sc">:</span>trip_time) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(started_at,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                    start_station_name,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                    ended_at,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                    end_station_name,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> tblPath,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>           tblPath) <span class="sc">|&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [6 x 14]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
  ride_id          rideable_type started_at          ended_at           
  &lt;chr&gt;            &lt;chr&gt;         &lt;dttm&gt;              &lt;dttm&gt;             
1 D8EEE72183269F07 classic_bike  2023-01-01 00:02:06 2023-01-01 00:29:46
2 E5AD797A579842F8 electric_bike 2023-01-01 00:03:26 2023-01-01 00:07:23
3 8FBD2AD70B0F6A6F classic_bike  2023-01-01 00:04:07 2023-01-01 00:13:56
4 B05BD052B9EBB767 electric_bike 2023-01-01 00:04:27 2023-01-01 00:16:52
5 F9EA7B9E6C243CFC classic_bike  2023-01-01 00:04:54 2023-01-01 00:31:52
6 27C2A67184C49D01 electric_bike 2023-01-01 00:05:43 2023-01-01 00:21:37
# ℹ 10 more variables: start_station_name &lt;chr&gt;, start_station_id &lt;chr&gt;,
#   end_station_name &lt;chr&gt;, end_station_id &lt;chr&gt;, start_lat &lt;dbl&gt;,
#   start_lng &lt;dbl&gt;, end_lat &lt;dbl&gt;, end_lng &lt;dbl&gt;, member_casual &lt;chr&gt;,
#   trip_time &lt;dbl&gt;</code></pre>
</div>
</div>
<section id="filtering-data-smartly" class="level2">
<h2 data-anchor-id="filtering-data-smartly">Filtering Data, Smartly</h2>
<p>To ensure the conclusions are accurate, outliers should be filtered. Negative and very low trip times might skew trends. The underlying reason for very low trip times is somewhat of an unknown. Perhaps people often change their minds?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># So you don't have to re-download or re-filter everything after making further adjustments.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>tblPath <span class="ot">&lt;-</span> <span class="st">"db/data.db"</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>tblPath_fltrd <span class="ot">&lt;-</span> <span class="st">"db/data_fltrd.db"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">exists</span>(<span class="st">"dbconn"</span>) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    dbconn <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">dbdir =</span> tblPath,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">read_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (duckdb<span class="sc">::</span><span class="fu">dbExistsTable</span>(dbconn,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"tblPath_fltrd"</span>) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">"filterDatabase.R"</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filterDatabase</span>()</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co"># To verify the new filtered table exists.</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "db/data.db"       "db/data_fltrd.db"</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|eval: FALSE</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If you need to drop any tables</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"duckDrops.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Remove which tables? (separate by comma)</code></pre>
</div>
</div>
<p>So this should have removed the major, potentially, non-natural outliers from the dataset which are due to errors (including user errors).</p>
<p>Verify the tables that now exist:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "db/data.db"       "db/data_fltrd.db"</code></pre>
</div>
</div>
</section>
<section id="frequency-tables-and-what-they-tell-us" class="level1">
<h1>Frequency Tables and What They Tell Us</h1>
<p>Now we’re going to create dimension and frequency tables and add those to our database. We can retain the outliers in those tables and perhaps filter as needed later. This is a good place start. If needed, we can dive deeper into other statistical techniques or adjust parameters in these code chunks and overwrite or create new db tables.</p>
<p>By generating frequency tables, I quickly glean insights from the data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Member_casual</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(member_casual) <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(member_casual) <span class="sc">|&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_member.db"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_member.db"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_member.db"&gt; [2 x 2]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
  member_casual       n
  &lt;chr&gt;           &lt;dbl&gt;
1 casual        1260621
2 member        2636777</code></pre>
</div>
</div>
<p>This indicates that there are nearly twice as many trips taken by annual subscribers than by casual users. So, it would seem that there is some correlation between how often a person uses the service and whether they choose to subscribe to an annual membership plan.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rideable_type </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(rideable_type) <span class="sc">|&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(rideable_type) <span class="sc">|&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_rTypes.db"</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_rTypes.db"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_rTypes.db"&gt; [2 x 2]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
  rideable_type       n
  &lt;chr&gt;           &lt;dbl&gt;
1 classic_bike  2453725
2 electric_bike 1443673</code></pre>
</div>
</div>
<p>This tells us that there are nearly twice as many trips taken with non-electric bikes as electric bikes. There are differences in cost for casual members, so that might be one determining factor. Also, perhaps the associated health benefits with exercise would help explain higher non-electric bicycle use.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "db/data.db"        "db/data_fltrd.db"  "db/freq_member.db"
[4] "db/freq_rTypes.db"</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Miles</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(miles) <span class="sc">|&gt;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">miles =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(miles <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="fu">round</span>(miles,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                                                              <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>                                           miles <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="fu">round</span>(<span class="fu">signif</span>(miles, <span class="dv">3</span>),</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                                                             <span class="at">digits =</span> <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(miles) <span class="sc">|&gt;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(miles) <span class="sc">|&gt;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_miles.db"</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_miles.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:     SQL [10 x 2]
# Database:   DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
# Ordered by: desc(n)
   miles      n
   &lt;dbl&gt;  &lt;int&gt;
 1   1   867678
 2   2   720842
 3   3   292483
 4   0.6 288164
 5   0.5 280367
 6   0.8 262418
 7   0.7 250369
 8   0.9 227646
 9   0.4 225723
10   0.3 178150</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_miles.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n =</span> n<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"Trips (in thousands)"</span> <span class="ot">=</span> n,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Miles"</span> <span class="ot">=</span> miles) <span class="sc">|&gt;</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="bikeShare_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This shows that around 0.3 to 3 miles is the distance traveled on most trips taken. The fact that casual bicycles are used more often perhaps makes a little more sense given that people are not traveling long distances.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "db/data.db"        "db/data_fltrd.db"  "db/freq_member.db"
[4] "db/freq_miles.db"  "db/freq_rTypes.db"</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MPH</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(mph) <span class="sc">|&gt;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">mph =</span> <span class="fu">round</span>(mph, <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(mph) <span class="sc">|&gt;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(mph) <span class="sc">|&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_mph.db"</span>,</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_mph.db"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_mph.db"&gt; [?? x 2]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
     mph      n
   &lt;dbl&gt;  &lt;dbl&gt;
 1     1  45485
 2     2 106779
 3     3 161520
 4     4 278819
 5     5 460475
 6     6 622275
 7     7 647253
 8     8 546353
 9     9 399237
10    10 265438
# ℹ more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_mph.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="bikeShare_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The most common overall mph for trips fall in between 2-11 mph. This is what we might expect for city travel.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "db/data.db"        "db/data_fltrd.db"  "db/freq_member.db"
[4] "db/freq_miles.db"  "db/freq_mph.db"    "db/freq_rTypes.db"</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># WkDay</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">wkday =</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(wkday) <span class="sc">|&gt;</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(wkday) <span class="sc">|&gt;</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">wkday =</span> <span class="fu">c</span>(<span class="st">"Sun"</span>,</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Mon"</span>,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Tue"</span>,</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Wed"</span>,</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Thu"</span>,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Fri"</span>,</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Sat"</span>),</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">wkday =</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(wkday),</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">wkday =</span> forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(wkday)) <span class="sc">|&gt;</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_wkDay.db"</span>,</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_wkday.db"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_wkday.db"&gt; [7 x 2]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
  wkday      n
  &lt;fct&gt;  &lt;dbl&gt;
1 Sun   486275
2 Mon   507355
3 Tue   578095
4 Wed   585266
5 Thu   597363
6 Fri   566008
7 Sat   577036</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_wkday.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="bikeShare_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There is a slight reduction in trips taken on Sundays and Mondays. This could be explained by the fact that most trips are taken by annual subscribers, possibly because they are biking to work and such. Much less people will be biking to work on Sundays. Taking 3-day weekends is common in the workplace, where most would likely opt to use up their sick/vacation days on Monday, which might explain the down tick in trips taken on Mondays. Also, those who are working Tuesdays-Saturdays could be taking Sunday and Mondays off.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Months</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">months =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(started_at,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">label =</span> <span class="cn">FALSE</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">abbr =</span> <span class="cn">TRUE</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                                            )) <span class="sc">|&gt;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(months) <span class="sc">|&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(months) <span class="sc">|&gt;</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">months =</span> <span class="fu">c</span>(month.abb),</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">months =</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(months),</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">months =</span> forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(months)) <span class="sc">|&gt;</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_month.db"</span>,</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_month.db"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_month.db"&gt; [?? x 2]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
   months      n
   &lt;fct&gt;   &lt;dbl&gt;
 1 Jan    136886
 2 Feb    136818
 3 Mar    183129
 4 Apr    286343
 5 May    408373
 6 Jun    474756
 7 Jul    502519
 8 Aug    519423
 9 Sep    461164
10 Oct    374268
# ℹ more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_month.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">sum =</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
      sum
    &lt;dbl&gt;
1 3897398</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_month.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="bikeShare_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The monthly ridership does differ substantially between certain months. Summer months (relative to North America) is when we see the largest increase in ridership. Spring and Fall seasons lie in between Summer and Winter in terms of scale of trips taken</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">trip_time =</span> <span class="fu">round</span>(trip_time,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(trip_time) <span class="sc">|&gt;</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(trip_time) <span class="sc">|&gt;</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_tripTime.db"</span>,</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_tripTime.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   trip_time      n
       &lt;dbl&gt;  &lt;dbl&gt;
 1         5 293803
 2         6 286755
 3         4 277279
 4         7 269364
 5         8 248761
 6         9 225902
 7         3 214975
 8        10 203172
 9        11 180040
10        12 159778
11        13 142474
12        14 126117
13        15 111231
14         2 106938
15        16  98928
16        17  87472
17        18  78248
18        19  70288
19        20  62967
20        21  56145</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_tripTime.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">sum =</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
      sum
    &lt;dbl&gt;
1 3897398</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_tripTime.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="bikeShare_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The time riders are usually spending on these trips lies in between 5-15 minutes.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_startNames.db"</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_startNames.db"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_startNames.db"&gt; [?? x 2]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
   start_station_name             n
   &lt;chr&gt;                      &lt;dbl&gt;
 1 2112 W Peterson Ave          546
 2 410                            3
 3 63rd St Beach                648
 4 900 W Harrison St          10925
 5 Aberdeen St &amp; Jackson Blvd 12888
 6 Aberdeen St &amp; Monroe St     8486
 7 Aberdeen St &amp; Randolph St   9270
 8 Ada St &amp; 113th St             19
 9 Ada St &amp; Washington Blvd    5874
10 Adler Planetarium          12354
# ℹ more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                  end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>                    end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_pairStations.db"</span>,</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_pairStations.db"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/freq_pairStations.db"&gt; [?? x 3]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
   start_station_name  end_station_name                               n
   &lt;chr&gt;               &lt;chr&gt;                                      &lt;dbl&gt;
 1 2112 W Peterson Ave Winthrop Ave &amp; Lawrence Ave                    2
 2 2112 W Peterson Ave Western Ave &amp; Howard St                        1
 3 2112 W Peterson Ave Broadway &amp; Wilson Ave                          2
 4 2112 W Peterson Ave Damen Ave &amp; Foster Ave                        21
 5 2112 W Peterson Ave Greenview Ave &amp; Jarvis Ave                     2
 6 2112 W Peterson Ave Clarendon Ave &amp; Gordon Ter                     1
 7 2112 W Peterson Ave DuSable Lake Shore Dr &amp; North Blvd             1
 8 2112 W Peterson Ave Winchester (Ravenswood) Ave &amp; Balmoral Ave     6
 9 2112 W Peterson Ave Dodge Ave &amp; Mulford St                         1
10 2112 W Peterson Ave Lincoln Ave &amp; Winona St                        7
# ℹ more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_pairStations.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">sum =</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
      sum
    &lt;dbl&gt;
1 3897398</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;"db/data_fltrd.db"&gt; [?? x 16]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
   ride_id          rideable_type started_at          ended_at           
   &lt;chr&gt;            &lt;chr&gt;         &lt;dttm&gt;              &lt;dttm&gt;             
 1 8FBD2AD70B0F6A6F classic_bike  2023-01-01 00:04:07 2023-01-01 00:13:56
 2 F9EA7B9E6C243CFC classic_bike  2023-01-01 00:04:54 2023-01-01 00:31:52
 3 27C2A67184C49D01 electric_bike 2023-01-01 00:05:43 2023-01-01 00:21:37
 4 544EFA0F99CA9099 electric_bike 2023-01-01 00:09:33 2023-01-01 00:14:21
 5 4BA829307ABF42BA classic_bike  2023-01-01 00:09:53 2023-01-01 00:25:01
 6 346B9700826F9746 classic_bike  2023-01-01 00:10:45 2023-01-01 00:18:23
 7 DA3FA50BB5A26A47 electric_bike 2023-01-01 00:11:44 2023-01-01 00:18:33
 8 0EE9294767228388 classic_bike  2023-01-01 00:11:53 2023-01-01 00:21:22
 9 049B5478C03BA915 classic_bike  2023-01-01 00:11:59 2023-01-01 00:21:34
10 080D40AFF69CBC91 classic_bike  2023-01-01 00:12:40 2023-01-01 00:18:42
# ℹ more rows
# ℹ 12 more variables: start_station_name &lt;chr&gt;, start_station_id &lt;chr&gt;,
#   end_station_name &lt;chr&gt;, end_station_id &lt;chr&gt;, start_lat &lt;dbl&gt;,
#   start_lng &lt;dbl&gt;, end_lat &lt;dbl&gt;, end_lng &lt;dbl&gt;, member_casual &lt;chr&gt;,
#   trip_time &lt;dbl&gt;, miles &lt;dbl&gt;, mph &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'rider count by hour table'</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"hour"</span> <span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">hour</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(hour) <span class="sc">|&gt;</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="st">"Total_Riders"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="co">#or count?</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(hour) <span class="sc">|&gt;</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"hour"</span> <span class="ot">=</span> hms<span class="sc">::</span><span class="fu">hms</span>(<span class="at">hours =</span> hour),</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"hour"</span> <span class="ot">=</span> <span class="fu">format</span>(<span class="fu">strptime</span>(hour, <span class="at">format =</span> <span class="st">"%H"</span>), <span class="st">"%r"</span>),</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"index"</span> <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>)) <span class="sc">|&gt;</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/rideHours.db"</span>,</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>hours_of_Riders <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"db/rideHours.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_sub_all</span>(hours_of_Riders[[<span class="dv">1</span>]],</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">start =</span> <span class="dv">1</span>,</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">end =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">|&gt;</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">"^0"</span>)</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_sub</span>(hours_of_Riders[[<span class="dv">1</span>]],</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">start =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_to_lower</span>()</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>simpleTimes <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(x, <span class="at">sep =</span> <span class="st">" "</span>, y)</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>hours_of_Riders[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> simpleTimes</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>hours_of_Riders</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 3
   hour  Total_Riders index
   &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt;
 1 12 am        42202     1
 2 1 am         25567     2
 3 2 am         14358     3
 4 3 am          8184     4
 5 4 am          8584     5
 6 5 am         33019     6
 7 6 am        100702     7
 8 7 am        187713     8
 9 8 am        233741     9
10 9 am        164160    10
# ℹ 14 more rows</code></pre>
</div>
</div>
<div class="column-page">
<div class="cell fig-cap-location-bottom" title="Time of Day and Volume of Cyclers">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59" data-cap-location="bottom"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>hoursAnimate <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data =</span> hours_of_Riders,</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">x =</span> <span class="fu">reorder</span>(hour, .data<span class="sc">$</span>index),</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> Total_Riders,</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">fill =</span> Total_Riders)) <span class="sc">+</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">coord_radial</span>(<span class="at">start =</span> <span class="dv">2</span> <span class="sc">*</span> pi,</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">inner.radius =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">xlab</span>(<span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ylab</span>(<span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>,</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Average Riders by the Hour of Day"</span>,</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"(Jan-Dec 2023)"</span>,</span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Data from cyclistic database."</span>,</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">tag =</span> <span class="st">"Figure 1.c"</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">lineheight =</span> <span class="dv">4</span>,</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>,</span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">color =</span> <span class="st">'grey10'</span>),</span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(</span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">1</span>,</span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'grey10'</span>,</span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a>            <span class="at">arrow =</span> ggplot2<span class="sc">::</span><span class="fu">arrow</span>()</span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(</span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">18</span>,</span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"grey90"</span>,</span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a>            <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.ticks =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">linewidth =</span> .<span class="dv">5</span>),</span>
<span id="cb59-54"><a href="#cb59-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">'grey80'</span>,</span>
<span id="cb59-55"><a href="#cb59-55" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb59-56"><a href="#cb59-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb59-57"><a href="#cb59-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,</span>
<span id="cb59-58"><a href="#cb59-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb59-59"><a href="#cb59-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.size =</span> grid<span class="sc">::</span><span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"cm"</span>)</span>
<span id="cb59-60"><a href="#cb59-60" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb59-61"><a href="#cb59-61" aria-hidden="true" tabindex="-1"></a>    gganimate<span class="sc">::</span><span class="fu">transition_reveal</span>(<span class="at">along =</span> <span class="fu">seq</span>(<span class="fu">length</span>(hour)))</span>
<span id="cb59-62"><a href="#cb59-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-63"><a href="#cb59-63" aria-hidden="true" tabindex="-1"></a>my_anim <span class="ot">&lt;-</span> gganimate<span class="sc">::</span><span class="fu">animate</span>(hoursAnimate,</span>
<span id="cb59-64"><a href="#cb59-64" aria-hidden="true" tabindex="-1"></a>                             <span class="at">renderer =</span> gganimate<span class="sc">::</span><span class="fu">gifski_renderer</span>())</span>
<span id="cb59-65"><a href="#cb59-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-66"><a href="#cb59-66" aria-hidden="true" tabindex="-1"></a>my_anim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="bikeShare_files/figure-html/radial-column plot-1.gif" class="img-fluid figure-img"></p>
<figcaption>The time of day people tend to be riding.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>:::</p>
</section>
<section id="data-modeling" class="level1">
<h1>Data Modeling</h1>
<p><strong>Non-parametric descriptive:</strong></p>
<ul>
<li>median, interquartile-range (IQR)</li>
</ul>
<section id="semi-parametric-and-non-parametric-methods" class="level2">
<h2 data-anchor-id="semi-parametric-and-non-parametric-methods"><strong>Semi-parametric and non-parametric</strong> methods</h2>
<p><strong>Description</strong></p>
<ul>
<li><p>To predict the outcome variable using independent variables</p>
<ul>
<li><p>outcome variable(s) to test</p>
<ul>
<li>member_casual</li>
</ul></li>
</ul></li>
</ul>
<p><strong>Statistical methods</strong></p>
<ul>
<li>Binary Logistic regression analysis</li>
</ul>
<p><strong>Data type</strong></p>
<ul>
<li><p>Outcome variable:</p>
<ul>
<li><p>Categorical (&gt;= 2 categories)</p>
<ul>
<li><p>member_casual</p></li>
<li><p>rideable_type</p></li>
</ul></li>
</ul></li>
<li><p>Independent variable(s):</p>
<ul>
<li><p>Categorical (&gt;= 2 categories) or</p>
<ul>
<li><p>hour</p>
<ul>
<li>24 categories</li>
</ul></li>
<li><p>day_of_week</p>
<ul>
<li>7 categories</li>
</ul></li>
<li><p>month</p>
<ul>
<li>12 categories</li>
</ul></li>
<li><p>holiday</p>
<ul>
<li>2 categories (yes or no?)</li>
</ul></li>
<li><p>member_casual</p>
<ul>
<li>2 categories</li>
</ul></li>
<li><p>rideable_type</p>
<ul>
<li>2 categories</li>
</ul></li>
</ul></li>
<li><p>Continuous or</p>
<ul>
<li><p>trip_time</p></li>
<li><p>mph</p></li>
<li><p>miles</p></li>
<li><p>geospatial location</p></li>
</ul></li>
<li><p>both</p>
<ul>
<li><p>member_causal</p></li>
<li><p>rideable_type</p></li>
<li><p>hour</p></li>
<li><p>day</p></li>
<li><p>trip_time</p></li>
<li><p>mph</p></li>
<li><p>miles</p></li>
<li><p>geospatial location</p></li>
</ul></li>
</ul></li>
</ul>
<p><br>
Mean &gt; Median</p>
<p><strong>“Right-Skewed Histogram”</strong><br>
- The right side of the histogram plot has lower frequencies than the left.</p>
<p>Unimodal</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>latsTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>                        tblPath_fltrd,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat) <span class="sc">|&gt;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">signif</span>(start_lat, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">|&gt;</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>longsTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng) <span class="sc">|&gt;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lng =</span> <span class="fu">signif</span>(start_lng, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">|&gt;</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>latlngTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">round</span>(start_lat, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">round</span>(start_lng, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#dplyr::collect() |&gt;</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>latlngTable <span class="sc">|&gt;</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   start_lat start_lng Freq
1     41.649   -87.844    0
2      41.65   -87.844    0
3     41.652   -87.844    0
4     41.654   -87.844    0
5     41.655   -87.844    0
6     41.657   -87.844    0
7     41.658   -87.844    0
8     41.659   -87.844    0
9      41.66   -87.844    0
10    41.666   -87.844    0</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trying to get clues as to how we should alter the table. </span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>coordsTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat, </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>                  start_lng) <span class="sc">|&gt;</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dplyr::filter(start_lat, signif(start_lat, digits = 7) == TRUE) |&gt;</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#dplyr::collect() |&gt;</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">as.character</span>(start_lat),</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">as.character</span>(start_lng),</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lat) <span class="sc">&gt;=</span> <span class="dv">8</span>,</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>                  <span class="co"># 9 to account for negative symbol in lng</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>                  stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lng) <span class="sc">&gt;=</span> <span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_lat, </span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>                    start_lng) <span class="sc">|&gt;</span></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trying to get clues as to how we should alter the table. </span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>coordsTable2 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                           tblPath_fltrd,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">round</span>(start_lat, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">round</span>(start_lng, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lat =</span> <span class="fu">as.character</span>(start_lat),</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">as.character</span>(start_lng),</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lat) <span class="sc">&gt;=</span> <span class="dv">8</span>,</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>                  stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lng) <span class="sc">&gt;=</span> <span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  dplyr::filter(n &gt;= 47) |&gt;</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># seems base R's table() is a lot slower than dplyr</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#table() |&gt;</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>coordsTable2 <span class="sc">|&gt;</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   start_lat start_lng n
1   41.88191 -87.63967 1
2   41.92545 -87.65371 1
3   41.87619 -87.62996 1
4   41.88297 -87.64164 1
5   41.88061 -87.63005 1
6   41.89885 -87.63005 1
7   41.78798 -87.58853 1
8   41.88584 -87.63073 1
9   41.88442 -87.62986 1
10  41.88609 -87.62327 1</code></pre>
</div>
</div>
<p>Assuming their plans to expand the “over 800 stations” by 250, I’d like to set the parameters to achieve around ~1050 rows. So I set n to include groups with at least 47 riders.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># according to this, there are 1487 unique station id's in the dataset now</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
      n
  &lt;dbl&gt;
1  1487</code></pre>
</div>
</div>
<p>The 5th decimal place is accurate up to 1.1m, so there ends up being groupings for bikes rented from stations located along a street or at intersections of two streets. You can tell by the start_station_name. If it’s an intersection it will say something like “1st St &amp; 2nd St.”. If it’s one street, it will likely just say “1st St”. There are likely some exceptions to that rule. That helps explain why the geospatial coordinates slightly differ for entries with the same stations and IDs.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>mapTest <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_id,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>                  start_station_name,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>                  start_lat,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>                  start_lng) <span class="sc">|&gt;</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name,</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>                    start_station_id,</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>                    start_lat,</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>                    start_lng) <span class="sc">|&gt;</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>        start_station_name,</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Ogden Ave &amp; Chicago Ave"</span>) <span class="sc">==</span> <span class="cn">TRUE</span>,</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>        n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name, </span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>                   start_station_id, </span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>                   start_lat,</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>                   start_lng,</span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>                   n) <span class="sc">|&gt;</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>mapTest <span class="sc">|&gt;</span></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng, start_lat, n) <span class="sc">|&gt;</span></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dplyr::group_by(start_lng, start_lat) |&gt;</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>             <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>    mapview<span class="sc">::</span><span class="fu">mapview</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A quick test of the data:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>coordsDF <span class="ot">&lt;-</span> mapTest <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng,</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>                  start_lat) <span class="sc">|&gt;</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(start_lng,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>                     start_lat) <span class="sc">|&gt;</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">100</span>)</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>coordsDF <span class="sc">|&gt;</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    mapview<span class="sc">::</span><span class="fu">mapview</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># according to this, there are 1428 unique station IDs in the dataset now</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>countStations <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>                            tblPath,</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_id, start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#dplyr::distinct(dplyr::pick(start_station_id, start_station_name)) |&gt;</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_id,</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>                    start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(countStations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>memberCasuals_monthly  <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at,</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>                  member_casual) <span class="sc">|&gt;</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">'month'</span> <span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">month</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(month,</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>                    member_casual) <span class="sc">|&gt;</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="st">"riderCount"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(month)</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">collect</span>(memberCasuals_monthly) <span class="sc">|&gt;</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_col</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(month),</span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">y =</span> riderCount,</span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">fill =</span> member_casual),</span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">position =</span> <span class="st">'dodge2'</span>) <span class="sc">+</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> month.abb,</span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>                              <span class="at">name =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">'Set2'</span>) <span class="sc">+</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme_dark</span>() <span class="sc">+</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Ridership: Members vs Casuals"</span>,</span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"(Jan-Dec 2023)"</span>,</span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data from cyclistic database."</span>,</span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">tag =</span> <span class="st">"Figure 1.b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-body-outset">
<div>
<figure class="figure">
<p><img src="bikeShare_files/figure-html/column plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>for quick reference with using Tsibble syntax</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'grouped tibb'</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>grouped_byDay <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>                            tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>                  member_casual) <span class="sc">|&gt;</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">started_at =</span> <span class="fu">as.Date</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(started_at,</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>                    member_casual) <span class="sc">|&gt;</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>(),</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sdev =</span> stats<span class="sc">::</span><span class="fu">sd</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'to grouped tsibb'</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co"># tsibble, time-series table/tibble seems to make time series plots more straightforward</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>grouped_tsi <span class="ot">&lt;-</span> grouped_byDay <span class="sc">|&gt;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    tsibble<span class="sc">::</span><span class="fu">as_tsibble</span>(<span class="at">key =</span> <span class="fu">c</span>(member_casual,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>                                n),</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">index =</span> started_at) <span class="sc">|&gt;</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(started_at)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: "map query setup"</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co"># chicago starting coordinates for leaflet, setView</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>chicago <span class="ot">&lt;-</span> maps<span class="sc">::</span>us.cities <span class="sc">|&gt;</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">"name"</span>,</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"long"</span>,</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"lat"</span>) <span class="sc">|&gt;</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Chicago IL"</span>)</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="co"># full dataset coordinates, might need to sample</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>coordQry <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng,</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>                  start_lat) <span class="sc">|&gt;</span></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(start_lng,</span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>                     start_lat) <span class="sc">|&gt;</span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a>coordQry_small <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a>                             tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng,</span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a>                  start_lat) <span class="sc">|&gt;</span></span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(start_lng,</span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a>                     start_lat) <span class="sc">|&gt;</span></span>
<span id="cb75-28"><a href="#cb75-28" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb75-29"><a href="#cb75-29" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb75-30"><a href="#cb75-30" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb75-31"><a href="#cb75-31" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: "mapview"</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co">#|eval: false</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>coordQry_small <span class="sc">|&gt;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    mapview<span class="sc">::</span><span class="fu">mapview</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-91542290dfd826f33b3b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-91542290dfd826f33b3b">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[41.892278,41.911722,41.902973,41.88917683258,41.880958,41.90096039,41.926277,41.78509714636,41.791478,41.912133,41.903222,41.88338,41.94023191810859,41.93758231600629,41.867888,41.918306,41.79430062054,41.915689,41.9256018819,41.8810317,41.894722,41.89661720040753,41.891466,41.929546,41.88275196568561,41.893992,41.888716036,41.86722595682,41.931248,41.87222873224032,41.949074,41.94947274088333,41.8839840647265,41.889906,41.890762,41.92416102906763,41.932588,41.87831661183068,41.89259211970973,41.898969,41.921822,41.867227,41.89380805624359,41.945529,41.932418,41.879255,41.943739,41.909668,41.929143,41.954245],[-87.612043,-87.62680400000001,-87.63128,-87.6385057718,-87.616743,-87.62377664,-87.63083399999999,-87.6010727606,-87.599861,-87.63465600000001,-87.63432400000001,-87.64117,-87.65294373035431,-87.64409780502319,-87.623041,-87.63628199999999,-87.60144977340001,-87.63460000000001,-87.6537080423,-87.62408431999999,-87.634362,-87.62857854366302,-87.626761,-87.643118,-87.64119029045105,-87.629318,-87.64444785329999,-87.61535539019999,-87.644336,-87.66136385500431,-87.648636,-87.64645278453827,-87.6246839761734,-87.634266,-87.631697,-87.64638036489487,-87.636427,-87.64098107814789,-87.61728912591934,-87.629912,-87.64413999999999,-87.625961,-87.64169722795485,-87.646439,-87.652705,-87.639904,-87.66401999999999,-87.648128,-87.64907700000001,-87.65440599999999],6,null,"sf::st_as_sf(coordQry_small, coords = c(1:2), ....",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#DAE12C","#009497","#009497","#008498","#007F97","#007F97","#007F97","#007996","#007996","#006E94","#006290","#005C8D","#155087","#155087","#155087","#254A83","#254A83","#254A83","#2F4480","#2F4480","#363D7C","#363D7C","#3C3777","#3C3777","#3C3777","#3C3777","#403073","#403073","#44296E","#44296E","#44296E","#44296E","#44296E","#44296E","#44296E","#44296E","#462169","#462169","#462169","#462169","#462169","#462169","#462169","#481964","#481964","#481964","#481964","#481964","#481964","#481964"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>32206&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>20861&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>20650&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>19388&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>18991&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>18742&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>18628&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>18563&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>18299&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>17572&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>16589&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>15769&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>15124&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>15036&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>14714&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>14627&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>14550&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>14433&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>13949&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>13775&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>13706&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>13511&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>13146&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>24&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>12937&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>25&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>12893&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>26&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>12858&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>27&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>12694&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>28&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>12402&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>29&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>12254&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>30&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11984&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>31&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11976&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>32&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11961&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>33&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11932&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>34&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11888&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>35&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11869&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>36&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11798&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>37&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11736&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>38&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11620&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>39&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11592&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>40&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11546&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>41&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11528&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>42&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11360&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>43&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11343&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>44&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11285&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>45&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11121&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>46&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>11113&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>47&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>10936&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>48&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>10909&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>49&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>10876&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>50&emsp;<\/td><\/tr><tr><td>1<\/td><th>n&emsp;<\/th><td>10842&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["32206","20861","20650","19388","18991","18742","18628","18563","18299","17572","16589","15769","15124","15036","14714","14627","14550","14433","13949","13775","13706","13511","13146","12937","12893","12858","12694","12402","12254","11984","11976","11961","11932","11888","11869","11798","11736","11620","11592","11546","11528","11360","11343","11285","11121","11113","10936","10909","10876","10842"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-87.66401999999999,41.78509714636,-87.599861,41.954245,true,"sf::st_as_sf(coordQry_small, coords = c(1:2), ....","Zoom to sf::st_as_sf(coordQry_small, coords = c(1:2), ....","<strong> sf::st_as_sf(coordQry_small, coords = c(1:2), .... <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"sf::st_as_sf(coordQry_small, coords = c(1:2), ....",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#4B0055 , #2A4782 19.4626474442988%, #008A98 42.8665043999251%, #00BE7E 66.2703613555514%, #C0DE35 89.6742183111777%, #FDE333 "],"labels":["15,000","20,000","25,000","30,000"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"numeric","title":"sf::st_as_sf(coordQry_small, coords = c(1:2), ....","extra":{"p_1":0.1946264744429882,"p_n":0.8967421831117768},"layerId":null,"className":"info legend","group":"sf::st_as_sf(coordQry_small, coords = c(1:2), ...."}]}],"limits":{"lat":[41.78509714636,41.954245],"lng":[-87.66401999999999,-87.599861]},"fitBounds":[41.78509714636,-87.66401999999999,41.954245,-87.599861,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ojs_define</span>(<span class="at">js_tsi =</span> grouped_tsi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78" data-startfrom="1164" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1163;"><span id="cb78-1164"><a href="#cb78-1164" aria-hidden="true" tabindex="-1"></a>jsData <span class="op">=</span> <span class="fu">transpose</span>(js_tsi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="column-page">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79" data-startfrom="1169" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1168;"><span id="cb79-1169"><a href="#cb79-1169" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb79-1170"><a href="#cb79-1170" aria-hidden="true" tabindex="-1"></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb79-1171"><a href="#cb79-1171" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {<span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb79-1172"><a href="#cb79-1172" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb79-1173"><a href="#cb79-1173" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">dot</span>(jsData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">'started_at'</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">'n'</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">'member_casual'</span>})</span>
<span id="cb79-1174"><a href="#cb79-1174" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb79-1175"><a href="#cb79-1175" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80" data-startfrom="1180" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1179;"><span id="cb80-1180"><a href="#cb80-1180" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">lineY</span>(jsData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"started_at"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"n"</span>})<span class="op">.</span><span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>locsStart <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>                      tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#start_lng,</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#start_lat</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">|&gt;</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"station_name"</span> <span class="ot">=</span> start_station_name</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># "lng" = start_lng,</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># "lat" = start_lat</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>locsEnd <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>                      tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(end_station_name</span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#end_lng,</span></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#end_lat</span></span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">|&gt;</span></span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"station_name"</span> <span class="ot">=</span> end_station_name</span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#"lng" = end_lng,</span></span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#"lat" = end_lat</span></span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a>locs <span class="ot">&lt;-</span> locsStart <span class="sc">|&gt;</span></span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">left_join</span>(locsEnd) <span class="sc">|&gt;</span></span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(station_name)</span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a>locs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Source:     SQL [?? x 1]
# Database:   DuckDB v0.10.0 [ecmos@Windows 10 x64:R 4.3.3/db/data.db]
# Ordered by: station_name
   station_name              
   &lt;chr&gt;                     
 1 2112 W Peterson Ave       
 2 410                       
 3 63rd St Beach             
 4 900 W Harrison St         
 5 Aberdeen St &amp; Jackson Blvd
 6 Aberdeen St &amp; Monroe St   
 7 Aberdeen St &amp; Randolph St 
 8 Ada St &amp; 113th St         
 9 Ada St &amp; Washington Blvd  
10 Adler Planetarium         
# ℹ more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>flowData <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>                  end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name,</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>                    end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"from_station"</span> <span class="ot">=</span> start_station_name,</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"to_station"</span> <span class="ot">=</span> end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">50</span>)</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>flowData</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 3
   from_station                      to_station                   n
   &lt;chr&gt;                             &lt;chr&gt;                    &lt;dbl&gt;
 1 Ellis Ave &amp; 60th St               Ellis Ave &amp; 55th St       6927
 2 Ellis Ave &amp; 60th St               University Ave &amp; 57th St  6600
 3 Ellis Ave &amp; 55th St               Ellis Ave &amp; 60th St       6349
 4 University Ave &amp; 57th St          Ellis Ave &amp; 60th St       6168
 5 Calumet Ave &amp; 33rd St             State St &amp; 33rd St        5417
 6 State St &amp; 33rd St                Calumet Ave &amp; 33rd St     5343
 7 DuSable Lake Shore Dr &amp; Monroe St Streeter Dr &amp; Grand Ave   4023
 8 Loomis St &amp; Lexington St          Morgan St &amp; Polk St       3719
 9 Morgan St &amp; Polk St               Loomis St &amp; Lexington St  3379
10 University Ave &amp; 57th St          Kimbark Ave &amp; 53rd St     3112
# ℹ 40 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(flowData<span class="sc">$</span>n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1363    1510    1878    2443    2599    6927 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>locationData <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>                  started_at,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>                  ended_at,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>                  trip_time) <span class="sc">|&gt;</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"trip_time"</span> <span class="ot">=</span> <span class="fu">round</span>(trip_time,</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="st">"trip_count"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>(),</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"first_date"</span> <span class="ot">=</span> <span class="fu">min</span>(started_at),</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"last_date"</span> <span class="ot">=</span> <span class="fu">max</span>(ended_at),</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"avg_trip_time"</span> <span class="ot">=</span> <span class="fu">mean</span>(trip_time)</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">|&gt;</span></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"station_name"</span> <span class="ot">=</span> start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>locationData</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,487 × 5
   station_name trip_count first_date          last_date           avg_trip_time
   &lt;chr&gt;             &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;                      &lt;dbl&gt;
 1 2112 W Pete…        546 2023-01-01 14:38:58 2023-12-31 11:40:34         15.8 
 2 410                   3 2023-04-27 08:02:30 2023-04-27 08:46:00         12.7 
 3 63rd St Bea…        648 2023-01-06 12:59:47 2023-12-29 13:31:47         30.6 
 4 900 W Harri…      10925 2023-01-01 02:18:29 2024-01-01 00:06:30          9.08
 5 Aberdeen St…      12888 2023-01-01 00:56:42 2023-12-31 22:15:30          9.85
 6 Aberdeen St…       8486 2023-01-01 08:08:19 2023-12-31 20:06:36         12.0 
 7 Aberdeen St…       9270 2023-01-01 12:39:37 2023-12-31 14:40:04         11.6 
 8 Ada St &amp; 11…         19 2023-05-04 18:51:45 2023-11-29 17:03:52         13.8 
 9 Ada St &amp; Wa…       5874 2023-01-01 06:56:37 2023-12-31 16:10:44         10.8 
10 Adler Plane…      12354 2023-01-01 07:42:32 2023-12-31 16:10:21         25.0 
# ℹ 1,477 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>mergd <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> locationData,</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> locs,</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">by.x =</span> <span class="st">"station_name"</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">by.y =</span> <span class="st">"station_name"</span>,</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">sort =</span> <span class="cn">FALSE</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>mergd <span class="ot">&lt;-</span> mergd <span class="sc">|&gt;</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">avg_trip_time =</span> <span class="fu">round</span>(avg_trip_time,</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(trip_count)) <span class="sc">|&gt;</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">25</span>)    </span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>mergd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                         station_name trip_count          first_date
1             Streeter Dr &amp; Grand Ave      43175 2023-01-01 00:12:40
2            Kingsbury St &amp; Kinzie St      30915 2023-01-01 02:21:08
3                   Clark St &amp; Elm St      30597 2023-01-01 01:10:53
4        Clinton St &amp; Washington Blvd      28743 2023-01-01 15:28:03
5  DuSable Lake Shore Dr &amp; North Blvd      28386 2023-01-01 02:12:09
6               Wells St &amp; Concord Ln      28357 2023-01-01 01:15:27
7               Michigan Ave &amp; Oak St      26861 2023-01-01 00:59:17
8                   Wells St &amp; Elm St      25948 2023-01-01 00:59:22
9   DuSable Lake Shore Dr &amp; Monroe St      25055 2023-01-01 00:14:47
10                Theater on the Lake      23893 2023-01-01 03:14:22
11            Clinton St &amp; Madison St      23143 2023-01-01 01:58:28
12               Broadway &amp; Barry Ave      22867 2023-01-01 01:48:00
13           Wilton Ave &amp; Belmont Ave      22612 2023-01-01 01:10:13
14           University Ave &amp; 57th St      22089 2023-01-01 16:42:37
15                Ellis Ave &amp; 60th St      21910 2023-01-01 12:01:37
16            Clark St &amp; Armitage Ave      21642 2023-01-01 00:23:47
17                Wells St &amp; Huron St      21416 2023-01-01 01:12:35
18      Sheffield Ave &amp; Fullerton Ave      21259 2023-01-01 00:28:38
19             State St &amp; Chicago Ave      21016 2023-01-01 01:03:50
20             Clark St &amp; Lincoln Ave      21011 2023-01-01 01:47:47
21         Indiana Ave &amp; Roosevelt Rd      20336 2023-01-01 02:13:09
22                Canal St &amp; Adams St      20302 2023-01-01 02:22:26
23          Desplaines St &amp; Kinzie St      20201 2023-01-01 04:25:20
24              Dearborn St &amp; Erie St      20182 2023-01-01 02:31:05
25             Wabash Ave &amp; Grand Ave      19992 2023-01-01 00:05:43
             last_date avg_trip_time
1  2024-01-01 00:19:01            24
2  2023-12-31 21:30:50             9
3  2023-12-31 23:29:33            11
4  2023-12-31 18:03:02            11
5  2023-12-31 23:34:53            19
6  2023-12-31 19:23:30            12
7  2023-12-31 16:48:31            23
8  2023-12-31 23:51:48            10
9  2023-12-31 16:49:56            25
10 2023-12-31 22:53:53            21
11 2023-12-31 23:56:48            11
12 2023-12-31 21:18:45            12
13 2023-12-31 21:21:06            11
14 2023-12-31 05:54:17             8
15 2023-12-31 09:22:22             6
16 2023-12-31 17:54:10            14
17 2023-12-31 23:51:50            10
18 2023-12-31 23:43:00             9
19 2023-12-31 19:48:26            11
20 2023-12-31 21:09:23            14
21 2023-12-31 23:12:35            16
22 2023-12-31 07:16:45            12
23 2023-12-31 21:04:13            10
24 2023-12-31 18:34:38            11
25 2023-12-31 23:24:43            13</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|class-output: plotMod</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>ef_test <span class="ot">&lt;-</span> epiflows<span class="sc">::</span><span class="fu">make_epiflows</span>(<span class="at">flows =</span> flowData,</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">locations =</span> mergd,</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">duration_stay =</span> <span class="st">"avg_trip_time"</span>,</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">num_cases =</span> <span class="st">"trip_count"</span>)</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>epiflows<span class="sc">::</span><span class="fu">vis_epiflows</span>(ef_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-6a9d58e95dcdae1ea599" style="width:90%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-6a9d58e95dcdae1ea599">{"x":{"nodes":{"id":["Benson Ave & Church St","Calumet Ave & 33rd St","Chicago Ave & Sheridan Rd","Dusable Harbor","DuSable Lake Shore Dr & Monroe St","DuSable Lake Shore Dr & North Blvd","Ellis Ave & 55th St","Ellis Ave & 58th St","Ellis Ave & 60th St","Greenview Ave & Fullerton Ave","Halsted St & Maxwell St","Halsted St & Polk St","Indiana Ave & 31st St","Kimbark Ave & 53rd St","Kingsbury St & Erie St","Kingsbury St & Kinzie St","Lake Park Ave & 56th St","Loomis St & Lexington St","Michigan Ave & Oak St","Millennium Park","MLK Jr Dr & 29th St","Morgan St & Polk St","Rhodes Ave & 32nd St","Shedd Aquarium","Sheffield Ave & Fullerton Ave","Sheridan Rd & Noyes St (NU)","State St & 33rd St","Streeter Dr & Grand Ave","Theater on the Lake","University Ave & 57th St","Wells St & Elm St","Wells St & Huron St","Wolcott Ave & Polk St","Woodlawn Ave & 55th St"],"trip_count":[null,null,null,null,25055,28386,null,null,21910,null,null,null,null,null,null,30915,null,null,26861,null,null,null,null,null,21259,null,null,43175,23893,22089,25948,21416,null,null],"first_date":[null,null,null,null,"2023-01-01T00:14:47Z","2023-01-01T02:12:09Z",null,null,"2023-01-01T12:01:37Z",null,null,null,null,null,null,"2023-01-01T02:21:08Z",null,null,"2023-01-01T00:59:17Z",null,null,null,null,null,"2023-01-01T00:28:38Z",null,null,"2023-01-01T00:12:40Z","2023-01-01T03:14:22Z","2023-01-01T16:42:37Z","2023-01-01T00:59:22Z","2023-01-01T01:12:35Z",null,null],"last_date":[null,null,null,null,"2023-12-31T16:49:56Z","2023-12-31T23:34:53Z",null,null,"2023-12-31T09:22:22Z",null,null,null,null,null,null,"2023-12-31T21:30:50Z",null,null,"2023-12-31T16:48:31Z",null,null,null,null,null,"2023-12-31T23:43:00Z",null,null,"2024-01-01T00:19:01Z","2023-12-31T22:53:53Z","2023-12-31T05:54:17Z","2023-12-31T23:51:48Z","2023-12-31T23:51:50Z",null,null],"avg_trip_time":[null,null,null,null,25,19,null,null,6,null,null,null,null,null,null,9,null,null,23,null,null,null,null,null,9,null,null,24,21,8,10,10,null,null],"label":["Benson Ave & Church St","Calumet Ave & 33rd St","Chicago Ave & Sheridan Rd","Dusable Harbor","DuSable Lake Shore Dr & Monroe St","DuSable Lake Shore Dr & North Blvd","Ellis Ave & 55th St","Ellis Ave & 58th St","Ellis Ave & 60th St","Greenview Ave & Fullerton Ave","Halsted St & Maxwell St","Halsted St & Polk St","Indiana Ave & 31st St","Kimbark Ave & 53rd St","Kingsbury St & Erie St","Kingsbury St & Kinzie St","Lake Park Ave & 56th St","Loomis St & Lexington St","Michigan Ave & Oak St","Millennium Park","MLK Jr Dr & 29th St","Morgan St & Polk St","Rhodes Ave & 32nd St","Shedd Aquarium","Sheffield Ave & Fullerton Ave","Sheridan Rd & Noyes St (NU)","State St & 33rd St","Streeter Dr & Grand Ave","Theater on the Lake","University Ave & 57th St","Wells St & Elm St","Wells St & Huron St","Wolcott Ave & Polk St","Woodlawn Ave & 55th St"],"title":["<p> id: Benson Ave & Church St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Calumet Ave & 33rd St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Chicago Ave & Sheridan Rd<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Dusable Harbor<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: DuSable Lake Shore Dr & Monroe St<br>trip_count: 25055<br>first_date: 2023-01-01 00:14:47<br>last_date: 2023-12-31 16:49:56<br>avg_trip_time: 25 <\/p>","<p> id: DuSable Lake Shore Dr & North Blvd<br>trip_count: 28386<br>first_date: 2023-01-01 02:12:09<br>last_date: 2023-12-31 23:34:53<br>avg_trip_time: 19 <\/p>","<p> id: Ellis Ave & 55th St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Ellis Ave & 58th St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Ellis Ave & 60th St<br>trip_count: 21910<br>first_date: 2023-01-01 12:01:37<br>last_date: 2023-12-31 09:22:22<br>avg_trip_time: 6 <\/p>","<p> id: Greenview Ave & Fullerton Ave<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Halsted St & Maxwell St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Halsted St & Polk St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Indiana Ave & 31st St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Kimbark Ave & 53rd St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Kingsbury St & Erie St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Kingsbury St & Kinzie St<br>trip_count: 30915<br>first_date: 2023-01-01 02:21:08<br>last_date: 2023-12-31 21:30:50<br>avg_trip_time: 9 <\/p>","<p> id: Lake Park Ave & 56th St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Loomis St & Lexington St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Michigan Ave & Oak St<br>trip_count: 26861<br>first_date: 2023-01-01 00:59:17<br>last_date: 2023-12-31 16:48:31<br>avg_trip_time: 23 <\/p>","<p> id: Millennium Park<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: MLK Jr Dr & 29th St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Morgan St & Polk St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Rhodes Ave & 32nd St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Shedd Aquarium<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Sheffield Ave & Fullerton Ave<br>trip_count: 21259<br>first_date: 2023-01-01 00:28:38<br>last_date: 2023-12-31 23:43:00<br>avg_trip_time: 9 <\/p>","<p> id: Sheridan Rd & Noyes St (NU)<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: State St & 33rd St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Streeter Dr & Grand Ave<br>trip_count: 43175<br>first_date: 2023-01-01 00:12:40<br>last_date: 2024-01-01 00:19:01<br>avg_trip_time: 24 <\/p>","<p> id: Theater on the Lake<br>trip_count: 23893<br>first_date: 2023-01-01 03:14:22<br>last_date: 2023-12-31 22:53:53<br>avg_trip_time: 21 <\/p>","<p> id: University Ave & 57th St<br>trip_count: 22089<br>first_date: 2023-01-01 16:42:37<br>last_date: 2023-12-31 05:54:17<br>avg_trip_time: 8 <\/p>","<p> id: Wells St & Elm St<br>trip_count: 25948<br>first_date: 2023-01-01 00:59:22<br>last_date: 2023-12-31 23:51:48<br>avg_trip_time: 10 <\/p>","<p> id: Wells St & Huron St<br>trip_count: 21416<br>first_date: 2023-01-01 01:12:35<br>last_date: 2023-12-31 23:51:50<br>avg_trip_time: 10 <\/p>","<p> id: Wolcott Ave & Polk St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>","<p> id: Woodlawn Ave & 55th St<br>trip_count: NA<br>first_date: NA<br>last_date: NA<br>avg_trip_time: NA <\/p>"],"color":["#CCDDFF","#B5DAE6","#9ED7CE","#88D3B6","#85CFA7","#A9C6AA","#CEBEAE","#F2B5B1","#EEB0B5","#D5ACB9","#BCA8BD","#A4A4C0","#BCAE8C","#D5B957","#EEC423","#FFC70B","#FFBB2E","#FFAF51","#FFA374","#F5B084","#E7CA8B","#D9E492","#CCFE99","#D1E4A3","#D6CAAD","#DBB0B8","#E1A3BB","#EAAFB1","#F3BBA6","#FCC79C","#F5CCA2","#E8CCB0","#DACCBE","#CDCDCD"],"borderWidth":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"x":[1,0.9829730996839019,0.9324722294043557,0.8502171357296142,0.7390089172206591,0.6026346363792565,0.4457383557765384,0.2736629900720828,0.09226835946330203,-0.09226835946330192,-0.2736629900720828,-0.4457383557765382,-0.6026346363792563,-0.739008917220659,-0.8502171357296142,-0.9324722294043558,-0.9829730996839018,-1,-0.9829730996839018,-0.9324722294043557,-0.8502171357296141,-0.7390089172206591,-0.6026346363792565,-0.445738355776538,-0.2736629900720831,-0.09226835946330192,0.09226835946330159,0.2736629900720828,0.4457383557765384,0.6026346363792561,0.7390089172206591,0.850217135729614,0.9324722294043557,0.9829730996839019],"y":[0,0.1845367189266041,0.3627892612175616,0.5286874503355148,0.676581822422998,0.8014360120183202,0.8989982594409081,0.9659461993678036,0.9999999999999998,1,0.9659461993678036,0.8989982594409081,0.8014360120183204,0.6765818224229982,0.5286874503355148,0.3627892612175616,0.1845367189266041,2.220446049250313e-16,-0.1845367189266037,-0.3627892612175618,-0.5286874503355148,-0.6765818224229979,-0.8014360120183202,-0.8989982594409082,-0.9659461993678035,-1,-1,-0.9659461993678035,-0.8989982594409079,-0.8014360120183204,-0.6765818224229978,-0.5286874503355151,-0.3627892612175618,-0.1845367189266037]},"edges":{"from":["Ellis Ave & 60th St","Ellis Ave & 60th St","Ellis Ave & 55th St","University Ave & 57th St","Calumet Ave & 33rd St","State St & 33rd St","DuSable Lake Shore Dr & Monroe St","Loomis St & Lexington St","Morgan St & Polk St","University Ave & 57th St","Kimbark Ave & 53rd St","MLK Jr Dr & 29th St","University Ave & 57th St","State St & 33rd St","Lake Park Ave & 56th St","Streeter Dr & Grand Ave","Loomis St & Lexington St","Streeter Dr & Grand Ave","Ellis Ave & 55th St","Streeter Dr & Grand Ave","Sheffield Ave & Fullerton Ave","Streeter Dr & Grand Ave","Halsted St & Polk St","Ellis Ave & 60th St","Chicago Ave & Sheridan Rd","Shedd Aquarium","Sheridan Rd & Noyes St (NU)","Rhodes Ave & 32nd St","Streeter Dr & Grand Ave","Shedd Aquarium","DuSable Lake Shore Dr & North Blvd","State St & 33rd St","Ellis Ave & 58th St","Kingsbury St & Erie St","Kimbark Ave & 53rd St","Theater on the Lake","DuSable Lake Shore Dr & Monroe St","Greenview Ave & Fullerton Ave","Michigan Ave & Oak St","Dusable Harbor","Halsted St & Maxwell St","Michigan Ave & Oak St","Halsted St & Polk St","Kimbark Ave & 53rd St","Loomis St & Lexington St","Wells St & Huron St","Millennium Park","Sheridan Rd & Noyes St (NU)","Woodlawn Ave & 55th St","MLK Jr Dr & 29th St"],"to":["Ellis Ave & 55th St","University Ave & 57th St","Ellis Ave & 60th St","Ellis Ave & 60th St","State St & 33rd St","Calumet Ave & 33rd St","Streeter Dr & Grand Ave","Morgan St & Polk St","Loomis St & Lexington St","Kimbark Ave & 53rd St","University Ave & 57th St","State St & 33rd St","Lake Park Ave & 56th St","MLK Jr Dr & 29th St","University Ave & 57th St","DuSable Lake Shore Dr & Monroe St","Halsted St & Polk St","DuSable Lake Shore Dr & North Blvd","Kimbark Ave & 53rd St","Michigan Ave & Oak St","Greenview Ave & Fullerton Ave","Theater on the Lake","Loomis St & Lexington St","Ellis Ave & 58th St","Sheridan Rd & Noyes St (NU)","Streeter Dr & Grand Ave","Chicago Ave & Sheridan Rd","State St & 33rd St","Millennium Park","DuSable Lake Shore Dr & Monroe St","Streeter Dr & Grand Ave","Rhodes Ave & 32nd St","Ellis Ave & 60th St","Kingsbury St & Kinzie St","Ellis Ave & 55th St","Streeter Dr & Grand Ave","Shedd Aquarium","Sheffield Ave & Fullerton Ave","Theater on the Lake","Streeter Dr & Grand Ave","Halsted St & Polk St","Streeter Dr & Grand Ave","Halsted St & Maxwell St","Ellis Ave & 60th St","Wolcott Ave & Polk St","Wells St & Elm St","Streeter Dr & Grand Ave","Benson Ave & Church St","University Ave & 57th St","Indiana Ave & 31st St"],"n":[6927,6600,6349,6168,5417,5343,4023,3719,3379,3112,2892,2633,2626,2518,2394,2187,2124,2071,2024,1958,1940,1935,1919,1911,1885,1870,1829,1735,1717,1669,1631,1622,1571,1565,1524,1512,1512,1509,1481,1451,1432,1422,1402,1391,1390,1387,1382,1366,1364,1363],"width":[10,9.527934170636639,9.165583946874548,8.904287570376786,7.820124151869496,7.713295799047207,5.807708964919879,5.368846542514797,4.878013570088061,4.492565324094125,4.174967518406237,3.801068283528223,3.79096289880179,3.635051248736827,3.456041576440017,3.157210913815505,3.06626245127761,2.989750252634618,2.92189981232857,2.826620470622203,2.800635195611376,2.793417063663924,2.770319041432078,2.758770030316154,2.721235744189404,2.699581348347048,2.640392666377942,2.504691785765844,2.478706510755017,2.409412444059477,2.354554641258842,2.341562003753429,2.267937057889418,2.259275299552476,2.20008661758337,2.182763100909485,2.182763100909485,2.178432221741013,2.138010682835282,2.09470189115057,2.067272989750252,2.052836725855349,2.023964198065541,2.008084307781146,2.006640681391656,2.002309802223185,1.995091670275733,1.971993648043886,1.969106395264905,1.967662768875415],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"title":["<p>Ellis Ave & 60th St to Ellis Ave & 55th St: <b>6,927<\/b><\/p>","<p>Ellis Ave & 60th St to University Ave & 57th St: <b>6,600<\/b><\/p>","<p>Ellis Ave & 55th St to Ellis Ave & 60th St: <b>6,349<\/b><\/p>","<p>University Ave & 57th St to Ellis Ave & 60th St: <b>6,168<\/b><\/p>","<p>Calumet Ave & 33rd St to State St & 33rd St: <b>5,417<\/b><\/p>","<p>State St & 33rd St to Calumet Ave & 33rd St: <b>5,343<\/b><\/p>","<p>DuSable Lake Shore Dr & Monroe St to Streeter Dr & Grand Ave: <b>4,023<\/b><\/p>","<p>Loomis St & Lexington St to Morgan St & Polk St: <b>3,719<\/b><\/p>","<p>Morgan St & Polk St to Loomis St & Lexington St: <b>3,379<\/b><\/p>","<p>University Ave & 57th St to Kimbark Ave & 53rd St: <b>3,112<\/b><\/p>","<p>Kimbark Ave & 53rd St to University Ave & 57th St: <b>2,892<\/b><\/p>","<p>MLK Jr Dr & 29th St to State St & 33rd St: <b>2,633<\/b><\/p>","<p>University Ave & 57th St to Lake Park Ave & 56th St: <b>2,626<\/b><\/p>","<p>State St & 33rd St to MLK Jr Dr & 29th St: <b>2,518<\/b><\/p>","<p>Lake Park Ave & 56th St to University Ave & 57th St: <b>2,394<\/b><\/p>","<p>Streeter Dr & Grand Ave to DuSable Lake Shore Dr & Monroe St: <b>2,187<\/b><\/p>","<p>Loomis St & Lexington St to Halsted St & Polk St: <b>2,124<\/b><\/p>","<p>Streeter Dr & Grand Ave to DuSable Lake Shore Dr & North Blvd: <b>2,071<\/b><\/p>","<p>Ellis Ave & 55th St to Kimbark Ave & 53rd St: <b>2,024<\/b><\/p>","<p>Streeter Dr & Grand Ave to Michigan Ave & Oak St: <b>1,958<\/b><\/p>","<p>Sheffield Ave & Fullerton Ave to Greenview Ave & Fullerton Ave: <b>1,940<\/b><\/p>","<p>Streeter Dr & Grand Ave to Theater on the Lake: <b>1,935<\/b><\/p>","<p>Halsted St & Polk St to Loomis St & Lexington St: <b>1,919<\/b><\/p>","<p>Ellis Ave & 60th St to Ellis Ave & 58th St: <b>1,911<\/b><\/p>","<p>Chicago Ave & Sheridan Rd to Sheridan Rd & Noyes St (NU): <b>1,885<\/b><\/p>","<p>Shedd Aquarium to Streeter Dr & Grand Ave: <b>1,870<\/b><\/p>","<p>Sheridan Rd & Noyes St (NU) to Chicago Ave & Sheridan Rd: <b>1,829<\/b><\/p>","<p>Rhodes Ave & 32nd St to State St & 33rd St: <b>1,735<\/b><\/p>","<p>Streeter Dr & Grand Ave to Millennium Park: <b>1,717<\/b><\/p>","<p>Shedd Aquarium to DuSable Lake Shore Dr & Monroe St: <b>1,669<\/b><\/p>","<p>DuSable Lake Shore Dr & North Blvd to Streeter Dr & Grand Ave: <b>1,631<\/b><\/p>","<p>State St & 33rd St to Rhodes Ave & 32nd St: <b>1,622<\/b><\/p>","<p>Ellis Ave & 58th St to Ellis Ave & 60th St: <b>1,571<\/b><\/p>","<p>Kingsbury St & Erie St to Kingsbury St & Kinzie St: <b>1,565<\/b><\/p>","<p>Kimbark Ave & 53rd St to Ellis Ave & 55th St: <b>1,524<\/b><\/p>","<p>Theater on the Lake to Streeter Dr & Grand Ave: <b>1,512<\/b><\/p>","<p>DuSable Lake Shore Dr & Monroe St to Shedd Aquarium: <b>1,512<\/b><\/p>","<p>Greenview Ave & Fullerton Ave to Sheffield Ave & Fullerton Ave: <b>1,509<\/b><\/p>","<p>Michigan Ave & Oak St to Theater on the Lake: <b>1,481<\/b><\/p>","<p>Dusable Harbor to Streeter Dr & Grand Ave: <b>1,451<\/b><\/p>","<p>Halsted St & Maxwell St to Halsted St & Polk St: <b>1,432<\/b><\/p>","<p>Michigan Ave & Oak St to Streeter Dr & Grand Ave: <b>1,422<\/b><\/p>","<p>Halsted St & Polk St to Halsted St & Maxwell St: <b>1,402<\/b><\/p>","<p>Kimbark Ave & 53rd St to Ellis Ave & 60th St: <b>1,391<\/b><\/p>","<p>Loomis St & Lexington St to Wolcott Ave & Polk St: <b>1,390<\/b><\/p>","<p>Wells St & Huron St to Wells St & Elm St: <b>1,387<\/b><\/p>","<p>Millennium Park to Streeter Dr & Grand Ave: <b>1,382<\/b><\/p>","<p>Sheridan Rd & Noyes St (NU) to Benson Ave & Church St: <b>1,366<\/b><\/p>","<p>Woodlawn Ave & 55th St to University Ave & 57th St: <b>1,364<\/b><\/p>","<p>MLK Jr Dr & 29th St to Indiana Ave & 31st St: <b>1,363<\/b><\/p>"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"physics":{"stabilization":false},"edges":{"smooth":false}},"groups":null,"width":"90%","height":"700px","idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":true,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false,"variable":"id","main":"Select by id","values":["Benson Ave & Church St","Calumet Ave & 33rd St","Chicago Ave & Sheridan Rd","Dusable Harbor","DuSable Lake Shore Dr & Monroe St","DuSable Lake Shore Dr & North Blvd","Ellis Ave & 55th St","Ellis Ave & 58th St","Ellis Ave & 60th St","Greenview Ave & Fullerton Ave","Halsted St & Maxwell St","Halsted St & Polk St","Indiana Ave & 31st St","Kimbark Ave & 53rd St","Kingsbury St & Erie St","Kingsbury St & Kinzie St","Lake Park Ave & 56th St","Loomis St & Lexington St","Michigan Ave & Oak St","Millennium Park","MLK Jr Dr & 29th St","Morgan St & Polk St","Rhodes Ave & 32nd St","Shedd Aquarium","Sheffield Ave & Fullerton Ave","Sheridan Rd & Noyes St (NU)","State St & 33rd St","Streeter Dr & Grand Ave","Theater on the Lake","University Ave & 57th St","Wells St & Elm St","Wells St & Huron St","Wolcott Ave & Polk St","Woodlawn Ave & 55th St"]},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"opts_manipulation":{"datacss":"table.legend_table {\n  font-size: 11px;\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n}\ntable.legend_table td {\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n  padding: 2px;\n}\ndiv.table_content {\n  width:80px;\n  text-align:center;\n}\ndiv.table_description {\n  width:100px;\n}\n\n.operation {\n  font-size:20px;\n}\n\n.network-popUp {\n  display:none;\n  z-index:299;\n  width:250px;\n  /*height:150px;*/\n  background-color: #f9f9f9;\n  border-style:solid;\n  border-width:1px;\n  border-color: #0d0d0d;\n  padding:10px;\n  text-align: center;\n  position:fixed;\n  top:50%;  \n  left:50%;  \n  margin:-100px 0 0 -100px;  \n\n}","addNodeCols":["id","label"],"editNodeCols":["id","label"],"tab_add_node":"<span id=\"addnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"addnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"addnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"addnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"addnode-cancelButton\"><\/button>","tab_edit_node":"<span id=\"editnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"editnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"editnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"editnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"editnode-cancelButton\"><\/button>"},"iconsRedraw":true,"igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>These maps track bike-sharing activity going on worldwide and in Chicago.</p>
<p><a href="https://bikesharemap.com/#/8/-87.5771/41.3747/">Bike Share Map</a> <span class="citation" data-cites="bikesha">(<a href="#ref-bikesha" role="doc-biblioref"><span>“Bike Share Map: Chicago (Divvy),”</span> n.d.</a>)</span></p>
<p><a href="https://citybik.es/">CityBikes: bike sharing networks around the world</a> <span class="citation" data-cites="citybike">(<a href="#ref-citybike" role="doc-biblioref"><span>“CityBikes: Bike Sharing Networks Around the World,”</span> n.d.</a>)</span></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'drops duckDB tables'</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"duckDrops.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'duckDB Shutdown'</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbDisconnect</span>(dbconn, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"db"</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->
<div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb94" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "BikeShare"</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Eric Mossotti"</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> references.bib</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="an">repo:</span><span class="co"> https://github.com/ericMossotti/Bike_Share</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="an">source:</span><span class="co"> bikeShare.qmd</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="an">code-links:</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - text: "Project Repo"</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co">      href: repo</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a><span class="co">      </span></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="an">code-copy:</span><span class="co"> hover</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="an">code-overflow:</span><span class="co"> wrap</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a><span class="an">toc_float:</span><span class="co"> false</span></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a><span class="an">fig-responsive:</span><span class="co"> true</span></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a><span class="an">echo:</span><span class="co"> true</span></span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a><span class="co">#sass: styles.sass</span></span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-27"><a href="#cb94-27" aria-hidden="true" tabindex="-1"></a><span class="co">#font: merriweather, futura</span></span>
<span id="cb94-28"><a href="#cb94-28" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb94-29"><a href="#cb94-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include = FALSE}</span></span>
<span id="cb94-30"><a href="#cb94-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-31"><a href="#cb94-31" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(message = FALSE, </span></span>
<span id="cb94-32"><a href="#cb94-32" aria-hidden="true" tabindex="-1"></a><span class="in">                      warning = FALSE)</span></span>
<span id="cb94-33"><a href="#cb94-33" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-34"><a href="#cb94-34" aria-hidden="true" tabindex="-1"></a>:::grid</span>
<span id="cb94-35"><a href="#cb94-35" aria-hidden="true" tabindex="-1"></a>:::g-col-1 </span>
<span id="cb94-36"><a href="#cb94-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-37"><a href="#cb94-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-38"><a href="#cb94-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-39"><a href="#cb94-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-40"><a href="#cb94-40" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-41"><a href="#cb94-41" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb94-42"><a href="#cb94-42" aria-hidden="true" tabindex="-1"></a>:::g-col-5</span>
<span id="cb94-43"><a href="#cb94-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-44"><a href="#cb94-44" aria-hidden="true" tabindex="-1"></a><span class="fu"># Case Study: Bike-Sharing in Chicago</span></span>
<span id="cb94-45"><a href="#cb94-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-46"><a href="#cb94-46" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objective:</span></span>
<span id="cb94-47"><a href="#cb94-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-48"><a href="#cb94-48" aria-hidden="true" tabindex="-1"></a>Communicate to shareholders data based insights regarding to better inform their desire to enlist more annual subscribers.</span>
<span id="cb94-49"><a href="#cb94-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-50"><a href="#cb94-50" aria-hidden="true" tabindex="-1"></a><span class="fu"># First Off, Import and Clean</span></span>
<span id="cb94-51"><a href="#cb94-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-52"><a href="#cb94-52" aria-hidden="true" tabindex="-1"></a>I've condensed the initial download, import and cleaning steps to reduce the complexity of this Quarto document. Thinking ahead, with reproducibility in mind, this code chunk should cover most use cases for tinkering and testing. I've personally found it helpful to reduce the need to re-download files and re-process all over again if all one needs to do is reconnect to the database that has already been written. Choosing a persistent DuckDB database filesystem (as opposed to in-memory) was intentional as I wouldn't lose the progress I've made when tinkering over multiple days. It seems just as fast as the in-memory database but also seems to reduce RAM needed in tinkering.</span>
<span id="cb94-53"><a href="#cb94-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-54"><a href="#cb94-54" aria-hidden="true" tabindex="-1"></a>Overall, I think a locally persistent DuckDB solution was an ideal decision on most levels. Desktops and laptop systems tend to have more long term, non-volatile memory, such as drives available than short-term, volatile memory, such as RAM. It was interesting that the db file is only one file despite how many paths are written using the initial connection. The zero-copy feature, I believe, is why it doesn't really increase much in size despite writing multiple processed tables, even if they are of similar length to the original. I think that's because the longer ones contain much of the same data. I'll have to look more into that later in project updates.</span>
<span id="cb94-55"><a href="#cb94-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-56"><a href="#cb94-56" aria-hidden="true" tabindex="-1"></a>All data was downloaded from @divvydab.</span>
<span id="cb94-57"><a href="#cb94-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-60"><a href="#cb94-60" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-61"><a href="#cb94-61" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">exists</span>(<span class="st">"dbconn"</span>) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb94-62"><a href="#cb94-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Script to keep this document less cluttered. </span></span>
<span id="cb94-63"><a href="#cb94-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">"import_clean_initial.R"</span>)</span>
<span id="cb94-64"><a href="#cb94-64" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb94-65"><a href="#cb94-65" aria-hidden="true" tabindex="-1"></a>        <span class="co"># you will have to change original_nobs if you use different data</span></span>
<span id="cb94-66"><a href="#cb94-66" aria-hidden="true" tabindex="-1"></a>        <span class="co"># helps with tinkering when you want to skip the import part</span></span>
<span id="cb94-67"><a href="#cb94-67" aria-hidden="true" tabindex="-1"></a>        original_nobs <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="dv">5719877</span>)</span>
<span id="cb94-68"><a href="#cb94-68" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-69"><a href="#cb94-69" aria-hidden="true" tabindex="-1"></a>        tblPath <span class="ot">&lt;-</span> <span class="st">"db/data.db"</span></span>
<span id="cb94-70"><a href="#cb94-70" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-71"><a href="#cb94-71" aria-hidden="true" tabindex="-1"></a>        dbconn <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(</span>
<span id="cb94-72"><a href="#cb94-72" aria-hidden="true" tabindex="-1"></a>        duckdb<span class="sc">::</span><span class="fu">duckdb</span>(),</span>
<span id="cb94-73"><a href="#cb94-73" aria-hidden="true" tabindex="-1"></a>        <span class="at">dbdir =</span> tblPath,</span>
<span id="cb94-74"><a href="#cb94-74" aria-hidden="true" tabindex="-1"></a>        <span class="at">read_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-75"><a href="#cb94-75" aria-hidden="true" tabindex="-1"></a>        <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-76"><a href="#cb94-76" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb94-77"><a href="#cb94-77" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-78"><a href="#cb94-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-81"><a href="#cb94-81" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-82"><a href="#cb94-82" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "View import script"</span></span>
<span id="cb94-83"><a href="#cb94-83" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Data import and initial processing script."</span></span>
<span id="cb94-84"><a href="#cb94-84" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "import_clean_initial.R"</span></span>
<span id="cb94-85"><a href="#cb94-85" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false </span></span>
<span id="cb94-86"><a href="#cb94-86" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-87"><a href="#cb94-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-88"><a href="#cb94-88" aria-hidden="true" tabindex="-1"></a>Verifying DuckDB tables:</span>
<span id="cb94-89"><a href="#cb94-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-92"><a href="#cb94-92" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-93"><a href="#cb94-93" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb94-94"><a href="#cb94-94" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Verifying DuckDB tables"</span></span>
<span id="cb94-95"><a href="#cb94-95" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: true</span></span>
<span id="cb94-96"><a href="#cb94-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-97"><a href="#cb94-97" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn) <span class="sc">|&gt;</span></span>
<span id="cb94-98"><a href="#cb94-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>()</span>
<span id="cb94-99"><a href="#cb94-99" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-100"><a href="#cb94-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-101"><a href="#cb94-101" aria-hidden="true" tabindex="-1"></a><span class="fu">## Hidden Duplicate Observations?</span></span>
<span id="cb94-102"><a href="#cb94-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-103"><a href="#cb94-103" aria-hidden="true" tabindex="-1"></a>Now to go a little deeper, we can check for duplicates. It might not necessarily be the case that each observation (obs) is unique even if all the Rider IDs are, technically, unique. </span>
<span id="cb94-104"><a href="#cb94-104" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-105"><a href="#cb94-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-106"><a href="#cb94-106" aria-hidden="true" tabindex="-1"></a>:::g-col-5</span>
<span id="cb94-109"><a href="#cb94-109" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-110"><a href="#cb94-110" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: 'Duplicates Table with GT'</span></span>
<span id="cb94-111"><a href="#cb94-111" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb94-112"><a href="#cb94-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-113"><a href="#cb94-113" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a separate table used to analyze the observations returned as not distinct (n &gt; 1). This adds an extra column labeled "n".</span></span>
<span id="cb94-114"><a href="#cb94-114" aria-hidden="true" tabindex="-1"></a>dupeTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-115"><a href="#cb94-115" aria-hidden="true" tabindex="-1"></a>                        tblPath,</span>
<span id="cb94-116"><a href="#cb94-116" aria-hidden="true" tabindex="-1"></a>                        <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-117"><a href="#cb94-117" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at<span class="sc">:</span>end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-118"><a href="#cb94-118" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Counts of unique rows added for column 'n'</span></span>
<span id="cb94-119"><a href="#cb94-119" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(started_at,</span>
<span id="cb94-120"><a href="#cb94-120" aria-hidden="true" tabindex="-1"></a>                     ended_at,</span>
<span id="cb94-121"><a href="#cb94-121" aria-hidden="true" tabindex="-1"></a>                     start_station_name,</span>
<span id="cb94-122"><a href="#cb94-122" aria-hidden="true" tabindex="-1"></a>                     end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-123"><a href="#cb94-123" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Only observations that have been duplicated 1 or more</span></span>
<span id="cb94-124"><a href="#cb94-124" aria-hidden="true" tabindex="-1"></a>    <span class="co"># times are shown</span></span>
<span id="cb94-125"><a href="#cb94-125" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-126"><a href="#cb94-126" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We want to see all rows, not just one row for each obs</span></span>
<span id="cb94-127"><a href="#cb94-127" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-128"><a href="#cb94-128" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-129"><a href="#cb94-129" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb94-130"><a href="#cb94-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-131"><a href="#cb94-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-132"><a href="#cb94-132" aria-hidden="true" tabindex="-1"></a>gtDupes <span class="ot">&lt;-</span> dupeTable <span class="sc">|&gt;</span></span>
<span id="cb94-133"><a href="#cb94-133" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-134"><a href="#cb94-134" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">gt</span>(<span class="at">rowname_col =</span> <span class="st">"row"</span>,</span>
<span id="cb94-135"><a href="#cb94-135" aria-hidden="true" tabindex="-1"></a>           <span class="at">groupname_col =</span> <span class="st">"started_at"</span>,</span>
<span id="cb94-136"><a href="#cb94-136" aria-hidden="true" tabindex="-1"></a>           <span class="at">row_group_as_column =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-137"><a href="#cb94-137" aria-hidden="true" tabindex="-1"></a>           <span class="at">caption =</span> <span class="st">"Duplicates_Table1"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-138"><a href="#cb94-138" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_style</span>(</span>
<span id="cb94-139"><a href="#cb94-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb94-140"><a href="#cb94-140" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>,</span>
<span id="cb94-141"><a href="#cb94-141" aria-hidden="true" tabindex="-1"></a>                      <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb94-142"><a href="#cb94-142" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_borders</span>(<span class="at">sides =</span> <span class="fu">c</span>(<span class="st">"bottom"</span>))</span>
<span id="cb94-143"><a href="#cb94-143" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb94-144"><a href="#cb94-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> gt<span class="sc">::</span><span class="fu">cells_column_labels</span>(gt<span class="sc">::</span><span class="fu">everything</span>())</span>
<span id="cb94-145"><a href="#cb94-145" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb94-146"><a href="#cb94-146" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_style</span>(</span>
<span id="cb94-147"><a href="#cb94-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb94-148"><a href="#cb94-148" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_borders</span>(<span class="at">sides =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"right"</span>)),</span>
<span id="cb94-149"><a href="#cb94-149" aria-hidden="true" tabindex="-1"></a>        gt<span class="sc">::</span><span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">"center"</span>,</span>
<span id="cb94-150"><a href="#cb94-150" aria-hidden="true" tabindex="-1"></a>                      <span class="at">v_align =</span> <span class="st">"middle"</span>)</span>
<span id="cb94-151"><a href="#cb94-151" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb94-152"><a href="#cb94-152" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> gt<span class="sc">::</span><span class="fu">cells_body</span>(gt<span class="sc">::</span><span class="fu">everything</span>())</span>
<span id="cb94-153"><a href="#cb94-153" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb94-154"><a href="#cb94-154" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">data_color</span>(<span class="at">columns =</span> start_station_name,</span>
<span id="cb94-155"><a href="#cb94-155" aria-hidden="true" tabindex="-1"></a>                   <span class="at">target_columns =</span> gt<span class="sc">::</span><span class="fu">everything</span>(),</span>
<span id="cb94-156"><a href="#cb94-156" aria-hidden="true" tabindex="-1"></a>                   <span class="at">method =</span> <span class="st">"auto"</span>,</span>
<span id="cb94-157"><a href="#cb94-157" aria-hidden="true" tabindex="-1"></a>                   <span class="at">palette =</span> <span class="st">"basetheme::brutal"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-158"><a href="#cb94-158" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_source_note</span>(gt<span class="sc">::</span><span class="fu">md</span>(<span class="st">"**Source**: Divvy Data"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-159"><a href="#cb94-159" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Duplicate Observations"</span>,</span>
<span id="cb94-160"><a href="#cb94-160" aria-hidden="true" tabindex="-1"></a>                   <span class="at">subtitle =</span> <span class="st">"(by start date)"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-161"><a href="#cb94-161" aria-hidden="true" tabindex="-1"></a>    gt<span class="sc">::</span><span class="fu">tab_options</span>(</span>
<span id="cb94-162"><a href="#cb94-162" aria-hidden="true" tabindex="-1"></a>        <span class="at">heading.title.font.weight =</span> <span class="st">"bolder"</span>,</span>
<span id="cb94-163"><a href="#cb94-163" aria-hidden="true" tabindex="-1"></a>        <span class="at">heading.subtitle.font.weight =</span> <span class="st">"lighter"</span>,</span>
<span id="cb94-164"><a href="#cb94-164" aria-hidden="true" tabindex="-1"></a>        <span class="at">table.layout =</span> <span class="st">"auto"</span></span>
<span id="cb94-165"><a href="#cb94-165" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb94-166"><a href="#cb94-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-167"><a href="#cb94-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-168"><a href="#cb94-168" aria-hidden="true" tabindex="-1"></a>gtDupes</span>
<span id="cb94-169"><a href="#cb94-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-170"><a href="#cb94-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-171"><a href="#cb94-171" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-172"><a href="#cb94-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-173"><a href="#cb94-173" aria-hidden="true" tabindex="-1"></a>:::g-col-1</span>
<span id="cb94-174"><a href="#cb94-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-175"><a href="#cb94-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-176"><a href="#cb94-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-177"><a href="#cb94-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-178"><a href="#cb94-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-179"><a href="#cb94-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-180"><a href="#cb94-180" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-181"><a href="#cb94-181" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-182"><a href="#cb94-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-183"><a href="#cb94-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-184"><a href="#cb94-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-185"><a href="#cb94-185" aria-hidden="true" tabindex="-1"></a>Of the other columns, it seems that the start_time, end_time, start_station, and end_station could show if there are possibly hidden duplicated observations.</span>
<span id="cb94-186"><a href="#cb94-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-187"><a href="#cb94-187" aria-hidden="true" tabindex="-1"></a>We started with 5,719,877 observations (obs) for dates spanning January to December, 2023, then removed 1,388,170 incomplete obs.</span>
<span id="cb94-188"><a href="#cb94-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-189"><a href="#cb94-189" aria-hidden="true" tabindex="-1"></a>I assumed that having the same times/dates and stations for two different ride IDs was a mistake. Although, I do not know how that error would happen. I could have assumed one person could check out multiple bikes at once. In that instance, each bike could be assigned a unique ride_id. That, however, has only happened 18 times over a year. Since it's only one copy every time, that also raises a red flag. I did not notice any other correlations with station_id/name, member_casual, or ride_type for those particular duplicated data.</span>
<span id="cb94-190"><a href="#cb94-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-193"><a href="#cb94-193" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-194"><a href="#cb94-194" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: 'output to distinct duplicates and total obs'</span></span>
<span id="cb94-195"><a href="#cb94-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-196"><a href="#cb94-196" aria-hidden="true" tabindex="-1"></a>distinctCopiesCount <span class="ot">&lt;-</span> dupeTable <span class="sc">|&gt;</span></span>
<span id="cb94-197"><a href="#cb94-197" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb94-198"><a href="#cb94-198" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>() </span>
<span id="cb94-199"><a href="#cb94-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-200"><a href="#cb94-200" aria-hidden="true" tabindex="-1"></a>duplicateObs <span class="ot">&lt;-</span> <span class="fu">length</span>(dupeTable[[<span class="dv">1</span>]])</span>
<span id="cb94-201"><a href="#cb94-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-202"><a href="#cb94-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-203"><a href="#cb94-203" aria-hidden="true" tabindex="-1"></a>By applying distinct() on dupeTable, we see the only distinct value is 2. We can safely conclude that, of the duplicates, each has a minimum and maximum of 1 extra copy.</span>
<span id="cb94-204"><a href="#cb94-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-205"><a href="#cb94-205" aria-hidden="true" tabindex="-1"></a>Number of rows in the dupeTable is 36. Because each duplicated observation has one duplicate (n = 2), expected removed nobs is 18. The issue is that we need to get rid of not all 36 rows, but just the 1 extra duplicate observation from each, resulting in the expected 18.</span>
<span id="cb94-206"><a href="#cb94-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-209"><a href="#cb94-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-210"><a href="#cb94-210" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'create un-duped table, count rows'</span></span>
<span id="cb94-211"><a href="#cb94-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-212"><a href="#cb94-212" aria-hidden="true" tabindex="-1"></a><span class="co"># The issue is, we need to get rid of not all of these rows, but just the extra duplicate observations. </span></span>
<span id="cb94-213"><a href="#cb94-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-214"><a href="#cb94-214" aria-hidden="true" tabindex="-1"></a><span class="co"># If there were 2 rows of duplicates, we would want to end up with 1 row after removing the extras.</span></span>
<span id="cb94-215"><a href="#cb94-215" aria-hidden="true" tabindex="-1"></a>undupedTable <span class="ot">&lt;-</span> dupeTable <span class="sc">|&gt;</span></span>
<span id="cb94-216"><a href="#cb94-216" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(started_at,</span>
<span id="cb94-217"><a href="#cb94-217" aria-hidden="true" tabindex="-1"></a>                     start_station_name,</span>
<span id="cb94-218"><a href="#cb94-218" aria-hidden="true" tabindex="-1"></a>                     ended_at,</span>
<span id="cb94-219"><a href="#cb94-219" aria-hidden="true" tabindex="-1"></a>                     end_station_name,</span>
<span id="cb94-220"><a href="#cb94-220" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-221"><a href="#cb94-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-222"><a href="#cb94-222" aria-hidden="true" tabindex="-1"></a>distinctUndupedCounts <span class="ot">&lt;-</span> undupedTable <span class="sc">|&gt;</span></span>
<span id="cb94-223"><a href="#cb94-223" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-224"><a href="#cb94-224" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-225"><a href="#cb94-225" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-226"><a href="#cb94-226" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>()</span>
<span id="cb94-227"><a href="#cb94-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-228"><a href="#cb94-228" aria-hidden="true" tabindex="-1"></a>undupedTable</span>
<span id="cb94-229"><a href="#cb94-229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-230"><a href="#cb94-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-231"><a href="#cb94-231" aria-hidden="true" tabindex="-1"></a>The count of observed distinct values for the un-duplicated table was indeed 18. So now, it is time to run a count of how rows/observations are in the dataset. There is a difference, though, concerning the correct amount:</span>
<span id="cb94-232"><a href="#cb94-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-235"><a href="#cb94-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-236"><a href="#cb94-236" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'incorrect/correct distinct observations'</span></span>
<span id="cb94-237"><a href="#cb94-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-238"><a href="#cb94-238" aria-hidden="true" tabindex="-1"></a><span class="co"># Run an incorrect count on how many rows or observations there are in the dataset.</span></span>
<span id="cb94-239"><a href="#cb94-239" aria-hidden="true" tabindex="-1"></a>count_incorrectDists <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-240"><a href="#cb94-240" aria-hidden="true" tabindex="-1"></a>                                tblPath,</span>
<span id="cb94-241"><a href="#cb94-241" aria-hidden="true" tabindex="-1"></a>                                <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-242"><a href="#cb94-242" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(dplyr<span class="sc">::</span><span class="fu">pick</span>(<span class="st">"ride_id"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-243"><a href="#cb94-243" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>(<span class="at">name =</span> <span class="st">"Incorrect Distinct Observations"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-244"><a href="#cb94-244" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-245"><a href="#cb94-245" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>()</span>
<span id="cb94-246"><a href="#cb94-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-247"><a href="#cb94-247" aria-hidden="true" tabindex="-1"></a><span class="co"># For the correct count of obs</span></span>
<span id="cb94-248"><a href="#cb94-248" aria-hidden="true" tabindex="-1"></a>count_correctDists <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-249"><a href="#cb94-249" aria-hidden="true" tabindex="-1"></a>                              tblPath,</span>
<span id="cb94-250"><a href="#cb94-250" aria-hidden="true" tabindex="-1"></a>                              <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-251"><a href="#cb94-251" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(</span>
<span id="cb94-252"><a href="#cb94-252" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">pick</span>(</span>
<span id="cb94-253"><a href="#cb94-253" aria-hidden="true" tabindex="-1"></a>            <span class="st">"started_at"</span>,</span>
<span id="cb94-254"><a href="#cb94-254" aria-hidden="true" tabindex="-1"></a>            <span class="st">"start_station_name"</span>,</span>
<span id="cb94-255"><a href="#cb94-255" aria-hidden="true" tabindex="-1"></a>            <span class="st">"ended_at"</span>,</span>
<span id="cb94-256"><a href="#cb94-256" aria-hidden="true" tabindex="-1"></a>            <span class="st">"end_station_name"</span></span>
<span id="cb94-257"><a href="#cb94-257" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb94-258"><a href="#cb94-258" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb94-259"><a href="#cb94-259" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-260"><a href="#cb94-260" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-261"><a href="#cb94-261" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>()</span>
<span id="cb94-262"><a href="#cb94-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-263"><a href="#cb94-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-266"><a href="#cb94-266" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-267"><a href="#cb94-267" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: 'duplicate correction tibb'</span></span>
<span id="cb94-268"><a href="#cb94-268" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Summary of observations removed by processing."</span></span>
<span id="cb94-269"><a href="#cb94-269" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap-location: margin</span></span>
<span id="cb94-270"><a href="#cb94-270" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: body-outset</span></span>
<span id="cb94-271"><a href="#cb94-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-272"><a href="#cb94-272" aria-hidden="true" tabindex="-1"></a><span class="co"># To visualize a summary of what we just determined regarding obs</span></span>
<span id="cb94-273"><a href="#cb94-273" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span><span class="st">""</span>,<span class="sc">~</span><span class="st">"Counts"</span>,</span>
<span id="cb94-274"><a href="#cb94-274" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Original observations"</span>, original_nobs,</span>
<span id="cb94-275"><a href="#cb94-275" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Observations with duplicates"</span>, count_incorrectDists,</span>
<span id="cb94-276"><a href="#cb94-276" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Duplicate observations removed"</span>, </span>
<span id="cb94-277"><a href="#cb94-277" aria-hidden="true" tabindex="-1"></a>    (count_incorrectDists <span class="sc">-</span> count_correctDists),</span>
<span id="cb94-278"><a href="#cb94-278" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Corrected observations"</span>, count_correctDists</span>
<span id="cb94-279"><a href="#cb94-279" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb94-280"><a href="#cb94-280" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-281"><a href="#cb94-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-282"><a href="#cb94-282" aria-hidden="true" tabindex="-1"></a>The incorrect number of observations (nobs) was 4,331,707. The correct nobs after removing duplicated obs was 4,331,689. In short, 18 additional obs were removed.</span>
<span id="cb94-283"><a href="#cb94-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-286"><a href="#cb94-286" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-287"><a href="#cb94-287" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: 'overwrite file with correct obs'</span></span>
<span id="cb94-288"><a href="#cb94-288" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: body-outset</span></span>
<span id="cb94-289"><a href="#cb94-289" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb94-290"><a href="#cb94-290" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-291"><a href="#cb94-291" aria-hidden="true" tabindex="-1"></a>           tblPath,</span>
<span id="cb94-292"><a href="#cb94-292" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-293"><a href="#cb94-293" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(ride_id<span class="sc">:</span>trip_time) <span class="sc">|&gt;</span></span>
<span id="cb94-294"><a href="#cb94-294" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(started_at,</span>
<span id="cb94-295"><a href="#cb94-295" aria-hidden="true" tabindex="-1"></a>                    start_station_name,</span>
<span id="cb94-296"><a href="#cb94-296" aria-hidden="true" tabindex="-1"></a>                    ended_at,</span>
<span id="cb94-297"><a href="#cb94-297" aria-hidden="true" tabindex="-1"></a>                    end_station_name,</span>
<span id="cb94-298"><a href="#cb94-298" aria-hidden="true" tabindex="-1"></a>                    <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-299"><a href="#cb94-299" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-300"><a href="#cb94-300" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-301"><a href="#cb94-301" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-302"><a href="#cb94-302" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> tblPath,</span>
<span id="cb94-303"><a href="#cb94-303" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-304"><a href="#cb94-304" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-305"><a href="#cb94-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-306"><a href="#cb94-306" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-307"><a href="#cb94-307" aria-hidden="true" tabindex="-1"></a>           tblPath) <span class="sc">|&gt;</span></span>
<span id="cb94-308"><a href="#cb94-308" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span>
<span id="cb94-309"><a href="#cb94-309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-310"><a href="#cb94-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-311"><a href="#cb94-311" aria-hidden="true" tabindex="-1"></a><span class="fu">## Filtering Data, Smartly</span></span>
<span id="cb94-312"><a href="#cb94-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-313"><a href="#cb94-313" aria-hidden="true" tabindex="-1"></a>To ensure the conclusions are accurate, outliers should be filtered. Negative and very low trip times might skew trends. The underlying reason for very low trip times is somewhat of an unknown. Perhaps people often change their minds?</span>
<span id="cb94-314"><a href="#cb94-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-317"><a href="#cb94-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-318"><a href="#cb94-318" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "filtering db"</span></span>
<span id="cb94-319"><a href="#cb94-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-320"><a href="#cb94-320" aria-hidden="true" tabindex="-1"></a><span class="co"># So you don't have to re-download or re-filter everything after making further adjustments.</span></span>
<span id="cb94-321"><a href="#cb94-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-322"><a href="#cb94-322" aria-hidden="true" tabindex="-1"></a>tblPath <span class="ot">&lt;-</span> <span class="st">"db/data.db"</span></span>
<span id="cb94-323"><a href="#cb94-323" aria-hidden="true" tabindex="-1"></a>tblPath_fltrd <span class="ot">&lt;-</span> <span class="st">"db/data_fltrd.db"</span></span>
<span id="cb94-324"><a href="#cb94-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-325"><a href="#cb94-325" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">exists</span>(<span class="st">"dbconn"</span>) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb94-326"><a href="#cb94-326" aria-hidden="true" tabindex="-1"></a>    dbconn <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(),</span>
<span id="cb94-327"><a href="#cb94-327" aria-hidden="true" tabindex="-1"></a>                             <span class="at">dbdir =</span> tblPath,</span>
<span id="cb94-328"><a href="#cb94-328" aria-hidden="true" tabindex="-1"></a>                             <span class="at">read_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-329"><a href="#cb94-329" aria-hidden="true" tabindex="-1"></a>                             <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-330"><a href="#cb94-330" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-331"><a href="#cb94-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-332"><a href="#cb94-332" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (duckdb<span class="sc">::</span><span class="fu">dbExistsTable</span>(dbconn,</span>
<span id="cb94-333"><a href="#cb94-333" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"tblPath_fltrd"</span>) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb94-334"><a href="#cb94-334" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">"filterDatabase.R"</span>)</span>
<span id="cb94-335"><a href="#cb94-335" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filterDatabase</span>()</span>
<span id="cb94-336"><a href="#cb94-336" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb94-337"><a href="#cb94-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-338"><a href="#cb94-338" aria-hidden="true" tabindex="-1"></a><span class="co"># To verify the new filtered table exists.</span></span>
<span id="cb94-339"><a href="#cb94-339" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span>
<span id="cb94-340"><a href="#cb94-340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-341"><a href="#cb94-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-344"><a href="#cb94-344" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-345"><a href="#cb94-345" aria-hidden="true" tabindex="-1"></a><span class="co">#|eval: FALSE</span></span>
<span id="cb94-346"><a href="#cb94-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-347"><a href="#cb94-347" aria-hidden="true" tabindex="-1"></a><span class="co"># If you need to drop any tables</span></span>
<span id="cb94-348"><a href="#cb94-348" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"duckDrops.R"</span>)</span>
<span id="cb94-349"><a href="#cb94-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-350"><a href="#cb94-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-351"><a href="#cb94-351" aria-hidden="true" tabindex="-1"></a>So this should have removed the major, potentially, non-natural outliers from the dataset which are due to errors (including user errors).</span>
<span id="cb94-352"><a href="#cb94-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-353"><a href="#cb94-353" aria-hidden="true" tabindex="-1"></a>Verify the tables that now exist:</span>
<span id="cb94-354"><a href="#cb94-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-357"><a href="#cb94-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-358"><a href="#cb94-358" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span>
<span id="cb94-359"><a href="#cb94-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-360"><a href="#cb94-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-361"><a href="#cb94-361" aria-hidden="true" tabindex="-1"></a><span class="fu"># Frequency Tables and What They Tell Us</span></span>
<span id="cb94-362"><a href="#cb94-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-363"><a href="#cb94-363" aria-hidden="true" tabindex="-1"></a>Now we're going to create dimension and frequency tables and add those to our database. We can retain the outliers in those tables and perhaps filter as needed later. This is a good place start. If needed, we can dive deeper into other statistical techniques or adjust parameters in these code chunks and overwrite or create new db tables.</span>
<span id="cb94-364"><a href="#cb94-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-365"><a href="#cb94-365" aria-hidden="true" tabindex="-1"></a>By generating frequency tables, I quickly glean insights from the data.</span>
<span id="cb94-366"><a href="#cb94-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-369"><a href="#cb94-369" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-370"><a href="#cb94-370" aria-hidden="true" tabindex="-1"></a><span class="co"># Member_casual</span></span>
<span id="cb94-371"><a href="#cb94-371" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-372"><a href="#cb94-372" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-373"><a href="#cb94-373" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-374"><a href="#cb94-374" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(member_casual) <span class="sc">|&gt;</span></span>
<span id="cb94-375"><a href="#cb94-375" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(member_casual) <span class="sc">|&gt;</span></span>
<span id="cb94-376"><a href="#cb94-376" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-377"><a href="#cb94-377" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-378"><a href="#cb94-378" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-379"><a href="#cb94-379" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_member.db"</span>,</span>
<span id="cb94-380"><a href="#cb94-380" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-381"><a href="#cb94-381" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-382"><a href="#cb94-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-383"><a href="#cb94-383" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-384"><a href="#cb94-384" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_member.db"</span>)</span>
<span id="cb94-385"><a href="#cb94-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-386"><a href="#cb94-386" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-387"><a href="#cb94-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-388"><a href="#cb94-388" aria-hidden="true" tabindex="-1"></a>This indicates that there are nearly twice as many trips taken by annual subscribers than by casual users. So, it would seem that there is some correlation between how often a person uses the service and whether they choose to subscribe to an annual membership plan.</span>
<span id="cb94-389"><a href="#cb94-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-392"><a href="#cb94-392" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-393"><a href="#cb94-393" aria-hidden="true" tabindex="-1"></a><span class="co"># Rideable_type </span></span>
<span id="cb94-394"><a href="#cb94-394" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-395"><a href="#cb94-395" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-396"><a href="#cb94-396" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-397"><a href="#cb94-397" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(rideable_type) <span class="sc">|&gt;</span></span>
<span id="cb94-398"><a href="#cb94-398" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(rideable_type) <span class="sc">|&gt;</span></span>
<span id="cb94-399"><a href="#cb94-399" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-400"><a href="#cb94-400" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-401"><a href="#cb94-401" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-402"><a href="#cb94-402" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_rTypes.db"</span>,</span>
<span id="cb94-403"><a href="#cb94-403" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-404"><a href="#cb94-404" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-405"><a href="#cb94-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-406"><a href="#cb94-406" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-407"><a href="#cb94-407" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_rTypes.db"</span>)</span>
<span id="cb94-408"><a href="#cb94-408" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-409"><a href="#cb94-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-410"><a href="#cb94-410" aria-hidden="true" tabindex="-1"></a>This tells us that there are nearly twice as many trips taken with non-electric bikes as electric bikes. There are differences in cost for casual members, so that might be one determining factor. Also, perhaps the associated health benefits with exercise would help explain higher non-electric bicycle use.</span>
<span id="cb94-411"><a href="#cb94-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-414"><a href="#cb94-414" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-415"><a href="#cb94-415" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span>
<span id="cb94-416"><a href="#cb94-416" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-417"><a href="#cb94-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-420"><a href="#cb94-420" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-421"><a href="#cb94-421" aria-hidden="true" tabindex="-1"></a><span class="co"># Miles</span></span>
<span id="cb94-422"><a href="#cb94-422" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-423"><a href="#cb94-423" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-424"><a href="#cb94-424" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-425"><a href="#cb94-425" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(miles) <span class="sc">|&gt;</span></span>
<span id="cb94-426"><a href="#cb94-426" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-427"><a href="#cb94-427" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">miles =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(miles <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="fu">round</span>(miles,</span>
<span id="cb94-428"><a href="#cb94-428" aria-hidden="true" tabindex="-1"></a>                                                              <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb94-429"><a href="#cb94-429" aria-hidden="true" tabindex="-1"></a>                                           miles <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="fu">round</span>(<span class="fu">signif</span>(miles, <span class="dv">3</span>),</span>
<span id="cb94-430"><a href="#cb94-430" aria-hidden="true" tabindex="-1"></a>                                                             <span class="at">digits =</span> <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb94-431"><a href="#cb94-431" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(miles) <span class="sc">|&gt;</span></span>
<span id="cb94-432"><a href="#cb94-432" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-433"><a href="#cb94-433" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(miles) <span class="sc">|&gt;</span></span>
<span id="cb94-434"><a href="#cb94-434" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-435"><a href="#cb94-435" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_miles.db"</span>,</span>
<span id="cb94-436"><a href="#cb94-436" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-437"><a href="#cb94-437" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-438"><a href="#cb94-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-439"><a href="#cb94-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-440"><a href="#cb94-440" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-441"><a href="#cb94-441" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_miles.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-442"><a href="#cb94-442" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb94-443"><a href="#cb94-443" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb94-444"><a href="#cb94-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-445"><a href="#cb94-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-448"><a href="#cb94-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-449"><a href="#cb94-449" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-450"><a href="#cb94-450" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_miles.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-451"><a href="#cb94-451" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-452"><a href="#cb94-452" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n =</span> n<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-453"><a href="#cb94-453" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"Trips (in thousands)"</span> <span class="ot">=</span> n,</span>
<span id="cb94-454"><a href="#cb94-454" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Miles"</span> <span class="ot">=</span> miles) <span class="sc">|&gt;</span></span>
<span id="cb94-455"><a href="#cb94-455" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span>
<span id="cb94-456"><a href="#cb94-456" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-457"><a href="#cb94-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-458"><a href="#cb94-458" aria-hidden="true" tabindex="-1"></a>This shows that around 0.3 to 3 miles is the distance traveled on most trips taken. The fact that casual bicycles are used more often perhaps makes a little more sense given that people are not traveling long distances.</span>
<span id="cb94-459"><a href="#cb94-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-462"><a href="#cb94-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-463"><a href="#cb94-463" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span>
<span id="cb94-464"><a href="#cb94-464" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-465"><a href="#cb94-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-468"><a href="#cb94-468" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-469"><a href="#cb94-469" aria-hidden="true" tabindex="-1"></a><span class="co"># MPH</span></span>
<span id="cb94-470"><a href="#cb94-470" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-471"><a href="#cb94-471" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-472"><a href="#cb94-472" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-473"><a href="#cb94-473" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(mph) <span class="sc">|&gt;</span></span>
<span id="cb94-474"><a href="#cb94-474" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">mph =</span> <span class="fu">round</span>(mph, <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-475"><a href="#cb94-475" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(mph) <span class="sc">|&gt;</span></span>
<span id="cb94-476"><a href="#cb94-476" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-477"><a href="#cb94-477" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-478"><a href="#cb94-478" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(mph) <span class="sc">|&gt;</span></span>
<span id="cb94-479"><a href="#cb94-479" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-480"><a href="#cb94-480" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_mph.db"</span>,</span>
<span id="cb94-481"><a href="#cb94-481" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-482"><a href="#cb94-482" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-483"><a href="#cb94-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-484"><a href="#cb94-484" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-485"><a href="#cb94-485" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_mph.db"</span>)</span>
<span id="cb94-486"><a href="#cb94-486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-487"><a href="#cb94-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-490"><a href="#cb94-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-491"><a href="#cb94-491" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-492"><a href="#cb94-492" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_mph.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-493"><a href="#cb94-493" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-494"><a href="#cb94-494" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span>
<span id="cb94-495"><a href="#cb94-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-496"><a href="#cb94-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-497"><a href="#cb94-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-498"><a href="#cb94-498" aria-hidden="true" tabindex="-1"></a>The most common overall mph for trips fall in between 2-11 mph. This is what we might expect for city travel.</span>
<span id="cb94-499"><a href="#cb94-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-502"><a href="#cb94-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-503"><a href="#cb94-503" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbListTables</span>(dbconn)</span>
<span id="cb94-504"><a href="#cb94-504" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-505"><a href="#cb94-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-508"><a href="#cb94-508" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-509"><a href="#cb94-509" aria-hidden="true" tabindex="-1"></a><span class="co"># WkDay</span></span>
<span id="cb94-510"><a href="#cb94-510" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-511"><a href="#cb94-511" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-512"><a href="#cb94-512" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-513"><a href="#cb94-513" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-514"><a href="#cb94-514" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">wkday =</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb94-515"><a href="#cb94-515" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(wkday) <span class="sc">|&gt;</span></span>
<span id="cb94-516"><a href="#cb94-516" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-517"><a href="#cb94-517" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(wkday) <span class="sc">|&gt;</span></span>
<span id="cb94-518"><a href="#cb94-518" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-519"><a href="#cb94-519" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">wkday =</span> <span class="fu">c</span>(<span class="st">"Sun"</span>,</span>
<span id="cb94-520"><a href="#cb94-520" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Mon"</span>,</span>
<span id="cb94-521"><a href="#cb94-521" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Tue"</span>,</span>
<span id="cb94-522"><a href="#cb94-522" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Wed"</span>,</span>
<span id="cb94-523"><a href="#cb94-523" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Thu"</span>,</span>
<span id="cb94-524"><a href="#cb94-524" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Fri"</span>,</span>
<span id="cb94-525"><a href="#cb94-525" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Sat"</span>),</span>
<span id="cb94-526"><a href="#cb94-526" aria-hidden="true" tabindex="-1"></a>                  <span class="at">wkday =</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(wkday),</span>
<span id="cb94-527"><a href="#cb94-527" aria-hidden="true" tabindex="-1"></a>                  <span class="at">wkday =</span> forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(wkday)) <span class="sc">|&gt;</span></span>
<span id="cb94-528"><a href="#cb94-528" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-529"><a href="#cb94-529" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_wkDay.db"</span>,</span>
<span id="cb94-530"><a href="#cb94-530" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-531"><a href="#cb94-531" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-532"><a href="#cb94-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-533"><a href="#cb94-533" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-534"><a href="#cb94-534" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_wkday.db"</span>) </span>
<span id="cb94-535"><a href="#cb94-535" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-536"><a href="#cb94-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-539"><a href="#cb94-539" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-540"><a href="#cb94-540" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-541"><a href="#cb94-541" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_wkday.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-542"><a href="#cb94-542" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-543"><a href="#cb94-543" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span>
<span id="cb94-544"><a href="#cb94-544" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-545"><a href="#cb94-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-546"><a href="#cb94-546" aria-hidden="true" tabindex="-1"></a>There is a slight reduction in trips taken on Sundays and Mondays. This could be explained by the fact that most trips are taken by annual subscribers, possibly because they are biking to work and such. Much less people will be biking to work on Sundays. Taking 3-day weekends is common in the workplace, where most would likely opt to use up their sick/vacation days on Monday, which might explain the down tick in trips taken on Mondays. Also, those who are working Tuesdays-Saturdays could be taking Sunday and Mondays off.</span>
<span id="cb94-547"><a href="#cb94-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-550"><a href="#cb94-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-551"><a href="#cb94-551" aria-hidden="true" tabindex="-1"></a><span class="co"># Months</span></span>
<span id="cb94-552"><a href="#cb94-552" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-553"><a href="#cb94-553" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-554"><a href="#cb94-554" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-555"><a href="#cb94-555" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-556"><a href="#cb94-556" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">months =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(started_at,</span>
<span id="cb94-557"><a href="#cb94-557" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">label =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-558"><a href="#cb94-558" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">abbr =</span> <span class="cn">TRUE</span></span>
<span id="cb94-559"><a href="#cb94-559" aria-hidden="true" tabindex="-1"></a>                                            )) <span class="sc">|&gt;</span></span>
<span id="cb94-560"><a href="#cb94-560" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(months) <span class="sc">|&gt;</span></span>
<span id="cb94-561"><a href="#cb94-561" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-562"><a href="#cb94-562" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-563"><a href="#cb94-563" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(months) <span class="sc">|&gt;</span></span>
<span id="cb94-564"><a href="#cb94-564" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">months =</span> <span class="fu">c</span>(month.abb),</span>
<span id="cb94-565"><a href="#cb94-565" aria-hidden="true" tabindex="-1"></a>                  <span class="at">months =</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(months),</span>
<span id="cb94-566"><a href="#cb94-566" aria-hidden="true" tabindex="-1"></a>                  <span class="at">months =</span> forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(months)) <span class="sc">|&gt;</span></span>
<span id="cb94-567"><a href="#cb94-567" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-568"><a href="#cb94-568" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_month.db"</span>,</span>
<span id="cb94-569"><a href="#cb94-569" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-570"><a href="#cb94-570" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-571"><a href="#cb94-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-572"><a href="#cb94-572" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-573"><a href="#cb94-573" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_month.db"</span>)</span>
<span id="cb94-574"><a href="#cb94-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-575"><a href="#cb94-575" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-576"><a href="#cb94-576" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_month.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-577"><a href="#cb94-577" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">sum =</span> <span class="fu">sum</span>(n))</span>
<span id="cb94-578"><a href="#cb94-578" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-579"><a href="#cb94-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-582"><a href="#cb94-582" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-583"><a href="#cb94-583" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-584"><a href="#cb94-584" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_month.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-585"><a href="#cb94-585" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-586"><a href="#cb94-586" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span>
<span id="cb94-587"><a href="#cb94-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-588"><a href="#cb94-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-589"><a href="#cb94-589" aria-hidden="true" tabindex="-1"></a>The monthly ridership does differ substantially between certain months. Summer months (relative to North America) is when we see the largest increase in ridership. Spring and Fall seasons lie in between Summer and Winter in terms of scale of trips taken</span>
<span id="cb94-590"><a href="#cb94-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-593"><a href="#cb94-593" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-594"><a href="#cb94-594" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-595"><a href="#cb94-595" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-596"><a href="#cb94-596" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">trip_time =</span> <span class="fu">round</span>(trip_time,</span>
<span id="cb94-597"><a href="#cb94-597" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-598"><a href="#cb94-598" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(trip_time) <span class="sc">|&gt;</span></span>
<span id="cb94-599"><a href="#cb94-599" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-600"><a href="#cb94-600" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(trip_time) <span class="sc">|&gt;</span></span>
<span id="cb94-601"><a href="#cb94-601" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-602"><a href="#cb94-602" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-603"><a href="#cb94-603" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_tripTime.db"</span>,</span>
<span id="cb94-604"><a href="#cb94-604" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-605"><a href="#cb94-605" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-606"><a href="#cb94-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-607"><a href="#cb94-607" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-608"><a href="#cb94-608" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_tripTime.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-609"><a href="#cb94-609" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-610"><a href="#cb94-610" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb94-611"><a href="#cb94-611" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">20</span>)</span>
<span id="cb94-612"><a href="#cb94-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-613"><a href="#cb94-613" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-614"><a href="#cb94-614" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_tripTime.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-615"><a href="#cb94-615" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">sum =</span> <span class="fu">sum</span>(n))</span>
<span id="cb94-616"><a href="#cb94-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-617"><a href="#cb94-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-618"><a href="#cb94-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-619"><a href="#cb94-619" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-620"><a href="#cb94-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-623"><a href="#cb94-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-624"><a href="#cb94-624" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-625"><a href="#cb94-625" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_tripTime.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-626"><a href="#cb94-626" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-627"><a href="#cb94-627" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>()</span>
<span id="cb94-628"><a href="#cb94-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-629"><a href="#cb94-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-630"><a href="#cb94-630" aria-hidden="true" tabindex="-1"></a>The time riders are usually spending on these trips lies in between 5-15 minutes.</span>
<span id="cb94-631"><a href="#cb94-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-634"><a href="#cb94-634" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-635"><a href="#cb94-635" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-636"><a href="#cb94-636" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-637"><a href="#cb94-637" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-638"><a href="#cb94-638" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-639"><a href="#cb94-639" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-640"><a href="#cb94-640" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-641"><a href="#cb94-641" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-642"><a href="#cb94-642" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-643"><a href="#cb94-643" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_startNames.db"</span>,</span>
<span id="cb94-644"><a href="#cb94-644" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-645"><a href="#cb94-645" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-646"><a href="#cb94-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-647"><a href="#cb94-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-648"><a href="#cb94-648" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-649"><a href="#cb94-649" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_startNames.db"</span>)</span>
<span id="cb94-650"><a href="#cb94-650" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-651"><a href="#cb94-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-654"><a href="#cb94-654" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-655"><a href="#cb94-655" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-656"><a href="#cb94-656" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-657"><a href="#cb94-657" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name,</span>
<span id="cb94-658"><a href="#cb94-658" aria-hidden="true" tabindex="-1"></a>                  end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-659"><a href="#cb94-659" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name,</span>
<span id="cb94-660"><a href="#cb94-660" aria-hidden="true" tabindex="-1"></a>                    end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-661"><a href="#cb94-661" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-662"><a href="#cb94-662" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-663"><a href="#cb94-663" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-664"><a href="#cb94-664" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-665"><a href="#cb94-665" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/freq_pairStations.db"</span>,</span>
<span id="cb94-666"><a href="#cb94-666" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-667"><a href="#cb94-667" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-668"><a href="#cb94-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-669"><a href="#cb94-669" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-670"><a href="#cb94-670" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_pairStations.db"</span>)</span>
<span id="cb94-671"><a href="#cb94-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-672"><a href="#cb94-672" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-673"><a href="#cb94-673" aria-hidden="true" tabindex="-1"></a>           <span class="st">"db/freq_pairStations.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-674"><a href="#cb94-674" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">sum =</span> <span class="fu">sum</span>(n))</span>
<span id="cb94-675"><a href="#cb94-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-676"><a href="#cb94-676" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-677"><a href="#cb94-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-680"><a href="#cb94-680" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-681"><a href="#cb94-681" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-682"><a href="#cb94-682" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd)</span>
<span id="cb94-683"><a href="#cb94-683" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-684"><a href="#cb94-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-687"><a href="#cb94-687" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-688"><a href="#cb94-688" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'rider count by hour table'</span></span>
<span id="cb94-689"><a href="#cb94-689" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-690"><a href="#cb94-690" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-691"><a href="#cb94-691" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-692"><a href="#cb94-692" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-693"><a href="#cb94-693" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"hour"</span> <span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">hour</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb94-694"><a href="#cb94-694" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(hour) <span class="sc">|&gt;</span></span>
<span id="cb94-695"><a href="#cb94-695" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="st">"Total_Riders"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="co">#or count?</span></span>
<span id="cb94-696"><a href="#cb94-696" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(hour) <span class="sc">|&gt;</span></span>
<span id="cb94-697"><a href="#cb94-697" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-698"><a href="#cb94-698" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"hour"</span> <span class="ot">=</span> hms<span class="sc">::</span><span class="fu">hms</span>(<span class="at">hours =</span> hour),</span>
<span id="cb94-699"><a href="#cb94-699" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"hour"</span> <span class="ot">=</span> <span class="fu">format</span>(<span class="fu">strptime</span>(hour, <span class="at">format =</span> <span class="st">"%H"</span>), <span class="st">"%r"</span>),</span>
<span id="cb94-700"><a href="#cb94-700" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"index"</span> <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-701"><a href="#cb94-701" aria-hidden="true" tabindex="-1"></a>    duckdb<span class="sc">::</span><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> dbconn,</span>
<span id="cb94-702"><a href="#cb94-702" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">"db/rideHours.db"</span>,</span>
<span id="cb94-703"><a href="#cb94-703" aria-hidden="true" tabindex="-1"></a>                         <span class="at">check_from =</span> <span class="cn">FALSE</span>,</span>
<span id="cb94-704"><a href="#cb94-704" aria-hidden="true" tabindex="-1"></a>                         <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-705"><a href="#cb94-705" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-706"><a href="#cb94-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-709"><a href="#cb94-709" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-710"><a href="#cb94-710" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb94-711"><a href="#cb94-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-712"><a href="#cb94-712" aria-hidden="true" tabindex="-1"></a>hours_of_Riders <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-713"><a href="#cb94-713" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"db/rideHours.db"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-714"><a href="#cb94-714" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb94-715"><a href="#cb94-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-716"><a href="#cb94-716" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span></span>
<span id="cb94-717"><a href="#cb94-717" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_sub_all</span>(hours_of_Riders[[<span class="dv">1</span>]],</span>
<span id="cb94-718"><a href="#cb94-718" aria-hidden="true" tabindex="-1"></a>                         <span class="at">start =</span> <span class="dv">1</span>,</span>
<span id="cb94-719"><a href="#cb94-719" aria-hidden="true" tabindex="-1"></a>                         <span class="at">end =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-720"><a href="#cb94-720" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-721"><a href="#cb94-721" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">"^0"</span>)</span>
<span id="cb94-722"><a href="#cb94-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-723"><a href="#cb94-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-724"><a href="#cb94-724" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_sub</span>(hours_of_Riders[[<span class="dv">1</span>]],</span>
<span id="cb94-725"><a href="#cb94-725" aria-hidden="true" tabindex="-1"></a>                      <span class="at">start =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb94-726"><a href="#cb94-726" aria-hidden="true" tabindex="-1"></a>                      <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-727"><a href="#cb94-727" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_to_lower</span>()</span>
<span id="cb94-728"><a href="#cb94-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-729"><a href="#cb94-729" aria-hidden="true" tabindex="-1"></a>simpleTimes <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(x, <span class="at">sep =</span> <span class="st">" "</span>, y)</span>
<span id="cb94-730"><a href="#cb94-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-731"><a href="#cb94-731" aria-hidden="true" tabindex="-1"></a>hours_of_Riders[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> simpleTimes</span>
<span id="cb94-732"><a href="#cb94-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-733"><a href="#cb94-733" aria-hidden="true" tabindex="-1"></a>hours_of_Riders</span>
<span id="cb94-734"><a href="#cb94-734" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-735"><a href="#cb94-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-736"><a href="#cb94-736" aria-hidden="true" tabindex="-1"></a>::: column-page</span>
<span id="cb94-739"><a href="#cb94-739" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-740"><a href="#cb94-740" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: 'radial-column plot'</span></span>
<span id="cb94-741"><a href="#cb94-741" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-column: page</span></span>
<span id="cb94-742"><a href="#cb94-742" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "The time of day people tend to be riding."</span></span>
<span id="cb94-743"><a href="#cb94-743" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap-location: bottom</span></span>
<span id="cb94-744"><a href="#cb94-744" aria-hidden="true" tabindex="-1"></a><span class="co">#| title: "Time of Day and Volume of Cyclers"</span></span>
<span id="cb94-745"><a href="#cb94-745" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 15</span></span>
<span id="cb94-746"><a href="#cb94-746" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 12</span></span>
<span id="cb94-747"><a href="#cb94-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-748"><a href="#cb94-748" aria-hidden="true" tabindex="-1"></a>hoursAnimate <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data =</span> hours_of_Riders,</span>
<span id="cb94-749"><a href="#cb94-749" aria-hidden="true" tabindex="-1"></a>                <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(</span>
<span id="cb94-750"><a href="#cb94-750" aria-hidden="true" tabindex="-1"></a>                    <span class="at">x =</span> <span class="fu">reorder</span>(hour, .data<span class="sc">$</span>index),</span>
<span id="cb94-751"><a href="#cb94-751" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> Total_Riders,</span>
<span id="cb94-752"><a href="#cb94-752" aria-hidden="true" tabindex="-1"></a>                    <span class="at">fill =</span> Total_Riders)) <span class="sc">+</span></span>
<span id="cb94-753"><a href="#cb94-753" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb94-754"><a href="#cb94-754" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">coord_radial</span>(<span class="at">start =</span> <span class="dv">2</span> <span class="sc">*</span> pi,</span>
<span id="cb94-755"><a href="#cb94-755" aria-hidden="true" tabindex="-1"></a>                          <span class="at">inner.radius =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb94-756"><a href="#cb94-756" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">xlab</span>(<span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb94-757"><a href="#cb94-757" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ylab</span>(<span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb94-758"><a href="#cb94-758" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>,</span>
<span id="cb94-759"><a href="#cb94-759" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb94-760"><a href="#cb94-760" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb94-761"><a href="#cb94-761" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Average Riders by the Hour of Day"</span>,</span>
<span id="cb94-762"><a href="#cb94-762" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"(Jan-Dec 2023)"</span>,</span>
<span id="cb94-763"><a href="#cb94-763" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Data from cyclistic database."</span>,</span>
<span id="cb94-764"><a href="#cb94-764" aria-hidden="true" tabindex="-1"></a>        <span class="at">tag =</span> <span class="st">"Figure 1.c"</span></span>
<span id="cb94-765"><a href="#cb94-765" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb94-766"><a href="#cb94-766" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb94-767"><a href="#cb94-767" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(</span>
<span id="cb94-768"><a href="#cb94-768" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb94-769"><a href="#cb94-769" aria-hidden="true" tabindex="-1"></a>            <span class="at">lineheight =</span> <span class="dv">4</span>,</span>
<span id="cb94-770"><a href="#cb94-770" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span></span>
<span id="cb94-771"><a href="#cb94-771" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb94-772"><a href="#cb94-772" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-773"><a href="#cb94-773" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="cb94-774"><a href="#cb94-774" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-775"><a href="#cb94-775" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb94-776"><a href="#cb94-776" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>,</span>
<span id="cb94-777"><a href="#cb94-777" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">color =</span> <span class="st">'grey10'</span>),</span>
<span id="cb94-778"><a href="#cb94-778" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb94-779"><a href="#cb94-779" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-780"><a href="#cb94-780" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-781"><a href="#cb94-781" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb94-782"><a href="#cb94-782" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-783"><a href="#cb94-783" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(</span>
<span id="cb94-784"><a href="#cb94-784" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">1</span>,</span>
<span id="cb94-785"><a href="#cb94-785" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'grey10'</span>,</span>
<span id="cb94-786"><a href="#cb94-786" aria-hidden="true" tabindex="-1"></a>            <span class="at">arrow =</span> ggplot2<span class="sc">::</span><span class="fu">arrow</span>()</span>
<span id="cb94-787"><a href="#cb94-787" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb94-788"><a href="#cb94-788" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-789"><a href="#cb94-789" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb94-790"><a href="#cb94-790" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-791"><a href="#cb94-791" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(</span>
<span id="cb94-792"><a href="#cb94-792" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">18</span>,</span>
<span id="cb94-793"><a href="#cb94-793" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"grey90"</span>,</span>
<span id="cb94-794"><a href="#cb94-794" aria-hidden="true" tabindex="-1"></a>            <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb94-795"><a href="#cb94-795" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb94-796"><a href="#cb94-796" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb94-797"><a href="#cb94-797" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb94-798"><a href="#cb94-798" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> ggplot2<span class="sc">::</span><span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb94-799"><a href="#cb94-799" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.ticks =</span> ggplot2<span class="sc">::</span><span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb94-800"><a href="#cb94-800" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">linewidth =</span> .<span class="dv">5</span>),</span>
<span id="cb94-801"><a href="#cb94-801" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">'grey80'</span>,</span>
<span id="cb94-802"><a href="#cb94-802" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb94-803"><a href="#cb94-803" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb94-804"><a href="#cb94-804" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,</span>
<span id="cb94-805"><a href="#cb94-805" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb94-806"><a href="#cb94-806" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.size =</span> grid<span class="sc">::</span><span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"cm"</span>)</span>
<span id="cb94-807"><a href="#cb94-807" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb94-808"><a href="#cb94-808" aria-hidden="true" tabindex="-1"></a>    gganimate<span class="sc">::</span><span class="fu">transition_reveal</span>(<span class="at">along =</span> <span class="fu">seq</span>(<span class="fu">length</span>(hour)))</span>
<span id="cb94-809"><a href="#cb94-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-810"><a href="#cb94-810" aria-hidden="true" tabindex="-1"></a>my_anim <span class="ot">&lt;-</span> gganimate<span class="sc">::</span><span class="fu">animate</span>(hoursAnimate,</span>
<span id="cb94-811"><a href="#cb94-811" aria-hidden="true" tabindex="-1"></a>                             <span class="at">renderer =</span> gganimate<span class="sc">::</span><span class="fu">gifski_renderer</span>())</span>
<span id="cb94-812"><a href="#cb94-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-813"><a href="#cb94-813" aria-hidden="true" tabindex="-1"></a>my_anim</span>
<span id="cb94-814"><a href="#cb94-814" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-815"><a href="#cb94-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-816"><a href="#cb94-816" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-817"><a href="#cb94-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-818"><a href="#cb94-818" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-819"><a href="#cb94-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-820"><a href="#cb94-820" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Modeling</span></span>
<span id="cb94-821"><a href="#cb94-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-822"><a href="#cb94-822" aria-hidden="true" tabindex="-1"></a>**Non-parametric descriptive:**</span>
<span id="cb94-823"><a href="#cb94-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-824"><a href="#cb94-824" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>median, interquartile-range (IQR)</span>
<span id="cb94-825"><a href="#cb94-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-826"><a href="#cb94-826" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Semi-parametric and non-parametric** methods</span></span>
<span id="cb94-827"><a href="#cb94-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-828"><a href="#cb94-828" aria-hidden="true" tabindex="-1"></a>**Description**</span>
<span id="cb94-829"><a href="#cb94-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-830"><a href="#cb94-830" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>To predict the outcome variable using independent variables</span>
<span id="cb94-831"><a href="#cb94-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-832"><a href="#cb94-832" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>outcome variable(s) to test</span>
<span id="cb94-833"><a href="#cb94-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-834"><a href="#cb94-834" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>member_casual</span>
<span id="cb94-835"><a href="#cb94-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-836"><a href="#cb94-836" aria-hidden="true" tabindex="-1"></a>**Statistical methods**</span>
<span id="cb94-837"><a href="#cb94-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-838"><a href="#cb94-838" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Binary Logistic regression analysis</span>
<span id="cb94-839"><a href="#cb94-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-840"><a href="#cb94-840" aria-hidden="true" tabindex="-1"></a>**Data type**</span>
<span id="cb94-841"><a href="#cb94-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-842"><a href="#cb94-842" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Outcome variable:</span>
<span id="cb94-843"><a href="#cb94-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-844"><a href="#cb94-844" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Categorical (<span class="sc">\&gt;</span>= 2 categories)</span>
<span id="cb94-845"><a href="#cb94-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-846"><a href="#cb94-846" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>member_casual</span>
<span id="cb94-847"><a href="#cb94-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-848"><a href="#cb94-848" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>rideable_type</span>
<span id="cb94-849"><a href="#cb94-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-850"><a href="#cb94-850" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Independent variable(s):</span>
<span id="cb94-851"><a href="#cb94-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-852"><a href="#cb94-852" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Categorical (<span class="sc">\&gt;</span>= 2 categories) or</span>
<span id="cb94-853"><a href="#cb94-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-854"><a href="#cb94-854" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>hour</span>
<span id="cb94-855"><a href="#cb94-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-856"><a href="#cb94-856" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>24 categories</span>
<span id="cb94-857"><a href="#cb94-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-858"><a href="#cb94-858" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>day_of_week</span>
<span id="cb94-859"><a href="#cb94-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-860"><a href="#cb94-860" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>7 categories</span>
<span id="cb94-861"><a href="#cb94-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-862"><a href="#cb94-862" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>month</span>
<span id="cb94-863"><a href="#cb94-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-864"><a href="#cb94-864" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>12 categories</span>
<span id="cb94-865"><a href="#cb94-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-866"><a href="#cb94-866" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>holiday</span>
<span id="cb94-867"><a href="#cb94-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-868"><a href="#cb94-868" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>2 categories (yes or no?)</span>
<span id="cb94-869"><a href="#cb94-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-870"><a href="#cb94-870" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>member_casual</span>
<span id="cb94-871"><a href="#cb94-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-872"><a href="#cb94-872" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>2 categories</span>
<span id="cb94-873"><a href="#cb94-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-874"><a href="#cb94-874" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>rideable_type</span>
<span id="cb94-875"><a href="#cb94-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-876"><a href="#cb94-876" aria-hidden="true" tabindex="-1"></a><span class="ss">            -   </span>2 categories</span>
<span id="cb94-877"><a href="#cb94-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-878"><a href="#cb94-878" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Continuous or</span>
<span id="cb94-879"><a href="#cb94-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-880"><a href="#cb94-880" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>trip_time</span>
<span id="cb94-881"><a href="#cb94-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-882"><a href="#cb94-882" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>mph</span>
<span id="cb94-883"><a href="#cb94-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-884"><a href="#cb94-884" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>miles</span>
<span id="cb94-885"><a href="#cb94-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-886"><a href="#cb94-886" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>geospatial location</span>
<span id="cb94-887"><a href="#cb94-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-888"><a href="#cb94-888" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>both</span>
<span id="cb94-889"><a href="#cb94-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-890"><a href="#cb94-890" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>member_causal</span>
<span id="cb94-891"><a href="#cb94-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-892"><a href="#cb94-892" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>rideable_type</span>
<span id="cb94-893"><a href="#cb94-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-894"><a href="#cb94-894" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>hour</span>
<span id="cb94-895"><a href="#cb94-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-896"><a href="#cb94-896" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>day</span>
<span id="cb94-897"><a href="#cb94-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-898"><a href="#cb94-898" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>trip_time</span>
<span id="cb94-899"><a href="#cb94-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-900"><a href="#cb94-900" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>mph</span>
<span id="cb94-901"><a href="#cb94-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-902"><a href="#cb94-902" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>miles</span>
<span id="cb94-903"><a href="#cb94-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-904"><a href="#cb94-904" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>geospatial location</span>
<span id="cb94-905"><a href="#cb94-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-906"><a href="#cb94-906" aria-hidden="true" tabindex="-1"></a>\</span>
<span id="cb94-907"><a href="#cb94-907" aria-hidden="true" tabindex="-1"></a>Mean <span class="sc">\&gt;</span> Median</span>
<span id="cb94-908"><a href="#cb94-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-909"><a href="#cb94-909" aria-hidden="true" tabindex="-1"></a>**"Right-Skewed Histogram"**\</span>
<span id="cb94-910"><a href="#cb94-910" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The right side of the histogram plot has lower frequencies than the left.</span>
<span id="cb94-911"><a href="#cb94-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-912"><a href="#cb94-912" aria-hidden="true" tabindex="-1"></a>Unimodal</span>
<span id="cb94-913"><a href="#cb94-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-916"><a href="#cb94-916" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-917"><a href="#cb94-917" aria-hidden="true" tabindex="-1"></a>latsTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-918"><a href="#cb94-918" aria-hidden="true" tabindex="-1"></a>                        tblPath_fltrd,</span>
<span id="cb94-919"><a href="#cb94-919" aria-hidden="true" tabindex="-1"></a>                        <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-920"><a href="#cb94-920" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-921"><a href="#cb94-921" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-922"><a href="#cb94-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-923"><a href="#cb94-923" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb94-924"><a href="#cb94-924" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb94-925"><a href="#cb94-925" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">signif</span>(start_lat, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb94-926"><a href="#cb94-926" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-927"><a href="#cb94-927" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-928"><a href="#cb94-928" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb94-929"><a href="#cb94-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-930"><a href="#cb94-930" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-931"><a href="#cb94-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-934"><a href="#cb94-934" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-935"><a href="#cb94-935" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb94-936"><a href="#cb94-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-937"><a href="#cb94-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-938"><a href="#cb94-938" aria-hidden="true" tabindex="-1"></a>longsTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-939"><a href="#cb94-939" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd,</span>
<span id="cb94-940"><a href="#cb94-940" aria-hidden="true" tabindex="-1"></a>                       <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-941"><a href="#cb94-941" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-942"><a href="#cb94-942" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-943"><a href="#cb94-943" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb94-944"><a href="#cb94-944" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb94-945"><a href="#cb94-945" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lng =</span> <span class="fu">signif</span>(start_lng, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb94-946"><a href="#cb94-946" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-947"><a href="#cb94-947" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-948"><a href="#cb94-948" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb94-949"><a href="#cb94-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-950"><a href="#cb94-950" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-951"><a href="#cb94-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-954"><a href="#cb94-954" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-955"><a href="#cb94-955" aria-hidden="true" tabindex="-1"></a>latlngTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-956"><a href="#cb94-956" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd,</span>
<span id="cb94-957"><a href="#cb94-957" aria-hidden="true" tabindex="-1"></a>                       <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-958"><a href="#cb94-958" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-959"><a href="#cb94-959" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb94-960"><a href="#cb94-960" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb94-961"><a href="#cb94-961" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-962"><a href="#cb94-962" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">round</span>(start_lat, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb94-963"><a href="#cb94-963" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">round</span>(start_lng, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb94-964"><a href="#cb94-964" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-965"><a href="#cb94-965" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-966"><a href="#cb94-966" aria-hidden="true" tabindex="-1"></a>    <span class="co">#dplyr::collect() |&gt;</span></span>
<span id="cb94-967"><a href="#cb94-967" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-968"><a href="#cb94-968" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb94-969"><a href="#cb94-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-970"><a href="#cb94-970" aria-hidden="true" tabindex="-1"></a>latlngTable <span class="sc">|&gt;</span></span>
<span id="cb94-971"><a href="#cb94-971" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb94-972"><a href="#cb94-972" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-973"><a href="#cb94-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-976"><a href="#cb94-976" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-977"><a href="#cb94-977" aria-hidden="true" tabindex="-1"></a><span class="co"># Trying to get clues as to how we should alter the table. </span></span>
<span id="cb94-978"><a href="#cb94-978" aria-hidden="true" tabindex="-1"></a>coordsTable <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-979"><a href="#cb94-979" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd,</span>
<span id="cb94-980"><a href="#cb94-980" aria-hidden="true" tabindex="-1"></a>                       <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-981"><a href="#cb94-981" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat, </span>
<span id="cb94-982"><a href="#cb94-982" aria-hidden="true" tabindex="-1"></a>                  start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-983"><a href="#cb94-983" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb94-984"><a href="#cb94-984" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb94-985"><a href="#cb94-985" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dplyr::filter(start_lat, signif(start_lat, digits = 7) == TRUE) |&gt;</span></span>
<span id="cb94-986"><a href="#cb94-986" aria-hidden="true" tabindex="-1"></a>    <span class="co">#dplyr::collect() |&gt;</span></span>
<span id="cb94-987"><a href="#cb94-987" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">as.character</span>(start_lat),</span>
<span id="cb94-988"><a href="#cb94-988" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">as.character</span>(start_lng),</span>
<span id="cb94-989"><a href="#cb94-989" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-990"><a href="#cb94-990" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lat) <span class="sc">&gt;=</span> <span class="dv">8</span>,</span>
<span id="cb94-991"><a href="#cb94-991" aria-hidden="true" tabindex="-1"></a>                  <span class="co"># 9 to account for negative symbol in lng</span></span>
<span id="cb94-992"><a href="#cb94-992" aria-hidden="true" tabindex="-1"></a>                  stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lng) <span class="sc">&gt;=</span> <span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-993"><a href="#cb94-993" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_lat, </span>
<span id="cb94-994"><a href="#cb94-994" aria-hidden="true" tabindex="-1"></a>                    start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-995"><a href="#cb94-995" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-996"><a href="#cb94-996" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb94-997"><a href="#cb94-997" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-998"><a href="#cb94-998" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb94-999"><a href="#cb94-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1000"><a href="#cb94-1000" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1001"><a href="#cb94-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1004"><a href="#cb94-1004" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1005"><a href="#cb94-1005" aria-hidden="true" tabindex="-1"></a><span class="co"># Trying to get clues as to how we should alter the table. </span></span>
<span id="cb94-1006"><a href="#cb94-1006" aria-hidden="true" tabindex="-1"></a>coordsTable2 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1007"><a href="#cb94-1007" aria-hidden="true" tabindex="-1"></a>                           tblPath_fltrd,</span>
<span id="cb94-1008"><a href="#cb94-1008" aria-hidden="true" tabindex="-1"></a>                           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1009"><a href="#cb94-1009" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-1010"><a href="#cb94-1010" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because 5 digits after decimal place gives down to 1.1m accuracy</span></span>
<span id="cb94-1011"><a href="#cb94-1011" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4 digits are accurate up to 11m</span></span>
<span id="cb94-1012"><a href="#cb94-1012" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">start_lat =</span> <span class="fu">round</span>(start_lat, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb94-1013"><a href="#cb94-1013" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">round</span>(start_lng, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb94-1014"><a href="#cb94-1014" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lat =</span> <span class="fu">as.character</span>(start_lat),</span>
<span id="cb94-1015"><a href="#cb94-1015" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_lng =</span> <span class="fu">as.character</span>(start_lng),</span>
<span id="cb94-1016"><a href="#cb94-1016" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.keep =</span> <span class="st">"none"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1017"><a href="#cb94-1017" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lat) <span class="sc">&gt;=</span> <span class="dv">8</span>,</span>
<span id="cb94-1018"><a href="#cb94-1018" aria-hidden="true" tabindex="-1"></a>                  stringr<span class="sc">::</span><span class="fu">str_length</span>(start_lng) <span class="sc">&gt;=</span> <span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1019"><a href="#cb94-1019" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_lat, start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-1020"><a href="#cb94-1020" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-1021"><a href="#cb94-1021" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  dplyr::filter(n &gt;= 47) |&gt;</span></span>
<span id="cb94-1022"><a href="#cb94-1022" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(n) <span class="sc">|&gt;</span></span>
<span id="cb94-1023"><a href="#cb94-1023" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1024"><a href="#cb94-1024" aria-hidden="true" tabindex="-1"></a>    <span class="co"># seems base R's table() is a lot slower than dplyr</span></span>
<span id="cb94-1025"><a href="#cb94-1025" aria-hidden="true" tabindex="-1"></a>    <span class="co">#table() |&gt;</span></span>
<span id="cb94-1026"><a href="#cb94-1026" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb94-1027"><a href="#cb94-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1028"><a href="#cb94-1028" aria-hidden="true" tabindex="-1"></a>coordsTable2 <span class="sc">|&gt;</span></span>
<span id="cb94-1029"><a href="#cb94-1029" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb94-1030"><a href="#cb94-1030" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1031"><a href="#cb94-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1032"><a href="#cb94-1032" aria-hidden="true" tabindex="-1"></a>Assuming their plans to expand the "over 800 stations" by 250, I'd like to set the parameters to achieve around \~1050 rows. So I set n to include groups with at least 47 riders.</span>
<span id="cb94-1033"><a href="#cb94-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1036"><a href="#cb94-1036" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1037"><a href="#cb94-1037" aria-hidden="true" tabindex="-1"></a><span class="co"># according to this, there are 1487 unique station id's in the dataset now</span></span>
<span id="cb94-1038"><a href="#cb94-1038" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1039"><a href="#cb94-1039" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-1040"><a href="#cb94-1040" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1041"><a href="#cb94-1041" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1042"><a href="#cb94-1042" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1043"><a href="#cb94-1043" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>())</span>
<span id="cb94-1044"><a href="#cb94-1044" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1045"><a href="#cb94-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1046"><a href="#cb94-1046" aria-hidden="true" tabindex="-1"></a>The 5th decimal place is accurate up to 1.1m, so there ends up being groupings for bikes rented from stations located along a street or at intersections of two streets. You can tell by the start_station_name. If it's an intersection it will say something like "1st St &amp; 2nd St.". If it's one street, it will likely just say "1st St". There are likely some exceptions to that rule. That helps explain why the geospatial coordinates slightly differ for entries with the same stations and IDs.</span>
<span id="cb94-1047"><a href="#cb94-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1050"><a href="#cb94-1050" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1051"><a href="#cb94-1051" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb94-1052"><a href="#cb94-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1053"><a href="#cb94-1053" aria-hidden="true" tabindex="-1"></a>mapTest <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1054"><a href="#cb94-1054" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd,</span>
<span id="cb94-1055"><a href="#cb94-1055" aria-hidden="true" tabindex="-1"></a>           <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1056"><a href="#cb94-1056" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_id,</span>
<span id="cb94-1057"><a href="#cb94-1057" aria-hidden="true" tabindex="-1"></a>                  start_station_name,</span>
<span id="cb94-1058"><a href="#cb94-1058" aria-hidden="true" tabindex="-1"></a>                  start_lat,</span>
<span id="cb94-1059"><a href="#cb94-1059" aria-hidden="true" tabindex="-1"></a>                  start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-1060"><a href="#cb94-1060" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name,</span>
<span id="cb94-1061"><a href="#cb94-1061" aria-hidden="true" tabindex="-1"></a>                    start_station_id,</span>
<span id="cb94-1062"><a href="#cb94-1062" aria-hidden="true" tabindex="-1"></a>                    start_lat,</span>
<span id="cb94-1063"><a href="#cb94-1063" aria-hidden="true" tabindex="-1"></a>                    start_lng) <span class="sc">|&gt;</span></span>
<span id="cb94-1064"><a href="#cb94-1064" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-1065"><a href="#cb94-1065" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(</span>
<span id="cb94-1066"><a href="#cb94-1066" aria-hidden="true" tabindex="-1"></a>        start_station_name,</span>
<span id="cb94-1067"><a href="#cb94-1067" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Ogden Ave &amp; Chicago Ave"</span>) <span class="sc">==</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-1068"><a href="#cb94-1068" aria-hidden="true" tabindex="-1"></a>        n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1069"><a href="#cb94-1069" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name, </span>
<span id="cb94-1070"><a href="#cb94-1070" aria-hidden="true" tabindex="-1"></a>                   start_station_id, </span>
<span id="cb94-1071"><a href="#cb94-1071" aria-hidden="true" tabindex="-1"></a>                   start_lat,</span>
<span id="cb94-1072"><a href="#cb94-1072" aria-hidden="true" tabindex="-1"></a>                   start_lng,</span>
<span id="cb94-1073"><a href="#cb94-1073" aria-hidden="true" tabindex="-1"></a>                   n) <span class="sc">|&gt;</span></span>
<span id="cb94-1074"><a href="#cb94-1074" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb94-1075"><a href="#cb94-1075" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1076"><a href="#cb94-1076" aria-hidden="true" tabindex="-1"></a>mapTest <span class="sc">|&gt;</span></span>
<span id="cb94-1077"><a href="#cb94-1077" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1078"><a href="#cb94-1078" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng, start_lat, n) <span class="sc">|&gt;</span></span>
<span id="cb94-1079"><a href="#cb94-1079" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dplyr::group_by(start_lng, start_lat) |&gt;</span></span>
<span id="cb94-1080"><a href="#cb94-1080" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb94-1081"><a href="#cb94-1081" aria-hidden="true" tabindex="-1"></a>             <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1082"><a href="#cb94-1082" aria-hidden="true" tabindex="-1"></a>    mapview<span class="sc">::</span><span class="fu">mapview</span>()</span>
<span id="cb94-1083"><a href="#cb94-1083" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1084"><a href="#cb94-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1085"><a href="#cb94-1085" aria-hidden="true" tabindex="-1"></a>A quick test of the data:</span>
<span id="cb94-1086"><a href="#cb94-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1089"><a href="#cb94-1089" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1090"><a href="#cb94-1090" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb94-1091"><a href="#cb94-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1092"><a href="#cb94-1092" aria-hidden="true" tabindex="-1"></a>coordsDF <span class="ot">&lt;-</span> mapTest <span class="sc">|&gt;</span></span>
<span id="cb94-1093"><a href="#cb94-1093" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1094"><a href="#cb94-1094" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng,</span>
<span id="cb94-1095"><a href="#cb94-1095" aria-hidden="true" tabindex="-1"></a>                  start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-1096"><a href="#cb94-1096" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(start_lng,</span>
<span id="cb94-1097"><a href="#cb94-1097" aria-hidden="true" tabindex="-1"></a>                     start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-1098"><a href="#cb94-1098" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">100</span>)</span>
<span id="cb94-1099"><a href="#cb94-1099" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1100"><a href="#cb94-1100" aria-hidden="true" tabindex="-1"></a>coordsDF <span class="sc">|&gt;</span></span>
<span id="cb94-1101"><a href="#cb94-1101" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb94-1102"><a href="#cb94-1102" aria-hidden="true" tabindex="-1"></a>                 <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1103"><a href="#cb94-1103" aria-hidden="true" tabindex="-1"></a>    mapview<span class="sc">::</span><span class="fu">mapview</span>()</span>
<span id="cb94-1104"><a href="#cb94-1104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1105"><a href="#cb94-1105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1108"><a href="#cb94-1108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1109"><a href="#cb94-1109" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb94-1110"><a href="#cb94-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1111"><a href="#cb94-1111" aria-hidden="true" tabindex="-1"></a><span class="co"># according to this, there are 1428 unique station IDs in the dataset now</span></span>
<span id="cb94-1112"><a href="#cb94-1112" aria-hidden="true" tabindex="-1"></a>countStations <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1113"><a href="#cb94-1113" aria-hidden="true" tabindex="-1"></a>                            tblPath,</span>
<span id="cb94-1114"><a href="#cb94-1114" aria-hidden="true" tabindex="-1"></a>                            <span class="at">check_from =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1115"><a href="#cb94-1115" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_id, start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1116"><a href="#cb94-1116" aria-hidden="true" tabindex="-1"></a>    <span class="co">#dplyr::distinct(dplyr::pick(start_station_id, start_station_name)) |&gt;</span></span>
<span id="cb94-1117"><a href="#cb94-1117" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_id,</span>
<span id="cb94-1118"><a href="#cb94-1118" aria-hidden="true" tabindex="-1"></a>                    start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1119"><a href="#cb94-1119" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-1120"><a href="#cb94-1120" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1121"><a href="#cb94-1121" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb94-1122"><a href="#cb94-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1123"><a href="#cb94-1123" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(countStations)</span>
<span id="cb94-1124"><a href="#cb94-1124" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1125"><a href="#cb94-1125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1128"><a href="#cb94-1128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1129"><a href="#cb94-1129" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "column plot"</span></span>
<span id="cb94-1130"><a href="#cb94-1130" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: body-outset</span></span>
<span id="cb94-1131"><a href="#cb94-1131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1132"><a href="#cb94-1132" aria-hidden="true" tabindex="-1"></a>memberCasuals_monthly  <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1133"><a href="#cb94-1133" aria-hidden="true" tabindex="-1"></a>           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1134"><a href="#cb94-1134" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at,</span>
<span id="cb94-1135"><a href="#cb94-1135" aria-hidden="true" tabindex="-1"></a>                  member_casual) <span class="sc">|&gt;</span></span>
<span id="cb94-1136"><a href="#cb94-1136" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">'month'</span> <span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">month</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb94-1137"><a href="#cb94-1137" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(month,</span>
<span id="cb94-1138"><a href="#cb94-1138" aria-hidden="true" tabindex="-1"></a>                    member_casual) <span class="sc">|&gt;</span></span>
<span id="cb94-1139"><a href="#cb94-1139" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="st">"riderCount"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-1140"><a href="#cb94-1140" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(month)</span>
<span id="cb94-1141"><a href="#cb94-1141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1142"><a href="#cb94-1142" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">collect</span>(memberCasuals_monthly) <span class="sc">|&gt;</span></span>
<span id="cb94-1143"><a href="#cb94-1143" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb94-1144"><a href="#cb94-1144" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_col</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(month),</span>
<span id="cb94-1145"><a href="#cb94-1145" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">y =</span> riderCount,</span>
<span id="cb94-1146"><a href="#cb94-1146" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">fill =</span> member_casual),</span>
<span id="cb94-1147"><a href="#cb94-1147" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb94-1148"><a href="#cb94-1148" aria-hidden="true" tabindex="-1"></a>                      <span class="at">position =</span> <span class="st">'dodge2'</span>) <span class="sc">+</span></span>
<span id="cb94-1149"><a href="#cb94-1149" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> month.abb,</span>
<span id="cb94-1150"><a href="#cb94-1150" aria-hidden="true" tabindex="-1"></a>                              <span class="at">name =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb94-1151"><a href="#cb94-1151" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">'Set2'</span>) <span class="sc">+</span></span>
<span id="cb94-1152"><a href="#cb94-1152" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme_dark</span>() <span class="sc">+</span></span>
<span id="cb94-1153"><a href="#cb94-1153" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb94-1154"><a href="#cb94-1154" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Ridership: Members vs Casuals"</span>,</span>
<span id="cb94-1155"><a href="#cb94-1155" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"(Jan-Dec 2023)"</span>,</span>
<span id="cb94-1156"><a href="#cb94-1156" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data from cyclistic database."</span>,</span>
<span id="cb94-1157"><a href="#cb94-1157" aria-hidden="true" tabindex="-1"></a>    <span class="at">tag =</span> <span class="st">"Figure 1.b"</span>)</span>
<span id="cb94-1158"><a href="#cb94-1158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1159"><a href="#cb94-1159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1160"><a href="#cb94-1160" aria-hidden="true" tabindex="-1"></a>for quick reference with using Tsibble syntax</span>
<span id="cb94-1161"><a href="#cb94-1161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1164"><a href="#cb94-1164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1165"><a href="#cb94-1165" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'grouped tibb'</span></span>
<span id="cb94-1166"><a href="#cb94-1166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1167"><a href="#cb94-1167" aria-hidden="true" tabindex="-1"></a>grouped_byDay <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1168"><a href="#cb94-1168" aria-hidden="true" tabindex="-1"></a>                            tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1169"><a href="#cb94-1169" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(started_at,</span>
<span id="cb94-1170"><a href="#cb94-1170" aria-hidden="true" tabindex="-1"></a>                  member_casual) <span class="sc">|&gt;</span></span>
<span id="cb94-1171"><a href="#cb94-1171" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1172"><a href="#cb94-1172" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">started_at =</span> <span class="fu">as.Date</span>(started_at)) <span class="sc">|&gt;</span></span>
<span id="cb94-1173"><a href="#cb94-1173" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(started_at,</span>
<span id="cb94-1174"><a href="#cb94-1174" aria-hidden="true" tabindex="-1"></a>                    member_casual) <span class="sc">|&gt;</span></span>
<span id="cb94-1175"><a href="#cb94-1175" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>(),</span>
<span id="cb94-1176"><a href="#cb94-1176" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sdev =</span> stats<span class="sc">::</span><span class="fu">sd</span>(n))</span>
<span id="cb94-1177"><a href="#cb94-1177" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1178"><a href="#cb94-1178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1181"><a href="#cb94-1181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1182"><a href="#cb94-1182" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'to grouped tsibb'</span></span>
<span id="cb94-1183"><a href="#cb94-1183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1184"><a href="#cb94-1184" aria-hidden="true" tabindex="-1"></a><span class="co"># tsibble, time-series table/tibble seems to make time series plots more straightforward</span></span>
<span id="cb94-1185"><a href="#cb94-1185" aria-hidden="true" tabindex="-1"></a>grouped_tsi <span class="ot">&lt;-</span> grouped_byDay <span class="sc">|&gt;</span></span>
<span id="cb94-1186"><a href="#cb94-1186" aria-hidden="true" tabindex="-1"></a>    tsibble<span class="sc">::</span><span class="fu">as_tsibble</span>(<span class="at">key =</span> <span class="fu">c</span>(member_casual,</span>
<span id="cb94-1187"><a href="#cb94-1187" aria-hidden="true" tabindex="-1"></a>                                n),</span>
<span id="cb94-1188"><a href="#cb94-1188" aria-hidden="true" tabindex="-1"></a>                        <span class="at">index =</span> started_at) <span class="sc">|&gt;</span></span>
<span id="cb94-1189"><a href="#cb94-1189" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(started_at)</span>
<span id="cb94-1190"><a href="#cb94-1190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1191"><a href="#cb94-1191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1194"><a href="#cb94-1194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1195"><a href="#cb94-1195" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: "map query setup"</span></span>
<span id="cb94-1196"><a href="#cb94-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1197"><a href="#cb94-1197" aria-hidden="true" tabindex="-1"></a><span class="co"># chicago starting coordinates for leaflet, setView</span></span>
<span id="cb94-1198"><a href="#cb94-1198" aria-hidden="true" tabindex="-1"></a>chicago <span class="ot">&lt;-</span> maps<span class="sc">::</span>us.cities <span class="sc">|&gt;</span></span>
<span id="cb94-1199"><a href="#cb94-1199" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">"name"</span>,</span>
<span id="cb94-1200"><a href="#cb94-1200" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"long"</span>,</span>
<span id="cb94-1201"><a href="#cb94-1201" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"lat"</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1202"><a href="#cb94-1202" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Chicago IL"</span>)</span>
<span id="cb94-1203"><a href="#cb94-1203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1204"><a href="#cb94-1204" aria-hidden="true" tabindex="-1"></a><span class="co"># full dataset coordinates, might need to sample</span></span>
<span id="cb94-1205"><a href="#cb94-1205" aria-hidden="true" tabindex="-1"></a>coordQry <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1206"><a href="#cb94-1206" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1207"><a href="#cb94-1207" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng,</span>
<span id="cb94-1208"><a href="#cb94-1208" aria-hidden="true" tabindex="-1"></a>                  start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-1209"><a href="#cb94-1209" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(start_lng,</span>
<span id="cb94-1210"><a href="#cb94-1210" aria-hidden="true" tabindex="-1"></a>                     start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-1211"><a href="#cb94-1211" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1212"><a href="#cb94-1212" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb94-1213"><a href="#cb94-1213" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb94-1214"><a href="#cb94-1214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1215"><a href="#cb94-1215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1216"><a href="#cb94-1216" aria-hidden="true" tabindex="-1"></a>coordQry_small <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1217"><a href="#cb94-1217" aria-hidden="true" tabindex="-1"></a>                             tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1218"><a href="#cb94-1218" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_lng,</span>
<span id="cb94-1219"><a href="#cb94-1219" aria-hidden="true" tabindex="-1"></a>                  start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-1220"><a href="#cb94-1220" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">add_count</span>(start_lng,</span>
<span id="cb94-1221"><a href="#cb94-1221" aria-hidden="true" tabindex="-1"></a>                     start_lat) <span class="sc">|&gt;</span></span>
<span id="cb94-1222"><a href="#cb94-1222" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1223"><a href="#cb94-1223" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb94-1224"><a href="#cb94-1224" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1225"><a href="#cb94-1225" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">50</span>)</span>
<span id="cb94-1226"><a href="#cb94-1226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1227"><a href="#cb94-1227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1228"><a href="#cb94-1228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1231"><a href="#cb94-1231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1232"><a href="#cb94-1232" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: "mapview"</span></span>
<span id="cb94-1233"><a href="#cb94-1233" aria-hidden="true" tabindex="-1"></a><span class="co">#|eval: false</span></span>
<span id="cb94-1234"><a href="#cb94-1234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1235"><a href="#cb94-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1236"><a href="#cb94-1236" aria-hidden="true" tabindex="-1"></a>coordQry_small <span class="sc">|&gt;</span></span>
<span id="cb94-1237"><a href="#cb94-1237" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb94-1238"><a href="#cb94-1238" aria-hidden="true" tabindex="-1"></a>                <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-1239"><a href="#cb94-1239" aria-hidden="true" tabindex="-1"></a>    mapview<span class="sc">::</span><span class="fu">mapview</span>()</span>
<span id="cb94-1240"><a href="#cb94-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1241"><a href="#cb94-1241" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1242"><a href="#cb94-1242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1245"><a href="#cb94-1245" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1246"><a href="#cb94-1246" aria-hidden="true" tabindex="-1"></a><span class="fu">ojs_define</span>(<span class="at">js_tsi =</span> grouped_tsi)</span>
<span id="cb94-1247"><a href="#cb94-1247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1248"><a href="#cb94-1248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1251"><a href="#cb94-1251" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb94-1252"><a href="#cb94-1252" aria-hidden="true" tabindex="-1"></a><span class="in">jsData = transpose(js_tsi)</span></span>
<span id="cb94-1253"><a href="#cb94-1253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1254"><a href="#cb94-1254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1255"><a href="#cb94-1255" aria-hidden="true" tabindex="-1"></a>::: column-page</span>
<span id="cb94-1258"><a href="#cb94-1258" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb94-1259"><a href="#cb94-1259" aria-hidden="true" tabindex="-1"></a><span class="in">Plot.plot({</span></span>
<span id="cb94-1260"><a href="#cb94-1260" aria-hidden="true" tabindex="-1"></a><span class="in">    grid: true,</span></span>
<span id="cb94-1261"><a href="#cb94-1261" aria-hidden="true" tabindex="-1"></a><span class="in">    color: {legend: true},</span></span>
<span id="cb94-1262"><a href="#cb94-1262" aria-hidden="true" tabindex="-1"></a><span class="in">    marks: [</span></span>
<span id="cb94-1263"><a href="#cb94-1263" aria-hidden="true" tabindex="-1"></a><span class="in">        Plot.dot(jsData, {x: 'started_at', y: 'n', fill: 'member_casual'})</span></span>
<span id="cb94-1264"><a href="#cb94-1264" aria-hidden="true" tabindex="-1"></a><span class="in">]</span></span>
<span id="cb94-1265"><a href="#cb94-1265" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb94-1266"><a href="#cb94-1266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1267"><a href="#cb94-1267" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb94-1268"><a href="#cb94-1268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1271"><a href="#cb94-1271" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb94-1272"><a href="#cb94-1272" aria-hidden="true" tabindex="-1"></a><span class="in">Plot.lineY(jsData, {x: "started_at", y: "n"}).plot()</span></span>
<span id="cb94-1273"><a href="#cb94-1273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1274"><a href="#cb94-1274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1277"><a href="#cb94-1277" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1278"><a href="#cb94-1278" aria-hidden="true" tabindex="-1"></a>locsStart <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1279"><a href="#cb94-1279" aria-hidden="true" tabindex="-1"></a>                      tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1280"><a href="#cb94-1280" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name</span>
<span id="cb94-1281"><a href="#cb94-1281" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#start_lng,</span></span>
<span id="cb94-1282"><a href="#cb94-1282" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#start_lat</span></span>
<span id="cb94-1283"><a href="#cb94-1283" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">|&gt;</span></span>
<span id="cb94-1284"><a href="#cb94-1284" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1285"><a href="#cb94-1285" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1286"><a href="#cb94-1286" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"station_name"</span> <span class="ot">=</span> start_station_name</span>
<span id="cb94-1287"><a href="#cb94-1287" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># "lng" = start_lng,</span></span>
<span id="cb94-1288"><a href="#cb94-1288" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># "lat" = start_lat</span></span>
<span id="cb94-1289"><a href="#cb94-1289" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb94-1290"><a href="#cb94-1290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1291"><a href="#cb94-1291" aria-hidden="true" tabindex="-1"></a>locsEnd <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1292"><a href="#cb94-1292" aria-hidden="true" tabindex="-1"></a>                      tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1293"><a href="#cb94-1293" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(end_station_name</span>
<span id="cb94-1294"><a href="#cb94-1294" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#end_lng,</span></span>
<span id="cb94-1295"><a href="#cb94-1295" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#end_lat</span></span>
<span id="cb94-1296"><a href="#cb94-1296" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">|&gt;</span></span>
<span id="cb94-1297"><a href="#cb94-1297" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1298"><a href="#cb94-1298" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1299"><a href="#cb94-1299" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"station_name"</span> <span class="ot">=</span> end_station_name</span>
<span id="cb94-1300"><a href="#cb94-1300" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#"lng" = end_lng,</span></span>
<span id="cb94-1301"><a href="#cb94-1301" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#"lat" = end_lat</span></span>
<span id="cb94-1302"><a href="#cb94-1302" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb94-1303"><a href="#cb94-1303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1304"><a href="#cb94-1304" aria-hidden="true" tabindex="-1"></a>locs <span class="ot">&lt;-</span> locsStart <span class="sc">|&gt;</span></span>
<span id="cb94-1305"><a href="#cb94-1305" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">left_join</span>(locsEnd) <span class="sc">|&gt;</span></span>
<span id="cb94-1306"><a href="#cb94-1306" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(station_name)</span>
<span id="cb94-1307"><a href="#cb94-1307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1308"><a href="#cb94-1308" aria-hidden="true" tabindex="-1"></a>locs</span>
<span id="cb94-1309"><a href="#cb94-1309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1310"><a href="#cb94-1310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1313"><a href="#cb94-1313" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1314"><a href="#cb94-1314" aria-hidden="true" tabindex="-1"></a>flowData <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1315"><a href="#cb94-1315" aria-hidden="true" tabindex="-1"></a>                       tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1316"><a href="#cb94-1316" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name,</span>
<span id="cb94-1317"><a href="#cb94-1317" aria-hidden="true" tabindex="-1"></a>                  end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1318"><a href="#cb94-1318" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name,</span>
<span id="cb94-1319"><a href="#cb94-1319" aria-hidden="true" tabindex="-1"></a>                    end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1320"><a href="#cb94-1320" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb94-1321"><a href="#cb94-1321" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1322"><a href="#cb94-1322" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb94-1323"><a href="#cb94-1323" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"from_station"</span> <span class="ot">=</span> start_station_name,</span>
<span id="cb94-1324"><a href="#cb94-1324" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"to_station"</span> <span class="ot">=</span> end_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1325"><a href="#cb94-1325" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-1326"><a href="#cb94-1326" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">50</span>)</span>
<span id="cb94-1327"><a href="#cb94-1327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1328"><a href="#cb94-1328" aria-hidden="true" tabindex="-1"></a>flowData</span>
<span id="cb94-1329"><a href="#cb94-1329" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(flowData<span class="sc">$</span>n)</span>
<span id="cb94-1330"><a href="#cb94-1330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1331"><a href="#cb94-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1334"><a href="#cb94-1334" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1335"><a href="#cb94-1335" aria-hidden="true" tabindex="-1"></a>locationData <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(dbconn,</span>
<span id="cb94-1336"><a href="#cb94-1336" aria-hidden="true" tabindex="-1"></a>                           tblPath_fltrd) <span class="sc">|&gt;</span></span>
<span id="cb94-1337"><a href="#cb94-1337" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(start_station_name,</span>
<span id="cb94-1338"><a href="#cb94-1338" aria-hidden="true" tabindex="-1"></a>                  started_at,</span>
<span id="cb94-1339"><a href="#cb94-1339" aria-hidden="true" tabindex="-1"></a>                  ended_at,</span>
<span id="cb94-1340"><a href="#cb94-1340" aria-hidden="true" tabindex="-1"></a>                  trip_time) <span class="sc">|&gt;</span></span>
<span id="cb94-1341"><a href="#cb94-1341" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1342"><a href="#cb94-1342" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"trip_time"</span> <span class="ot">=</span> <span class="fu">round</span>(trip_time,</span>
<span id="cb94-1343"><a href="#cb94-1343" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-1344"><a href="#cb94-1344" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="st">"trip_count"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>(),</span>
<span id="cb94-1345"><a href="#cb94-1345" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"first_date"</span> <span class="ot">=</span> <span class="fu">min</span>(started_at),</span>
<span id="cb94-1346"><a href="#cb94-1346" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"last_date"</span> <span class="ot">=</span> <span class="fu">max</span>(ended_at),</span>
<span id="cb94-1347"><a href="#cb94-1347" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"avg_trip_time"</span> <span class="ot">=</span> <span class="fu">mean</span>(trip_time)</span>
<span id="cb94-1348"><a href="#cb94-1348" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">|&gt;</span></span>
<span id="cb94-1349"><a href="#cb94-1349" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"station_name"</span> <span class="ot">=</span> start_station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1350"><a href="#cb94-1350" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb94-1351"><a href="#cb94-1351" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">collect</span>()</span>
<span id="cb94-1352"><a href="#cb94-1352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1353"><a href="#cb94-1353" aria-hidden="true" tabindex="-1"></a>locationData</span>
<span id="cb94-1354"><a href="#cb94-1354" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1355"><a href="#cb94-1355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1358"><a href="#cb94-1358" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1359"><a href="#cb94-1359" aria-hidden="true" tabindex="-1"></a>mergd <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> locationData,</span>
<span id="cb94-1360"><a href="#cb94-1360" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> locs,</span>
<span id="cb94-1361"><a href="#cb94-1361" aria-hidden="true" tabindex="-1"></a>               <span class="at">by.x =</span> <span class="st">"station_name"</span>,</span>
<span id="cb94-1362"><a href="#cb94-1362" aria-hidden="true" tabindex="-1"></a>               <span class="at">by.y =</span> <span class="st">"station_name"</span>,</span>
<span id="cb94-1363"><a href="#cb94-1363" aria-hidden="true" tabindex="-1"></a>               <span class="at">sort =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-1364"><a href="#cb94-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1365"><a href="#cb94-1365" aria-hidden="true" tabindex="-1"></a>mergd <span class="ot">&lt;-</span> mergd <span class="sc">|&gt;</span></span>
<span id="cb94-1366"><a href="#cb94-1366" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">avg_trip_time =</span> <span class="fu">round</span>(avg_trip_time,</span>
<span id="cb94-1367"><a href="#cb94-1367" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">digits =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-1368"><a href="#cb94-1368" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(trip_count)) <span class="sc">|&gt;</span></span>
<span id="cb94-1369"><a href="#cb94-1369" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">25</span>)    </span>
<span id="cb94-1370"><a href="#cb94-1370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1371"><a href="#cb94-1371" aria-hidden="true" tabindex="-1"></a>mergd</span>
<span id="cb94-1372"><a href="#cb94-1372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1373"><a href="#cb94-1373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1376"><a href="#cb94-1376" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1377"><a href="#cb94-1377" aria-hidden="true" tabindex="-1"></a><span class="co">#|class-output: plotMod</span></span>
<span id="cb94-1378"><a href="#cb94-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1379"><a href="#cb94-1379" aria-hidden="true" tabindex="-1"></a>ef_test <span class="ot">&lt;-</span> epiflows<span class="sc">::</span><span class="fu">make_epiflows</span>(<span class="at">flows =</span> flowData,</span>
<span id="cb94-1380"><a href="#cb94-1380" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">locations =</span> mergd,</span>
<span id="cb94-1381"><a href="#cb94-1381" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">duration_stay =</span> <span class="st">"avg_trip_time"</span>,</span>
<span id="cb94-1382"><a href="#cb94-1382" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">num_cases =</span> <span class="st">"trip_count"</span>)</span>
<span id="cb94-1383"><a href="#cb94-1383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1384"><a href="#cb94-1384" aria-hidden="true" tabindex="-1"></a>epiflows<span class="sc">::</span><span class="fu">vis_epiflows</span>(ef_test)</span>
<span id="cb94-1385"><a href="#cb94-1385" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1386"><a href="#cb94-1386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1387"><a href="#cb94-1387" aria-hidden="true" tabindex="-1"></a>These maps track bike-sharing activity going on worldwide and in Chicago.</span>
<span id="cb94-1388"><a href="#cb94-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1389"><a href="#cb94-1389" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Bike Share Map</span><span class="co">](https://bikesharemap.com/#/8/-87.5771/41.3747/)</span> <span class="co">[</span><span class="ot">@bikesha</span><span class="co">]</span></span>
<span id="cb94-1390"><a href="#cb94-1390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1391"><a href="#cb94-1391" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">CityBikes: bike sharing networks around the world</span><span class="co">](https://citybik.es/)</span> <span class="co">[</span><span class="ot">@citybike</span><span class="co">]</span></span>
<span id="cb94-1392"><a href="#cb94-1392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1393"><a href="#cb94-1393" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb94-1394"><a href="#cb94-1394" aria-hidden="true" tabindex="-1"></a><span class="in">#|label: 'drops duckDB tables'</span></span>
<span id="cb94-1395"><a href="#cb94-1395" aria-hidden="true" tabindex="-1"></a><span class="in">source("duckDrops.R")</span></span>
<span id="cb94-1396"><a href="#cb94-1396" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-1397"><a href="#cb94-1397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-1400"><a href="#cb94-1400" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-1401"><a href="#cb94-1401" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: 'duckDB Shutdown'</span></span>
<span id="cb94-1402"><a href="#cb94-1402" aria-hidden="true" tabindex="-1"></a>duckdb<span class="sc">::</span><span class="fu">dbDisconnect</span>(dbconn, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-1403"><a href="#cb94-1403" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"db"</span>,</span>
<span id="cb94-1404"><a href="#cb94-1404" aria-hidden="true" tabindex="-1"></a>       <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-1405"><a href="#cb94-1405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>

</section>
</section>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImpzRGF0YSA9IHRyYW5zcG9zZShqc190c2kpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJQbG90LnBsb3Qoe1xuICAgIGdyaWQ6IHRydWUsXG4gICAgY29sb3I6IHtsZWdlbmQ6IHRydWV9LFxuICAgIG1hcmtzOiBbXG4gICAgICAgIFBsb3QuZG90KGpzRGF0YSwge3g6ICdzdGFydGVkX2F0JywgeTogJ24nLCBmaWxsOiAnbWVtYmVyX2Nhc3VhbCd9KVxuXVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlBsb3QubGluZVkoanNEYXRhLCB7eDogXCJzdGFydGVkX2F0XCIsIHk6IFwiblwifSkucGxvdCgpXG4ifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bikesha" class="csl-entry" role="listitem">
<span>“Bike Share Map: Chicago (Divvy).”</span> n.d. <a href="https://bikesharemap.com/chicago/">https://bikesharemap.com/chicago/</a>.
</div>
<div id="ref-citybike" class="csl-entry" role="listitem">
<span>“CityBikes: Bike Sharing Networks Around the World.”</span> n.d. <a href="https://citybik.es/">https://citybik.es/</a>.
</div>
<div id="ref-divvydab" class="csl-entry" role="listitem">
<span>“Divvy Data.”</span> n.d. <a href="https://divvybikes.com/system-data">https://divvybikes.com/system-data</a>.
</div>
</div></section></div></div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>